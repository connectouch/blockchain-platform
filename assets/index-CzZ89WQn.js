const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DeFiPage-DmLGAYOu.js","assets/ui-CIGGqqhk.js","assets/router-B3YxnSyQ.js","assets/vendor-DBnw6Ey0.js","assets/web3-CeUyKLFI.js","assets/LoadingSpinner-Bh1ygWPB.js","assets/utils-C0Bg54wM.js","assets/NFTPage-BfqODH7V.js","assets/GameFiPage-CTjogMdm.js","assets/Web3ToolsPage-CheEELSA.js","assets/AnalysisPage-C57PLTt5.js","assets/PortfolioPage-0y2gw2EG.js","assets/MultiChainPage-DUXZIMwI.js","assets/EnhancedDAOPage-BsUuYVeT.js","assets/InfrastructurePage-Cd20Y3sZ.js"])))=>i.map(i=>d[i]);
var Cn=Object.defineProperty;var Tn=(i,t,s)=>t in i?Cn(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var F=(i,t,s)=>Tn(i,typeof t!="symbol"?t+"":t,s);import{j as e,m as R,T as Q,C as nt,E as gs,D as Ve,A as se,a as Ne,U as la,b as pr,c as me,X as at,S as ca,P as ls,W as Nt,d as rt,e as cs,f as da,g as ge,h as Dt,i as ee,L as Na,M as Ft,k as ds,R as W,Z as De,l as ue,n as Ut,B as Ae,o as fr,p as Ss,q as An,r as xr,s as He,t as En,u as wr,v as In,I as br,w as Bt,N as _s,x as Ge,F as Cs,H as Pn,V as Ht,y as $n,z as Dn,G as Rt,J as Tt,K as yr,O as Rn,Q as Ln,Y as Mn,_ as Le,$ as vr,a0 as On,a1 as ps,a2 as jr,a3 as Fn,a4 as Nr,a5 as Un,a6 as Bn,a7 as kr,a8 as Hn,a9 as Sr,aa as _r,ab as zn,ac as Cr,ad as Tr,ae as Vn,af as Gn,ag as Wn,ah as qn,ai as Kn,aj as Jn,ak as Yn}from"./ui-CIGGqqhk.js";import{r as y,R as pe,u as Ar,L as Ts,a as Xn,b as _e,B as Qn}from"./router-B3YxnSyQ.js";import{a as Zn,g as ha,b as ei,r as Er}from"./vendor-DBnw6Ey0.js";import{_ as de,Q as ti,a as si}from"./web3-CeUyKLFI.js";import{a as ze}from"./utils-C0Bg54wM.js";import{PrismaClient as ai}from"@prisma/client";import{createClient as ri}from"redis";import{Pool as ni}from"pg";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();var Yt={},ka;function ii(){if(ka)return Yt;ka=1;var i=Zn();return Yt.createRoot=i.createRoot,Yt.hydrateRoot=i.hydrateRoot,Yt}var oi=ii();const li=ha(oi);let ci={data:""},di=i=>typeof window=="object"?((i?i.querySelector("#_goober"):window._goober)||Object.assign((i||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:i||ci,hi=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ui=/\/\*[^]*?\*\/|  +/g,Sa=/\n+/g,Ue=(i,t)=>{let s="",a="",r="";for(let n in i){let o=i[n];n[0]=="@"?n[1]=="i"?s=n+" "+o+";":a+=n[1]=="f"?Ue(o,n):n+"{"+Ue(o,n[1]=="k"?"":t)+"}":typeof o=="object"?a+=Ue(o,t?t.replace(/([^,])+/g,l=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):n):o!=null&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Ue.p?Ue.p(n,o):n+":"+o+";")}return s+(t&&r?t+"{"+r+"}":r)+a},Ee={},Ir=i=>{if(typeof i=="object"){let t="";for(let s in i)t+=s+Ir(i[s]);return t}return i},mi=(i,t,s,a,r)=>{let n=Ir(i),o=Ee[n]||(Ee[n]=(c=>{let h=0,d=11;for(;h<c.length;)d=101*d+c.charCodeAt(h++)>>>0;return"go"+d})(n));if(!Ee[o]){let c=n!==i?i:(h=>{let d,u,m=[{}];for(;d=hi.exec(h.replace(ui,""));)d[4]?m.shift():d[3]?(u=d[3].replace(Sa," ").trim(),m.unshift(m[0][u]=m[0][u]||{})):m[0][d[1]]=d[2].replace(Sa," ").trim();return m[0]})(i);Ee[o]=Ue(r?{["@keyframes "+o]:c}:c,s?"":"."+o)}let l=s&&Ee.g?Ee.g:null;return s&&(Ee.g=Ee[o]),((c,h,d,u)=>{u?h.data=h.data.replace(u,c):h.data.indexOf(c)===-1&&(h.data=d?c+h.data:h.data+c)})(Ee[o],t,a,l),o},gi=(i,t,s)=>i.reduce((a,r,n)=>{let o=t[n];if(o&&o.call){let l=o(s),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Ue(l,""):l===!1?"":l}return a+r+(o??"")},"");function fs(i){let t=this||{},s=i.call?i(t.p):i;return mi(s.unshift?s.raw?gi(s,[].slice.call(arguments,1),t.p):s.reduce((a,r)=>Object.assign(a,r&&r.call?r(t.p):r),{}):s,di(t.target),t.g,t.o,t.k)}let Pr,Gs,Ws;fs.bind({g:1});let Re=fs.bind({k:1});function pi(i,t,s,a){Ue.p=t,Pr=i,Gs=s,Ws=a}function We(i,t){let s=this||{};return function(){let a=arguments;function r(n,o){let l=Object.assign({},n),c=l.className||r.className;s.p=Object.assign({theme:Gs&&Gs()},l),s.o=/ *go\d+/.test(c),l.className=fs.apply(s,a)+(c?" "+c:"");let h=i;return i[0]&&(h=l.as||i,delete l.as),Ws&&h[0]&&Ws(l),Pr(h,l)}return r}}var fi=i=>typeof i=="function",hs=(i,t)=>fi(i)?i(t):i,xi=(()=>{let i=0;return()=>(++i).toString()})(),$r=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");i=!t||t.matches}return i}})(),wi=20,Dr=(i,t)=>{switch(t.type){case 0:return{...i,toasts:[t.toast,...i.toasts].slice(0,wi)};case 1:return{...i,toasts:i.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case 2:let{toast:s}=t;return Dr(i,{type:i.toasts.find(n=>n.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=t;return{...i,toasts:i.toasts.map(n=>n.id===a||a===void 0?{...n,dismissed:!0,visible:!1}:n)};case 4:return t.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(n=>n.id!==t.toastId)};case 5:return{...i,pausedAt:t.time};case 6:let r=t.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(n=>({...n,pauseDuration:n.pauseDuration+r}))}}},ns=[],st={toasts:[],pausedAt:void 0},it=i=>{st=Dr(st,i),ns.forEach(t=>{t(st)})},bi={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},yi=(i={})=>{let[t,s]=y.useState(st),a=y.useRef(st);y.useEffect(()=>(a.current!==st&&s(st),ns.push(s),()=>{let n=ns.indexOf(s);n>-1&&ns.splice(n,1)}),[]);let r=t.toasts.map(n=>{var o,l,c;return{...i,...i[n.type],...n,removeDelay:n.removeDelay||((o=i[n.type])==null?void 0:o.removeDelay)||i?.removeDelay,duration:n.duration||((l=i[n.type])==null?void 0:l.duration)||i?.duration||bi[n.type],style:{...i.style,...(c=i[n.type])==null?void 0:c.style,...n.style}}});return{...t,toasts:r}},vi=(i,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...s,id:s?.id||xi()}),Gt=i=>(t,s)=>{let a=vi(t,i,s);return it({type:2,toast:a}),a.id},oe=(i,t)=>Gt("blank")(i,t);oe.error=Gt("error");oe.success=Gt("success");oe.loading=Gt("loading");oe.custom=Gt("custom");oe.dismiss=i=>{it({type:3,toastId:i})};oe.remove=i=>it({type:4,toastId:i});oe.promise=(i,t,s)=>{let a=oe.loading(t.loading,{...s,...s?.loading});return typeof i=="function"&&(i=i()),i.then(r=>{let n=t.success?hs(t.success,r):void 0;return n?oe.success(n,{id:a,...s,...s?.success}):oe.dismiss(a),r}).catch(r=>{let n=t.error?hs(t.error,r):void 0;n?oe.error(n,{id:a,...s,...s?.error}):oe.dismiss(a)}),i};var ji=(i,t)=>{it({type:1,toast:{id:i,height:t}})},Ni=()=>{it({type:5,time:Date.now()})},Lt=new Map,ki=1e3,Si=(i,t=ki)=>{if(Lt.has(i))return;let s=setTimeout(()=>{Lt.delete(i),it({type:4,toastId:i})},t);Lt.set(i,s)},_i=i=>{let{toasts:t,pausedAt:s}=yi(i);y.useEffect(()=>{if(s)return;let n=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(n-l.createdAt);if(c<0){l.visible&&oe.dismiss(l.id);return}return setTimeout(()=>oe.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,s]);let a=y.useCallback(()=>{s&&it({type:6,time:Date.now()})},[s]),r=y.useCallback((n,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:h}=o||{},d=t.filter(f=>(f.position||h)===(n.position||h)&&f.height),u=d.findIndex(f=>f.id===n.id),m=d.filter((f,j)=>j<u&&f.visible).length;return d.filter(f=>f.visible).slice(...l?[m+1]:[0,m]).reduce((f,j)=>f+(j.height||0)+c,0)},[t]);return y.useEffect(()=>{t.forEach(n=>{if(n.dismissed)Si(n.id,n.removeDelay);else{let o=Lt.get(n.id);o&&(clearTimeout(o),Lt.delete(n.id))}})},[t]),{toasts:t,handlers:{updateHeight:ji,startPause:Ni,endPause:a,calculateOffset:r}}},Ci=Re`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Ti=Re`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ai=Re`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ei=We("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ci} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Ti} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ai} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ii=Re`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Pi=We("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${Ii} 1s linear infinite;
`,$i=Re`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Di=Re`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ri=We("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$i} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Di} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Li=We("div")`
  position: absolute;
`,Mi=We("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Oi=Re`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Fi=We("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Oi} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ui=({toast:i})=>{let{icon:t,type:s,iconTheme:a}=i;return t!==void 0?typeof t=="string"?y.createElement(Fi,null,t):t:s==="blank"?null:y.createElement(Mi,null,y.createElement(Pi,{...a}),s!=="loading"&&y.createElement(Li,null,s==="error"?y.createElement(Ei,{...a}):y.createElement(Ri,{...a})))},Bi=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Hi=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,zi="0%{opacity:0;} 100%{opacity:1;}",Vi="0%{opacity:1;} 100%{opacity:0;}",Gi=We("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Wi=We("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,qi=(i,t)=>{let s=i.includes("top")?1:-1,[a,r]=$r()?[zi,Vi]:[Bi(s),Hi(s)];return{animation:t?`${Re(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Re(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Ki=y.memo(({toast:i,position:t,style:s,children:a})=>{let r=i.height?qi(i.position||t||"top-center",i.visible):{opacity:0},n=y.createElement(Ui,{toast:i}),o=y.createElement(Wi,{...i.ariaProps},hs(i.message,i));return y.createElement(Gi,{className:i.className,style:{...r,...s,...i.style}},typeof a=="function"?a({icon:n,message:o}):y.createElement(y.Fragment,null,n,o))});pi(y.createElement);var Ji=({id:i,className:t,style:s,onHeightUpdate:a,children:r})=>{let n=y.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;a(i,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[i,a]);return y.createElement("div",{ref:n,className:t,style:s},r)},Yi=(i,t)=>{let s=i.includes("top"),a=s?{top:0}:{bottom:0},r=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:$r()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...a,...r}},Xi=fs`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Xt=16,Qi=({reverseOrder:i,position:t="top-center",toastOptions:s,gutter:a,children:r,containerStyle:n,containerClassName:o})=>{let{toasts:l,handlers:c}=_i(s);return y.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Xt,left:Xt,right:Xt,bottom:Xt,pointerEvents:"none",...n},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(h=>{let d=h.position||t,u=c.calculateOffset(h,{reverseOrder:i,gutter:a,defaultPosition:t}),m=Yi(d,u);return y.createElement(Ji,{id:h.id,key:h.id,onHeightUpdate:c.updateHeight,className:h.visible?Xi:"",style:m},h.type==="custom"?hs(h.message,h):r?r(h):y.createElement(Ki,{toast:h,position:d}))}))},be=oe;const Zi=i=>{let t;return i?t=i:typeof fetch>"u"?t=(...s)=>de(async()=>{const{default:a}=await Promise.resolve().then(()=>kt);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)};class ua extends Error{constructor(t,s="FunctionsError",a){super(t),this.name=s,this.context=a}}class eo extends ua{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class _a extends ua{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ca extends ua{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var qs;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(qs||(qs={}));var to=function(i,t,s,a){function r(n){return n instanceof s?n:new s(function(o){o(n)})}return new(s||(s=Promise))(function(n,o){function l(d){try{h(a.next(d))}catch(u){o(u)}}function c(d){try{h(a.throw(d))}catch(u){o(u)}}function h(d){d.done?n(d.value):r(d.value).then(l,c)}h((a=a.apply(i,t||[])).next())})};class so{constructor(t,{headers:s={},customFetch:a,region:r=qs.Any}={}){this.url=t,this.headers=s,this.region=r,this.fetch=Zi(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var a;return to(this,void 0,void 0,function*(){try{const{headers:r,method:n,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const h=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,h.searchParams.set("forceFunctionRegion",c));let d;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(h.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:d}).catch(g=>{throw new eo(g)}),m=u.headers.get("x-relay-error");if(m&&m==="true")throw new _a(u);if(!u.ok)throw new Ca(u);let f=((a=u.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return f==="application/json"?j=yield u.json():f==="application/octet-stream"?j=yield u.blob():f==="text/event-stream"?j=u:f==="multipart/form-data"?j=yield u.formData():j=yield u.text(),{data:j,error:null,response:u}}catch(r){return{data:null,error:r,response:r instanceof Ca||r instanceof _a?r.context:void 0}}})}}var ae={},dt={},ht={},ut={},mt={},gt={},ao=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},jt=ao();const ro=jt.fetch,Rr=jt.fetch.bind(jt),Lr=jt.Headers,no=jt.Request,io=jt.Response,kt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lr,Request:no,Response:io,default:Rr,fetch:ro},Symbol.toStringTag,{value:"Module"})),oo=ei(kt);var Qt={},Ta;function Mr(){if(Ta)return Qt;Ta=1,Object.defineProperty(Qt,"__esModule",{value:!0});class i extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Qt.default=i,Qt}var Aa;function Or(){if(Aa)return gt;Aa=1;var i=gt&&gt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gt,"__esModule",{value:!0});const t=i(oo),s=i(Mr());class a{constructor(n){this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=n.headers,this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=n.shouldThrowOnError,this.signal=n.signal,this.isMaybeSingle=n.isMaybeSingle,n.fetch?this.fetch=n.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,o){return this.headers=Object.assign({},this.headers),this.headers[n]=o,this}then(n,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var d,u,m;let f=null,j=null,g=null,x=h.status,N=h.statusText;if(h.ok){if(this.method!=="HEAD"){const k=await h.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?j=k:j=JSON.parse(k))}const b=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),w=(u=h.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");b&&w&&w.length>1&&(g=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(f={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,g=null,x=406,N="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const b=await h.text();try{f=JSON.parse(b),Array.isArray(f)&&h.status===404&&(j=[],f=null,x=200,N="OK")}catch{h.status===404&&b===""?(x=204,N="No Content"):f={message:b}}if(f&&this.isMaybeSingle&&(!((m=f?.details)===null||m===void 0)&&m.includes("0 rows"))&&(f=null,x=200,N="OK"),f&&this.shouldThrowOnError)throw new s.default(f)}return{error:f,data:j,count:g,status:x,statusText:N}});return this.shouldThrowOnError||(c=c.catch(h=>{var d,u,m;return{error:{message:`${(d=h?.name)!==null&&d!==void 0?d:"FetchError"}: ${h?.message}`,details:`${(u=h?.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(m=h?.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(n,o)}returns(){return this}overrideTypes(){return this}}return gt.default=a,gt}var Ea;function Fr(){if(Ea)return mt;Ea=1;var i=mt&&mt.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(mt,"__esModule",{value:!0});const t=i(Or());class s extends t.default{select(r){let n=!1;const o=(r??"*").split("").map(l=>/\s/.test(l)&&!n?"":(l==='"'&&(n=!n),l)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:n=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const h=c?`${c}.order`:"order",d=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${d?`${d},`:""}${r}.${n?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:n,referencedTable:o=n}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${r}`),this}range(r,n,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${r}`),this.url.searchParams.set(h,`${n-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:n=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:h="text"}={}){var d;const u=[r?"analyze":null,n?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${m}"; options=${u};`,h==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return mt.default=s,mt}var Ia;function ma(){if(Ia)return ut;Ia=1;var i=ut&&ut.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ut,"__esModule",{value:!0});const t=i(Fr());class s extends t.default{eq(r,n){return this.url.searchParams.append(r,`eq.${n}`),this}neq(r,n){return this.url.searchParams.append(r,`neq.${n}`),this}gt(r,n){return this.url.searchParams.append(r,`gt.${n}`),this}gte(r,n){return this.url.searchParams.append(r,`gte.${n}`),this}lt(r,n){return this.url.searchParams.append(r,`lt.${n}`),this}lte(r,n){return this.url.searchParams.append(r,`lte.${n}`),this}like(r,n){return this.url.searchParams.append(r,`like.${n}`),this}likeAllOf(r,n){return this.url.searchParams.append(r,`like(all).{${n.join(",")}}`),this}likeAnyOf(r,n){return this.url.searchParams.append(r,`like(any).{${n.join(",")}}`),this}ilike(r,n){return this.url.searchParams.append(r,`ilike.${n}`),this}ilikeAllOf(r,n){return this.url.searchParams.append(r,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(r,n){return this.url.searchParams.append(r,`ilike(any).{${n.join(",")}}`),this}is(r,n){return this.url.searchParams.append(r,`is.${n}`),this}in(r,n){const o=Array.from(new Set(n)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(r,`in.(${o})`),this}contains(r,n){return typeof n=="string"?this.url.searchParams.append(r,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(r,`cs.{${n.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(n)}`),this}containedBy(r,n){return typeof n=="string"?this.url.searchParams.append(r,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(r,`cd.{${n.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(n)}`),this}rangeGt(r,n){return this.url.searchParams.append(r,`sr.${n}`),this}rangeGte(r,n){return this.url.searchParams.append(r,`nxl.${n}`),this}rangeLt(r,n){return this.url.searchParams.append(r,`sl.${n}`),this}rangeLte(r,n){return this.url.searchParams.append(r,`nxr.${n}`),this}rangeAdjacent(r,n){return this.url.searchParams.append(r,`adj.${n}`),this}overlaps(r,n){return typeof n=="string"?this.url.searchParams.append(r,`ov.${n}`):this.url.searchParams.append(r,`ov.{${n.join(",")}}`),this}textSearch(r,n,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const h=o===void 0?"":`(${o})`;return this.url.searchParams.append(r,`${c}fts${h}.${n}`),this}match(r){return Object.entries(r).forEach(([n,o])=>{this.url.searchParams.append(n,`eq.${o}`)}),this}not(r,n,o){return this.url.searchParams.append(r,`not.${n}.${o}`),this}or(r,{foreignTable:n,referencedTable:o=n}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${r})`),this}filter(r,n,o){return this.url.searchParams.append(r,`${n}.${o}`),this}}return ut.default=s,ut}var Pa;function Ur(){if(Pa)return ht;Pa=1;var i=ht&&ht.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ht,"__esModule",{value:!0});const t=i(ma());class s{constructor(r,{headers:n={},schema:o,fetch:l}){this.url=r,this.headers=n,this.schema=o,this.fetch=l}select(r,{head:n=!1,count:o}={}){const l=n?"HEAD":"GET";let c=!1;const h=(r??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",h),o&&(this.headers.Prefer=`count=${o}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:n,defaultToNull:o=!0}={}){const l="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),n&&c.push(`count=${n}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(r)){const h=r.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(h.length>0){const d=[...new Set(h)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:n,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){const h="POST",d=[`resolution=${o?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&d.push(this.headers.Prefer),l&&d.push(`count=${l}`),c||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(r)){const u=r.reduce((m,f)=>m.concat(Object.keys(f)),[]);if(u.length>0){const m=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:n}={}){const o="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),this.headers.Prefer=l.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const n="DELETE",o=[];return r&&o.push(`count=${r}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new t.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ht.default=s,ht}var At={},Et={},$a;function lo(){return $a||($a=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.version=void 0,Et.version="0.0.0-automated"),Et}var Da;function co(){if(Da)return At;Da=1,Object.defineProperty(At,"__esModule",{value:!0}),At.DEFAULT_HEADERS=void 0;const i=lo();return At.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${i.version}`},At}var Ra;function ho(){if(Ra)return dt;Ra=1;var i=dt&&dt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(dt,"__esModule",{value:!0});const t=i(Ur()),s=i(ma()),a=co();class r{constructor(o,{headers:l={},schema:c,fetch:h}={}){this.url=o,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),l),this.schemaName=c,this.fetch=h}from(o){const l=new URL(`${this.url}/${o}`);return new t.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:c=!1,get:h=!1,count:d}={}){let u;const m=new URL(`${this.url}/rpc/${o}`);let f;c||h?(u=c?"HEAD":"GET",Object.entries(l).filter(([g,x])=>x!==void 0).map(([g,x])=>[g,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([g,x])=>{m.searchParams.append(g,x)})):(u="POST",f=l);const j=Object.assign({},this.headers);return d&&(j.Prefer=`count=${d}`),new s.default({method:u,url:m,headers:j,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return dt.default=r,dt}var La;function uo(){if(La)return ae;La=1;var i=ae&&ae.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ae,"__esModule",{value:!0}),ae.PostgrestError=ae.PostgrestBuilder=ae.PostgrestTransformBuilder=ae.PostgrestFilterBuilder=ae.PostgrestQueryBuilder=ae.PostgrestClient=void 0;const t=i(ho());ae.PostgrestClient=t.default;const s=i(Ur());ae.PostgrestQueryBuilder=s.default;const a=i(ma());ae.PostgrestFilterBuilder=a.default;const r=i(Fr());ae.PostgrestTransformBuilder=r.default;const n=i(Or());ae.PostgrestBuilder=n.default;const o=i(Mr());return ae.PostgrestError=o.default,ae.default={PostgrestClient:t.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:n.default,PostgrestError:o.default},ae}var mo=uo();const go=ha(mo),{PostgrestClient:po,PostgrestQueryBuilder:lu,PostgrestFilterBuilder:cu,PostgrestTransformBuilder:du,PostgrestBuilder:hu,PostgrestError:uu}=go;function fo(){if(typeof WebSocket<"u")return WebSocket;if(typeof globalThis.WebSocket<"u")return globalThis.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const xo=fo(),wo="2.11.15",bo=`realtime-js/${wo}`,yo="1.0.0",Br=1e4,vo=1e3;var Mt;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Mt||(Mt={}));var ie;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ie||(ie={}));var je;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(je||(je={}));var Ks;(function(i){i.websocket="websocket"})(Ks||(Ks={}));var et;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(et||(et={}));class jo{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,s,a)}_decodeBroadcast(t,s,a){const r=s.getUint8(1),n=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=a.decode(t.slice(o,o+r));o=o+r;const c=a.decode(t.slice(o,o+n));o=o+n;const h=JSON.parse(a.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:h}}}class Hr{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var X;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(X||(X={}));const Ma=(i,t,s={})=>{var a;const r=(a=s.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((n,o)=>(n[o]=No(o,i,t,r),n),{})},No=(i,t,s,a)=>{const r=t.find(l=>l.name===i),n=r?.type,o=s[i];return n&&!a.includes(n)?zr(n,o):Js(o)},zr=(i,t)=>{if(i.charAt(0)==="_"){const s=i.slice(1,i.length);return Co(t,s)}switch(i){case X.bool:return ko(t);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return So(t);case X.json:case X.jsonb:return _o(t);case X.timestamp:return To(t);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return Js(t);default:return Js(t)}},Js=i=>i,ko=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},So=i=>{if(typeof i=="string"){const t=parseFloat(i);if(!Number.isNaN(t))return t}return i},_o=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(t){return console.log(`JSON parse error: ${t}`),i}return i},Co=(i,t)=>{if(typeof i!="string")return i;const s=i.length-1,a=i[s];if(i[0]==="{"&&a==="}"){let n;const o=i.slice(1,s);try{n=JSON.parse("["+o+"]")}catch{n=o?o.split(","):[]}return n.map(l=>zr(t,l))}return i},To=i=>typeof i=="string"?i.replace(" ","T"):i,Vr=i=>{let t=i;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class As{constructor(t,s,a={},r=Br){this.channel=t,this.event=s,this.payload=a,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var a;return this._hasReceived(t)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Oa;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Oa||(Oa={}));class Ot{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},r=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ot.syncState(this.state,r,n,o),this.pendingDiffs.forEach(c=>{this.state=Ot.syncDiff(this.state,c,n,o)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},r=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Ot.syncDiff(this.state,r,n,o),l())}),this.onJoin((r,n,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:n,newPresences:o})}),this.onLeave((r,n,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:n,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,a,r){const n=this.cloneDeep(t),o=this.transformState(s),l={},c={};return this.map(n,(h,d)=>{o[h]||(c[h]=d)}),this.map(o,(h,d)=>{const u=n[h];if(u){const m=d.map(x=>x.presence_ref),f=u.map(x=>x.presence_ref),j=d.filter(x=>f.indexOf(x.presence_ref)<0),g=u.filter(x=>m.indexOf(x.presence_ref)<0);j.length>0&&(l[h]=j),g.length>0&&(c[h]=g)}else l[h]=d}),this.syncDiff(n,{joins:l,leaves:c},a,r)}static syncDiff(t,s,a,r){const{joins:n,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),r||(r=()=>{}),this.map(n,(l,c)=>{var h;const d=(h=t[l])!==null&&h!==void 0?h:[];if(t[l]=this.cloneDeep(c),d.length>0){const u=t[l].map(f=>f.presence_ref),m=d.filter(f=>u.indexOf(f.presence_ref)<0);t[l].unshift(...m)}a(l,d,c)}),this.map(o,(l,c)=>{let h=t[l];if(!h)return;const d=c.map(u=>u.presence_ref);h=h.filter(u=>d.indexOf(u.presence_ref)<0),t[l]=h,r(l,h,c),h.length===0&&delete t[l]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(a=>s(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,a)=>{const r=t[a];return"metas"in r?s[a]=r.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):s[a]=r,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fa;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Fa||(Fa={}));var Ua;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Ua||(Ua={}));var Pe;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Pe||(Pe={}));class ga{constructor(t,s={config:{}},a){this.topic=t,this.params=s,this.socket=a,this.bindings={},this.state=ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new As(this,je.join,this.params,this.timeout),this.rejoinTimer=new Hr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ie.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(je.reply,{},(r,n)=>{this._trigger(this._replyEventName(n),r)}),this.presence=new Ot(this),this.broadcastEndpointURL=Vr(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var a,r;if(this.socket.isConnected()||this.socket.connect(),this.state==ie.closed){const{config:{broadcast:n,presence:o,private:l}}=this.params;this._onError(d=>t?.(Pe.CHANNEL_ERROR,d)),this._onClose(()=>t?.(Pe.CLOSED));const c={},h={broadcast:n,presence:o,postgres_changes:(r=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(d=>d.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:d})=>{var u;if(this.socket.setAuth(),d===void 0){t?.(Pe.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(u=m?.length)!==null&&u!==void 0?u:0,j=[];for(let g=0;g<f;g++){const x=m[g],{filter:{event:N,schema:p,table:b,filter:w}}=x,k=d&&d[g];if(k&&k.event===N&&k.schema===p&&k.table===b&&k.filter===w)j.push(Object.assign(Object.assign({},x),{id:k.id}));else{this.unsubscribe(),this.state=ie.errored,t?.(Pe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(Pe.SUBSCRIBED);return}}).receive("error",d=>{this.state=ie.errored,t?.(Pe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t?.(Pe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,a){return this._on(t,s,a)}async send(t,s={}){var a,r;if(!this._canPush()&&t.type==="broadcast"){const{event:n,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((r=h.body)===null||r===void 0?void 0:r.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var o,l,c;const h=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&n("ok"),h.receive("ok",()=>n("ok")),h.receive("error",()=>n("error")),h.receive("timeout",()=>n("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ie.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(je.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(r=>{a=new As(this,je.leave,{},t),a.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,s,a){const r=new AbortController,n=setTimeout(()=>r.abort(),a),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(n),o}_push(t,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new As(this,t,s,a);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(t,s,a){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,a){var r,n;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:h,join:d}=je;if(a&&[l,c,h,d].indexOf(o)>=0&&a!==this._joinRef())return;let m=this._onMessage(o,s,a);if(s&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var j,g,x;return((j=f.filter)===null||j===void 0?void 0:j.event)==="*"||((x=(g=f.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(f=>f.callback(m,a)):(n=this.bindings[o])===null||n===void 0||n.filter(f=>{var j,g,x,N,p,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const w=f.id,k=(j=f.filter)===null||j===void 0?void 0:j.event;return w&&((g=s.ids)===null||g===void 0?void 0:g.includes(w))&&(k==="*"||k?.toLocaleLowerCase()===((x=s.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const w=(p=(N=f?.filter)===null||N===void 0?void 0:N.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return w==="*"||w===((b=s?.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const j=m.data,{schema:g,table:x,commit_timestamp:N,type:p,errors:b}=j;m=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:N,eventType:p,new:{},old:{},errors:b}),this._getPayloadRecords(j))}f.callback(m,a)})}_isClosed(){return this.state===ie.closed}_isJoined(){return this.state===ie.joined}_isJoining(){return this.state===ie.joining}_isLeaving(){return this.state===ie.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,a){const r=t.toLocaleLowerCase(),n={type:r,filter:s,callback:a};return this.bindings[r]?this.bindings[r].push(n):this.bindings[r]=[n],this}_off(t,s){const a=t.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(r=>{var n;return!(((n=r.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===a&&ga.isEqual(r.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const a in t)if(t[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(je.close,{},t)}_onError(t){this._on(je.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ie.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Ma(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Ma(t.columns,t.old_record)),s}}const Ba=()=>{},Ao=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Eo{constructor(t,s){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Br,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ba,this.ref=0,this.logger=Ba,this.conn=null,this.sendBuffer=[],this.serializer=new jo,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...l)=>de(async()=>{const{default:c}=await Promise.resolve().then(()=>kt);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Ks.websocket}`,this.httpEndpoint=Vr(t),s?.transport?this.transport=s.transport:this.transport=null,s?.params&&(this.params=s.params),s?.timeout&&(this.timeout=s.timeout),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(a=s?.params)===null||a===void 0?void 0:a.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s?.reconnectAfterMs?s.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=s?.encode?s.encode:(n,o)=>o(JSON.stringify(n)),this.decode=s?.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Hr(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s?.fetch),s?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=s?.worker||!1,this.workerUrl=s?.workerUrl}this.accessToken=s?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=xo),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yo}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,a){this.logger(t,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Mt.connecting:return et.Connecting;case Mt.open:return et.Open;case Mt.closing:return et.Closing;default:return et.Closed}}isConnected(){return this.connectionState()===et.Open}channel(t,s={config:{}}){const a=`realtime:${t}`,r=this.getChannels().find(n=>n.topic===a);if(r)return r;{const n=new ga(`realtime:${t}`,s,this);return this.channels.push(n),n}}push(t){const{topic:s,event:a,payload:r,ref:n}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${a} (${n})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{const r={access_token:s,version:bo};s&&a.updateJoinPayload(r),a.joinedOnce&&a._isJoined()&&a._push(je.access_token,{access_token:s})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(vo,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:a,event:r,payload:n,ref:o}=s;a==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${a} ${r} ${o&&"("+o+")"||""}`,n),Array.from(this.channels).filter(l=>l._isMember(a)).forEach(l=>l._trigger(r,n,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(je.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const a=t.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${t}${a}${r}`}_workerObjectUrl(t){let s;if(t)s=t;else{const a=new Blob([Ao],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}}class pa extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function re(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Io extends pa{constructor(t,s,a){super(t),this.name="StorageApiError",this.status=s,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ys extends pa{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var Po=function(i,t,s,a){function r(n){return n instanceof s?n:new s(function(o){o(n)})}return new(s||(s=Promise))(function(n,o){function l(d){try{h(a.next(d))}catch(u){o(u)}}function c(d){try{h(a.throw(d))}catch(u){o(u)}}function h(d){d.done?n(d.value):r(d.value).then(l,c)}h((a=a.apply(i,t||[])).next())})};const Gr=i=>{let t;return i?t=i:typeof fetch>"u"?t=(...s)=>de(async()=>{const{default:a}=await Promise.resolve().then(()=>kt);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)},$o=()=>Po(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield de(()=>Promise.resolve().then(()=>kt),void 0)).Response:Response}),Xs=i=>{if(Array.isArray(i))return i.map(s=>Xs(s));if(typeof i=="function"||i!==Object(i))return i;const t={};return Object.entries(i).forEach(([s,a])=>{const r=s.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));t[r]=Xs(a)}),t},Do=i=>{if(typeof i!="object"||i===null)return!1;const t=Object.getPrototypeOf(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var ot=function(i,t,s,a){function r(n){return n instanceof s?n:new s(function(o){o(n)})}return new(s||(s=Promise))(function(n,o){function l(d){try{h(a.next(d))}catch(u){o(u)}}function c(d){try{h(a.throw(d))}catch(u){o(u)}}function h(d){d.done?n(d.value):r(d.value).then(l,c)}h((a=a.apply(i,t||[])).next())})};const Es=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Ro=(i,t,s)=>ot(void 0,void 0,void 0,function*(){const a=yield $o();i instanceof a&&!s?.noResolveJson?i.json().then(r=>{const n=i.status||500,o=r?.statusCode||n+"";t(new Io(Es(r),n,o))}).catch(r=>{t(new Ys(Es(r),r))}):t(new Ys(Es(i),i))}),Lo=(i,t,s,a)=>{const r={method:i,headers:t?.headers||{}};return i==="GET"||!a?r:(Do(a)?(r.headers=Object.assign({"Content-Type":"application/json"},t?.headers),r.body=JSON.stringify(a)):r.body=a,Object.assign(Object.assign({},r),s))};function Wt(i,t,s,a,r,n){return ot(this,void 0,void 0,function*(){return new Promise((o,l)=>{i(s,Lo(t,a,r,n)).then(c=>{if(!c.ok)throw c;return a?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Ro(c,l,a))})})}function us(i,t,s,a){return ot(this,void 0,void 0,function*(){return Wt(i,"GET",t,s,a)})}function $e(i,t,s,a,r){return ot(this,void 0,void 0,function*(){return Wt(i,"POST",t,a,r,s)})}function Qs(i,t,s,a,r){return ot(this,void 0,void 0,function*(){return Wt(i,"PUT",t,a,r,s)})}function Mo(i,t,s,a){return ot(this,void 0,void 0,function*(){return Wt(i,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function Wr(i,t,s,a,r){return ot(this,void 0,void 0,function*(){return Wt(i,"DELETE",t,a,r,s)})}var he=function(i,t,s,a){function r(n){return n instanceof s?n:new s(function(o){o(n)})}return new(s||(s=Promise))(function(n,o){function l(d){try{h(a.next(d))}catch(u){o(u)}}function c(d){try{h(a.throw(d))}catch(u){o(u)}}function h(d){d.done?n(d.value):r(d.value).then(l,c)}h((a=a.apply(i,t||[])).next())})};const Oo={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ha={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Fo{constructor(t,s={},a,r){this.url=t,this.headers=s,this.bucketId=a,this.fetch=Gr(r)}uploadOrUpdate(t,s,a,r){return he(this,void 0,void 0,function*(){try{let n;const o=Object.assign(Object.assign({},Ha),r);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&a instanceof Blob?(n=new FormData,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c)),n.append("",a)):typeof FormData<"u"&&a instanceof FormData?(n=a,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c))):(n=a,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r?.headers&&(l=Object.assign(Object.assign({},l),r.headers));const h=this._removeEmptyFolders(s),d=this._getFinalPath(h),u=yield(t=="PUT"?Qs:$e)(this.fetch,`${this.url}/object/${d}`,n,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:h,id:u.Id,fullPath:u.Key},error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}})}upload(t,s,a){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,a)})}uploadToSignedUrl(t,s,a,r){return he(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(t),o=this._getFinalPath(n),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const h=Object.assign({upsert:Ha.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",h.cacheControl)):(c=a,d["cache-control"]=`max-age=${h.cacheControl}`,d["content-type"]=h.contentType);const u=yield Qs(this.fetch,l.toString(),c,{headers:d});return{data:{path:n,fullPath:u.Key},error:null}}catch(c){if(re(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return he(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const r=Object.assign({},this.headers);s?.upsert&&(r["x-upsert"]="true");const n=yield $e(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:r}),o=new URL(this.url+n.url),l=o.searchParams.get("token");if(!l)throw new pa("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(a){if(re(a))return{data:null,error:a};throw a}})}update(t,s,a){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,a)})}move(t,s,a){return he(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})}copy(t,s,a){return he(this,void 0,void 0,function*(){try{return{data:{path:(yield $e(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})}createSignedUrl(t,s,a){return he(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),n=yield $e(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const o=a?.download?`&download=${a.download===!0?"":a.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${o}`)},{data:n,error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})}createSignedUrls(t,s,a){return he(this,void 0,void 0,function*(){try{const r=yield $e(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),n=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${n}`):null})),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})}download(t,s){return he(this,void 0,void 0,function*(){const r=typeof s?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(s?.transform||{}),o=n?`?${n}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield us(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(re(l))return{data:null,error:l};throw l}})}info(t){return he(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const a=yield us(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Xs(a),error:null}}catch(a){if(re(a))return{data:null,error:a};throw a}})}exists(t){return he(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield Mo(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(re(a)&&a instanceof Ys){const r=a.originalError;if([400,404].includes(r?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,s){const a=this._getFinalPath(t),r=[],n=s?.download?`download=${s.download===!0?"":s.download}`:"";n!==""&&r.push(n);const l=typeof s?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(s?.transform||{});c!==""&&r.push(c);let h=r.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${h}`)}}}remove(t){return he(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}})}list(t,s,a){return he(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Oo),s),{prefix:t||""});return{data:yield $e(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},a),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const Uo="2.10.4",Bo={"X-Client-Info":`storage-js/${Uo}`};var pt=function(i,t,s,a){function r(n){return n instanceof s?n:new s(function(o){o(n)})}return new(s||(s=Promise))(function(n,o){function l(d){try{h(a.next(d))}catch(u){o(u)}}function c(d){try{h(a.throw(d))}catch(u){o(u)}}function h(d){d.done?n(d.value):r(d.value).then(l,c)}h((a=a.apply(i,[])).next())})};class Ho{constructor(t,s={},a,r){const n=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href,this.headers=Object.assign(Object.assign({},Bo),s),this.fetch=Gr(a)}listBuckets(){return pt(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(re(t))return{data:null,error:t};throw t}})}getBucket(t){return pt(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return pt(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(re(a))return{data:null,error:a};throw a}})}updateBucket(t,s){return pt(this,void 0,void 0,function*(){try{return{data:yield Qs(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(re(a))return{data:null,error:a};throw a}})}emptyBucket(t){return pt(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}})}deleteBucket(t){return pt(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}})}}class zo extends Ho{constructor(t,s={},a,r){super(t,s,a,r)}from(t){return new Fo(this.url,this.headers,t,this.fetch)}}const Vo="2.53.0";let $t="";typeof Deno<"u"?$t="deno":typeof document<"u"?$t="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$t="react-native":$t="node";const Go={"X-Client-Info":`supabase-js-${$t}/${Vo}`},Wo={headers:Go},qo={schema:"public"},Ko={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jo={};var Yo=function(i,t,s,a){function r(n){return n instanceof s?n:new s(function(o){o(n)})}return new(s||(s=Promise))(function(n,o){function l(d){try{h(a.next(d))}catch(u){o(u)}}function c(d){try{h(a.throw(d))}catch(u){o(u)}}function h(d){d.done?n(d.value):r(d.value).then(l,c)}h((a=a.apply(i,t||[])).next())})};const Xo=i=>{let t;return i?t=i:typeof fetch>"u"?t=Rr:t=fetch,(...s)=>t(...s)},Qo=()=>typeof Headers>"u"?Lr:Headers,Zo=(i,t,s)=>{const a=Xo(s),r=Qo();return(n,o)=>Yo(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:i;let h=new r(o?.headers);return h.has("apikey")||h.set("apikey",i),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),a(n,Object.assign(Object.assign({},o),{headers:h}))})};var el=function(i,t,s,a){function r(n){return n instanceof s?n:new s(function(o){o(n)})}return new(s||(s=Promise))(function(n,o){function l(d){try{h(a.next(d))}catch(u){o(u)}}function c(d){try{h(a.throw(d))}catch(u){o(u)}}function h(d){d.done?n(d.value):r(d.value).then(l,c)}h((a=a.apply(i,[])).next())})};function tl(i){return i.endsWith("/")?i:i+"/"}function sl(i,t){var s,a;const{db:r,auth:n,realtime:o,global:l}=i,{db:c,auth:h,realtime:d,global:u}=t,m={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},h),n),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},u),l),{headers:Object.assign(Object.assign({},(s=u?.headers)!==null&&s!==void 0?s:{}),(a=l?.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>el(this,void 0,void 0,function*(){return""})};return i.accessToken?m.accessToken=i.accessToken:delete m.accessToken,m}const qr="2.71.1",yt=30*1e3,Zs=3,Is=Zs*yt,al="http://localhost:9999",rl="supabase.auth.token",nl={"X-Client-Info":`gotrue-js/${qr}`},ea="X-Supabase-Api-Version",Kr={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},il=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ol=10*60*1e3;class fa extends Error{constructor(t,s,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function U(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class ll extends fa{constructor(t,s,a){super(t,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function cl(i){return U(i)&&i.name==="AuthApiError"}class Jr extends fa{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class qe extends fa{constructor(t,s,a,r){super(t,a,r),this.name=s,this.status=a}}class Fe extends qe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dl(i){return U(i)&&i.name==="AuthSessionMissingError"}class Zt extends qe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class es extends qe{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ts extends qe{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hl(i){return U(i)&&i.name==="AuthImplicitGrantRedirectError"}class za extends qe{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ta extends qe{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Ps(i){return U(i)&&i.name==="AuthRetryableFetchError"}class Va extends qe{constructor(t,s,a){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class sa extends qe{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ms="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ga=` 	
\r=`.split(""),ul=(()=>{const i=new Array(128);for(let t=0;t<i.length;t+=1)i[t]=-1;for(let t=0;t<Ga.length;t+=1)i[Ga[t].charCodeAt(0)]=-2;for(let t=0;t<ms.length;t+=1)i[ms[t].charCodeAt(0)]=t;return i})();function Wa(i,t,s){if(i!==null)for(t.queue=t.queue<<8|i,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(ms[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(ms[a]),t.queuedBits-=6}}function Yr(i,t,s){const a=ul[i];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function qa(i){const t=[],s=o=>{t.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},n=o=>{pl(o,a,s)};for(let o=0;o<i.length;o+=1)Yr(i.charCodeAt(o),r,n);return t.join("")}function ml(i,t){if(i<=127){t(i);return}else if(i<=2047){t(192|i>>6),t(128|i&63);return}else if(i<=65535){t(224|i>>12),t(128|i>>6&63),t(128|i&63);return}else if(i<=1114111){t(240|i>>18),t(128|i>>12&63),t(128|i>>6&63),t(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function gl(i,t){for(let s=0;s<i.length;s+=1){let a=i.charCodeAt(s);if(a>55295&&a<=56319){const r=(a-55296)*1024&65535;a=(i.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}ml(a,t)}}function pl(i,t,s){if(t.utf8seq===0){if(i<=127){s(i);return}for(let a=1;a<6;a+=1)if((i>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=i&31;else if(t.utf8seq===3)t.codepoint=i&15;else if(t.utf8seq===4)t.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|i&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function fl(i){const t=[],s={queue:0,queuedBits:0},a=r=>{t.push(r)};for(let r=0;r<i.length;r+=1)Yr(i.charCodeAt(r),s,a);return new Uint8Array(t)}function xl(i){const t=[];return gl(i,s=>t.push(s)),new Uint8Array(t)}function wl(i){const t=[],s={queue:0,queuedBits:0},a=r=>{t.push(r)};return i.forEach(r=>Wa(r,s,a)),Wa(null,s,a),t.join("")}function bl(i){return Math.round(Date.now()/1e3)+i}function yl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const t=Math.random()*16|0;return(i=="x"?t:t&3|8).toString(16)})}const ye=()=>typeof window<"u"&&typeof document<"u",Je={tested:!1,writable:!1},Xr=()=>{if(!ye())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Je.tested)return Je.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Je.tested=!0,Je.writable=!0}catch{Je.tested=!0,Je.writable=!1}return Je.writable};function vl(i){const t={},s=new URL(i);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,n)=>{t[n]=r})}catch{}return s.searchParams.forEach((a,r)=>{t[r]=a}),t}const Qr=i=>{let t;return i?t=i:typeof fetch>"u"?t=(...s)=>de(async()=>{const{default:a}=await Promise.resolve().then(()=>kt);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)},jl=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",vt=async(i,t,s)=>{await i.setItem(t,JSON.stringify(s))},Ye=async(i,t)=>{const s=await i.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Me=async(i,t)=>{await i.removeItem(t)};class xs{constructor(){this.promise=new xs.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}xs.promiseConstructor=Promise;function $s(i){const t=i.split(".");if(t.length!==3)throw new sa("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!il.test(t[a]))throw new sa("JWT not in base64url format");return{header:JSON.parse(qa(t[0])),payload:JSON.parse(qa(t[1])),signature:fl(t[2]),raw:{header:t[0],payload:t[1]}}}async function Nl(i){return await new Promise(t=>{setTimeout(()=>t(null),i)})}function kl(i,t){return new Promise((a,r)=>{(async()=>{for(let n=0;n<1/0;n++)try{const o=await i(n);if(!t(n,null,o)){a(o);return}}catch(o){if(!t(n,o)){r(o);return}}})()})}function Sl(i){return("0"+i.toString(16)).substr(-2)}function _l(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let r="";for(let n=0;n<56;n++)r+=s.charAt(Math.floor(Math.random()*a));return r}return crypto.getRandomValues(t),Array.from(t,Sl).join("")}async function Cl(i){const s=new TextEncoder().encode(i),a=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(a);return Array.from(r).map(n=>String.fromCharCode(n)).join("")}async function Tl(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const s=await Cl(i);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ft(i,t,s=!1){const a=_l();let r=a;s&&(r+="/PASSWORD_RECOVERY"),await vt(i,`${t}-code-verifier`,r);const n=await Tl(a);return[n,a===n?"plain":"s256"]}const Al=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function El(i){const t=i.headers.get(ea);if(!t||!t.match(Al))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Il(i){if(!i)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(i<=t)throw new Error("JWT has expired")}function Pl(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $l=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xt(i){if(!$l.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ds(){const i={};return new Proxy(i,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ka(i){return JSON.parse(JSON.stringify(i))}var Dl=function(i,t){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&t.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(i);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(i,a[r])&&(s[a[r]]=i[a[r]]);return s};const Ze=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Rl=[502,503,504];async function Ja(i){var t;if(!jl(i))throw new ta(Ze(i),0);if(Rl.includes(i.status))throw new ta(Ze(i),i.status);let s;try{s=await i.json()}catch(n){throw new Jr(Ze(n),n)}let a;const r=El(i);if(r&&r.getTime()>=Kr["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new Va(Ze(s),i.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Fe}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0))throw new Va(Ze(s),i.status,s.weak_password.reasons);throw new ll(Ze(s),i.status||500,a)}const Ll=(i,t,s,a)=>{const r={method:i,headers:t?.headers||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),r.body=JSON.stringify(a),Object.assign(Object.assign({},r),s))};async function z(i,t,s,a){var r;const n=Object.assign({},a?.headers);n[ea]||(n[ea]=Kr["2024-01-01"].name),a?.jwt&&(n.Authorization=`Bearer ${a.jwt}`);const o=(r=a?.query)!==null&&r!==void 0?r:{};a?.redirectTo&&(o.redirect_to=a.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Ml(i,t,s+l,{headers:n,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(c):{data:Object.assign({},c),error:null}}async function Ml(i,t,s,a,r,n){const o=Ll(t,a,r,n);let l;try{l=await i(s,Object.assign({},o))}catch(c){throw console.error(c),new ta(Ze(c),0)}if(l.ok||await Ja(l),a?.noResolveJson)return l;try{return await l.json()}catch(c){await Ja(c)}}function Ie(i){var t;let s=null;Bl(i)&&(s=Object.assign({},i),i.expires_at||(s.expires_at=bl(i.expires_in)));const a=(t=i.user)!==null&&t!==void 0?t:i;return{data:{session:s,user:a},error:null}}function Ya(i){const t=Ie(i);return!t.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(t.data.weak_password=i.weak_password),t}function Be(i){var t;return{data:{user:(t=i.user)!==null&&t!==void 0?t:i},error:null}}function Ol(i){return{data:i,error:null}}function Fl(i){const{action_link:t,email_otp:s,hashed_token:a,redirect_to:r,verification_type:n}=i,o=Dl(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:s,hashed_token:a,redirect_to:r,verification_type:n},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Ul(i){return i}function Bl(i){return i.access_token&&i.refresh_token&&i.expires_in}const Rs=["global","local","others"];var Hl=function(i,t){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&t.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(i);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(i,a[r])&&(s[a[r]]=i[a[r]]);return s};class zl{constructor({url:t="",headers:s={},fetch:a}){this.url=t,this.headers=s,this.fetch=Qr(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s=Rs[0]){if(Rs.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rs.join(", ")}`);try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(U(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,s={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Be})}catch(a){if(U(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:s}=t,a=Hl(t,["options"]),r=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(r.new_email=a?.newEmail,delete r.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Fl,redirectTo:s?.redirectTo})}catch(s){if(U(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Be})}catch(s){if(U(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,a,r,n,o,l,c;try{const h={nextPage:null,lastPage:0,total:0},d=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(n=(r=t?.perPage)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""},xform:Ul});if(d.error)throw d.error;const u=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(j=>{const g=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(j.split(";")[1].split("=")[1]);h[`${x}Page`]=g}),h.total=parseInt(m)),{data:Object.assign(Object.assign({},u),h),error:null}}catch(h){if(U(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){xt(t);try{return await z(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Be})}catch(s){if(U(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){xt(t);try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Be})}catch(a){if(U(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,s=!1){xt(t);try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Be})}catch(a){if(U(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){xt(t.userId);try{const{data:s,error:a}=await z(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:a}}catch(s){if(U(s))return{data:null,error:s};throw s}}async _deleteFactor(t){xt(t.userId),xt(t.id);try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}}}function Xa(i={}){return{getItem:t=>i[t]||null,setItem:(t,s)=>{i[t]=s},removeItem:t=>{delete i[t]}}}function Vl(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const wt={debug:!!(globalThis&&Xr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zr extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Gl extends Zr{}async function Wl(i,t,s){wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),wt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async r=>{if(r){wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,r.name);try{return await s()}finally{wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,r.name)}}else{if(t===0)throw wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Gl(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(wt.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Vl();const ql={url:al,storageKey:rl,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Qa(i,t,s){return await s()}const bt={};class zt{constructor(t){var s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zt.nextInstanceID,zt.nextInstanceID+=1,this.instanceID>0&&ye()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},ql),t);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new zl({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Qr(r.fetch),this.lock=r.lock||Qa,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:ye()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=Wl:this.lock=Qa,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Xr()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Xa(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Xa(this.memoryStorage)),ye()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}get jwks(){var t,s;return(s=(t=bt[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){bt[this.storageKey]=Object.assign(Object.assign({},bt[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=bt[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){bt[this.storageKey]=Object.assign(Object.assign({},bt[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qr}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=vl(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),ye()&&this.detectSessionInUrl&&a!=="none"){const{data:r,error:n}=await this._getSessionFromURL(s,a);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),hl(n)){const c=(t=n.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return U(s)?{error:s}:{error:new Jr("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,a,r;try{const n=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(r=t?.options)===null||r===void 0?void 0:r.captchaToken}},xform:Ie}),{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(t){var s,a,r;try{let n;if("email"in t){const{email:d,password:u,options:m}=t;let f=null,j=null;this.flowType==="pkce"&&([f,j]=await ft(this.storage,this.storageKey)),n=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:d,password:u,data:(s=m?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:f,code_challenge_method:j},xform:Ie})}else if("phone"in t){const{phone:d,password:u,options:m}=t;n=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:u,data:(a=m?.data)!==null&&a!==void 0?a:{},channel:(r=m?.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Ie})}else throw new es("You must provide either an email or phone number and a password");const{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(t){try{let s;if("email"in t){const{email:n,password:o,options:l}=t;s=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Ya})}else if("phone"in t){const{phone:n,password:o,options:l}=t;s=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Ya})}else throw new es("You must provide either an email or phone number and a password");const{data:a,error:r}=s;return r?{data:{user:null,session:null},error:r}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Zt}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:r})}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,a,r,n;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(n=t.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;if(s==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(t){var s,a,r,n,o,l,c,h,d,u,m,f;let j,g;if("message"in t)j=t.message,g=t.signature;else{const{chain:x,wallet:N,statement:p,options:b}=t;let w;if(ye())if(typeof N=="object")w=N;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))w=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=N}const k=new URL((s=b?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in w&&w.signIn){const _=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b?.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),p?{statement:p}:null));let P;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")P=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)P=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)j=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),g=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${k.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(r=(a=b?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((n=b?.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((h=b?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((u=(d=b?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||u===void 0)&&u.length?["Resources",...b.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const _=await w.signMessage(new TextEncoder().encode(j),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=_}}try{const{data:x,error:N}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:wl(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ie});if(N)throw N;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Zt}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:N})}catch(x){if(U(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const s=await Ye(this.storage,`${this.storageKey}-code-verifier`),[a,r]=(s??"").split("/");try{const{data:n,error:o}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Ie});if(await Me(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new Zt}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:r??null}),error:o})}catch(n){if(U(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(t){try{const{options:s,provider:a,token:r,access_token:n,nonce:o}=t,l=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:r,access_token:n,nonce:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Ie}),{data:c,error:h}=l;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Zt}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,a,r,n,o;try{if("email"in t){const{email:l,options:c}=t;let h=null,d=null;this.flowType==="pkce"&&([h,d]=await ft(this.storage,this.storageKey));const{error:u}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(a=c?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:h,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in t){const{phone:l,options:c}=t,{data:h,error:d}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:d}}throw new es("You must provide either an email or phone number.")}catch(l){if(U(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var s,a;try{let r,n;"options"in t&&(r=(s=t.options)===null||s===void 0?void 0:s.redirectTo,n=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:o,error:l}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:n}}),redirectTo:r,xform:Ie});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,h=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(r){if(U(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(t){var s,a,r;try{let n=null,o=null;return this.flowType==="pkce"&&([n,o]=await ft(this.storage,this.storageKey)),await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((r=t?.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:o}),headers:this.headers,xform:Ol})}catch(n){if(U(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;if(a)throw a;if(!s)throw new Fe;const{error:r}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(t){if(U(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:a,type:r,options:n}=t,{error:o}=await z(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:r,gotrue_meta_security:{captcha_token:n?.captchaToken}},redirectTo:n?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:a,type:r,options:n}=t,{data:o,error:l}=await z(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:r,gotrue_meta_security:{captcha_token:n?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new es("You must provide either an email or phone number and a type")}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Ye(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Is:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const o=await Ye(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=Ds()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,h,d)=>(!o&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,d))})}return{data:{session:t},error:null}}const{session:r,error:n}=await this._callRefreshToken(t.refresh_token);return n?{data:{session:null},error:n}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Be}):await this._useSession(async s=>{var a,r,n;const{data:o,error:l}=s;if(l)throw l;return!(!((a=o.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fe}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0,xform:Be})})}catch(s){if(U(s))return dl(s)&&(await this._removeSession(),await Me(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async a=>{const{data:r,error:n}=a;if(n)throw n;if(!r.session)throw new Fe;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ft(this.storage,this.storageKey));const{data:h,error:d}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Be});if(d)throw d;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(a){if(U(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fe;const s=Date.now()/1e3;let a=s,r=!0,n=null;const{payload:o}=$s(t.access_token);if(o.exp&&(a=o.exp,r=a<=s),r){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};n=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;n={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(s){if(U(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var a;if(!t){const{data:o,error:l}=s;if(l)throw l;t=(a=o.session)!==null&&a!==void 0?a:void 0}if(!t?.refresh_token)throw new Fe;const{session:r,error:n}=await this._callRefreshToken(t.refresh_token);return n?{data:{user:null,session:null},error:n}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!ye())throw new ts("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ts(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new za("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ts("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new za("No code detected.");const{data:p,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:r,access_token:n,refresh_token:o,expires_in:l,expires_at:c,token_type:h}=t;if(!n||!l||!o||!h)throw new ts("No session defined in URL");const d=Math.round(Date.now()/1e3),u=parseInt(l);let m=d+u;c&&(m=parseInt(c));const f=m-d;f*1e3<=yt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);const j=m-u;d-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,m,d):d-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,m,d);const{data:g,error:x}=await this._getUser(n);if(x)throw x;const N={provider_token:a,provider_refresh_token:r,access_token:n,expires_in:u,expires_at:m,refresh_token:o,token_type:h,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:t.type},error:null}}catch(a){if(U(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Ye(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:r,error:n}=s;if(n)return{error:n};const o=(a=r.session)===null||a===void 0?void 0:a.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(cl(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Me(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=yl(),a={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async s=>{var a,r;try{const{data:{session:n},error:o}=s;if(o)throw o;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",t,"session",n)}catch(n){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",n),console.error(n)}})}async resetPasswordForEmail(t,s={}){let a=null,r=null;this.flowType==="pkce"&&([a,r]=await ft(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(n){if(U(n))return{data:null,error:n};throw n}}async getUserIdentities(){var t;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:a,error:r}=await this._useSession(async n=>{var o,l,c,h,d;const{data:u,error:m}=n;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(h=u.session)===null||h===void 0?void 0:h.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return ye()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:t.provider,url:a?.url},error:null}}catch(a){if(U(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var a,r;const{data:n,error:o}=s;if(o)throw o;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(a=n.session)===null||a===void 0?void 0:a.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(U(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await kl(async r=>(r>0&&await Nl(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ie})),(r,n)=>{const o=200*Math.pow(2,r);return n&&Ps(n)&&Date.now()+o-a<yt})}catch(a){if(this._debug(s,"error",a),U(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",a),ye()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const r=await Ye(this.storage,this.storageKey);if(r&&this.userStorage){let o=await Ye(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await vt(this.userStorage,this.storageKey+"-user",o)),r.user=(t=o?.user)!==null&&t!==void 0?t:Ds()}else if(r&&!r.user&&!r.user){const o=await Ye(this.storage,this.storageKey+"-user");o&&o?.user?(r.user=o.user,await Me(this.storage,this.storageKey+"-user"),await vt(this.storage,this.storageKey,r)):r.user=Ds()}if(this._debug(a,"session from storage",r),!this._isValidSession(r)){this._debug(a,"session is not valid"),r!==null&&await this._removeSession();return}const n=((s=r.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Is;if(this._debug(a,`session has${n?"":" not"} expired with margin of ${Is}s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Ps(o)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(r.access_token);!l&&o?.user?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(a,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(a,"error",r),console.error(r);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var s,a;if(!t)throw new Fe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new xs;const{data:n,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!n.session)throw new Fe;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const l={session:n.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(n){if(this._debug(r,"error",n),U(n)){const o={session:null,error:n};return Ps(n)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(n),n}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,s,a=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:s});const n=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,s)}catch(c){n.push(c)}});if(await Promise.all(o),n.length>0){for(let l=0;l<n.length;l+=1)console.error(n[l]);throw n[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const s=Object.assign({},t),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await vt(this.userStorage,this.storageKey+"-user",{user:s.user});const r=Object.assign({},s);delete r.user;const n=Ka(r);await vt(this.storage,this.storageKey,n)}else{const r=Ka(s);await vt(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Me(this.storage,this.storageKey),await Me(this.storage,this.storageKey+"-code-verifier"),await Me(this.storage,this.storageKey+"-user"),this.userStorage&&await Me(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ye()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),yt);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((a.expires_at*1e3-t)/yt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${yt}ms, refresh threshold is ${Zs} ticks`),r<=Zs&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Zr)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ye()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,a){const r=[`provider=${encodeURIComponent(s)}`];if(a?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&r.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[n,o]=await ft(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(a?.queryParams){const n=new URLSearchParams(a.queryParams);r.push(n.toString())}return a?.skipBrowserRedirect&&r.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var a;const{data:r,error:n}=s;return n?{data:null,error:n}:await z(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=r?.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(U(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var a,r;const{data:n,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:h}=await z(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=n?.session)===null||a===void 0?void 0:a.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&(!((r=c?.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(U(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:r,error:n}=s;if(n)return{data:null,error:n};const{data:o,error:l}=await z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=r?.session)===null||a===void 0?void 0:a.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(U(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:r,error:n}=s;return n?{data:null,error:n}:await z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=r?.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(U(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a=t?.factors||[],r=a.filter(o=>o.factor_type==="totp"&&o.status==="verified"),n=a.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:a,totp:r,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,a;const{data:{session:r},error:n}=t;if(n)return{data:null,error:n};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=$s(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((a=(s=r.user.factors)===null||s===void 0?void 0:s.filter(u=>u.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,s={keys:[]}){let a=s.keys.find(l=>l.kid===t);if(a)return a;const r=Date.now();if(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+ol>r)return a;const{data:n,error:o}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!n.keys||n.keys.length===0||(this.jwks=n,this.jwks_cached_at=r,a=n.keys.find(l=>l.kid===t),!a)?null:a}async getClaims(t,s={}){try{let a=t;if(!a){const{data:f,error:j}=await this.getSession();if(j||!f.session)return{data:null,error:j};a=f.session.access_token}const{header:r,payload:n,signature:o,raw:{header:l,payload:c}}=$s(a);s?.allowExpired||Il(n.exp);const h=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!h){const{error:f}=await this.getUser(a);if(f)throw f;return{data:{claims:n,header:r,signature:o},error:null}}const d=Pl(r.alg),u=await crypto.subtle.importKey("jwk",h,d,!0,["verify"]);if(!await crypto.subtle.verify(d,u,o,xl(`${l}.${c}`)))throw new sa("Invalid JWT signature");return{data:{claims:n,header:r,signature:o},error:null}}catch(a){if(U(a))return{data:null,error:a};throw a}}}zt.nextInstanceID=0;const Kl=zt;class Jl extends Kl{constructor(t){super(t)}}var Yl=function(i,t,s,a){function r(n){return n instanceof s?n:new s(function(o){o(n)})}return new(s||(s=Promise))(function(n,o){function l(d){try{h(a.next(d))}catch(u){o(u)}}function c(d){try{h(a.throw(d))}catch(u){o(u)}}function h(d){d.done?n(d.value):r(d.value).then(l,c)}h((a=a.apply(i,[])).next())})};class Xl{constructor(t,s,a){var r,n,o;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=tl(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:qo,realtime:Jo,auth:Object.assign(Object.assign({},Ko),{storageKey:h}),global:Wo},u=sl(a??{},d);this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(n=u.global.headers)!==null&&n!==void 0?n:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Zo(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new po(new URL("rest/v1",c).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new zo(this.storageUrl.href,this.headers,this.fetch,a?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new so(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},a={}){return this.rest.rpc(t,s,a)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return Yl(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(s=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:r,storageKey:n,flowType:o,lock:l,debug:c},h,d){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jl({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),h),storageKey:n,autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:r,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Eo(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a?.access_token)})}_handleTokenChanged(t,s,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ql=(i,t,s)=>new Xl(i,t,s);function Zl(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const i=process.version.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}Zl()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const en="https://aompecyfgnakkmldhidg.supabase.co",ec="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFvbXBlY3lmZ25ha2ttbGRoaWRnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3MzMwODYsImV4cCI6MjA2OTMwOTA4Nn0.SSbGerxCplUZd_ZJDCK3HrfHM_m0it2lExgKBv3bt9A";console.log(" Supabase Configuration:",{url:en,hasKey:!0,env:"production"});const Z=Ql(en,ec,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),tc=i=>Z.channel("crypto_prices_channel").on("postgres_changes",{event:"*",schema:"public",table:"crypto_prices"},t=>{console.log(" Real-time crypto price update:",t),i(t.new)}).subscribe(),sc=i=>Z.channel("defi_protocols_channel").on("postgres_changes",{event:"*",schema:"public",table:"defi_protocols"},t=>{console.log(" Real-time DeFi protocol update:",t),i(t.new)}).subscribe(),ac=async(i=50)=>{const{data:t,error:s}=await Z.from("crypto_prices").select("*").order("market_cap_rank",{ascending:!0}).limit(i);if(s)throw console.error(" Error fetching crypto prices:",s),s;return t||[]},Za=async(i=20)=>{const{data:t,error:s}=await Z.from("defi_protocols").select("*").order("tvl",{ascending:!1}).limit(i);if(s)throw console.error(" Error fetching DeFi protocols:",s),s;return t||[]},tn=y.createContext(void 0);function xa(){const i=y.useContext(tn);return i===void 0?(console.warn("useAuth: AuthProvider not found, using fallback"),{user:null,session:null,loading:!1,authError:null,signIn:async()=>({data:null,error:{message:"Auth not available"}}),signUp:async()=>({data:null,error:{message:"Auth not available"}}),signOut:async()=>({error:{message:"Auth not available"}}),signInWithGoogle:async()=>({data:null,error:{message:"Auth not available"}}),signInWithGitHub:async()=>({data:null,error:{message:"Auth not available"}}),resetPassword:async()=>({data:null,error:{message:"Auth not available"}}),updateProfile:async()=>({data:null,error:{message:"Auth not available"}})}):i}function rc({children:i}){const[t,s]=y.useState(null),[a,r]=y.useState(null),[n,o]=y.useState(!0),[l,c]=y.useState(null);y.useEffect(()=>{(async()=>{try{console.log(" Initializing Supabase auth...");const{data:{session:w},error:k}=await Z.auth.getSession();k?(console.error(" Error getting initial session:",k),c(`Auth initialization failed: ${k.message}`)):(r(w),s(w?.user??null),c(null),console.log(" Initial session loaded:",w?.user?.email||"No user"))}catch(w){console.error(" Critical error in getInitialSession:",w),c(`Critical auth error: ${w instanceof Error?w.message:"Unknown error"}`)}finally{o(!1)}})();let b=null;try{const{data:{subscription:w}}=Z.auth.onAuthStateChange(async(k,_)=>{try{switch(console.log(" Auth state change:",k,_?.user?.email||"No user"),r(_),s(_?.user??null),o(!1),c(null),k){case"SIGNED_IN":console.log(" User signed in:",_?.user?.email),await h(_?.user);break;case"SIGNED_OUT":console.log(" User signed out");break;case"TOKEN_REFRESHED":console.log(" Token refreshed for:",_?.user?.email);break;case"USER_UPDATED":console.log(" User profile updated:",_?.user?.email);break}}catch(P){console.error(" Error in auth state change handler:",P),c(`Auth state change error: ${P instanceof Error?P.message:"Unknown error"}`)}});b=w}catch(w){console.error(" Error setting up auth listener:",w),c(`Auth listener setup failed: ${w instanceof Error?w.message:"Unknown error"}`)}return()=>{try{b?.unsubscribe()}catch(w){console.error(" Error unsubscribing from auth:",w)}}},[]);const h=async p=>{if(p)try{const{data:b,error:w}=await Z.from("user_preferences").select("*").eq("user_id",p.id).single();if(w&&w.code==="PGRST116"){const{error:k}=await Z.from("user_preferences").insert({user_id:p.id,email:p.email,display_name:p.user_metadata?.full_name||p.email?.split("@")[0]||"User",avatar_url:p.user_metadata?.avatar_url||null,theme:"dark",currency:"USD",notifications_enabled:!0,created_at:new Date().toISOString()});k?console.error(" Error creating user profile:",k):console.log(" User profile created for:",p.email)}else w?console.error(" Error checking user profile:",w):console.log(" User profile already exists for:",p.email)}catch(b){console.error(" Error in initializeUserProfile:",b)}},N={user:t,session:a,loading:n,signUp:async(p,b,w)=>{try{const{data:k,error:_}=await Z.auth.signUp({email:p,password:b,options:{data:w||{}}});return _?console.error(" Sign up error:",_):console.log(" Sign up successful:",p),{data:k,error:_}}catch(k){return console.error(" Sign up exception:",k),{data:null,error:k}}},signIn:async(p,b)=>{try{const{data:w,error:k}=await Z.auth.signInWithPassword({email:p,password:b});return k?console.error(" Sign in error:",k):console.log(" Sign in successful:",p),{data:w,error:k}}catch(w){return console.error(" Sign in exception:",w),{data:null,error:w}}},signInWithGoogle:async()=>{try{const{data:p,error:b}=await Z.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});return{data:p,error:b}}catch(p){return console.error(" Google sign in exception:",p),{data:null,error:p}}},signInWithGitHub:async()=>{try{const{data:p,error:b}=await Z.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/auth/callback`}});return{data:p,error:b}}catch(p){return console.error(" GitHub sign in exception:",p),{data:null,error:p}}},signOut:async()=>{try{const{error:p}=await Z.auth.signOut();return p?console.error(" Sign out error:",p):console.log(" Sign out successful"),{error:p}}catch(p){return console.error(" Sign out exception:",p),{error:p}}},resetPassword:async p=>{try{const{data:b,error:w}=await Z.auth.resetPasswordForEmail(p,{redirectTo:`${window.location.origin}/auth/reset-password`});return{data:b,error:w}}catch(b){return console.error(" Reset password exception:",b),{data:null,error:b}}},updateProfile:async p=>{try{const{data:b,error:w}=await Z.auth.updateUser({data:p});return!w&&t&&await Z.from("user_preferences").update({display_name:p.display_name,avatar_url:p.avatar_url,updated_at:new Date().toISOString()}).eq("user_id",t.id),{data:b,error:w}}catch(b){return console.error(" Update profile exception:",b),{data:null,error:b}}}};return e.jsx(tn.Provider,{value:N,children:i})}const sn=y.createContext(void 0),an=()=>{const i=y.useContext(sn);return i||(console.warn("useAIAssistant: AIAssistantProvider not found, using fallback"),{currentFeature:"dashboard",contextData:null,isAIEnabled:!0,setCurrentFeature:()=>{},setContextData:()=>{},setAIEnabled:()=>{},updateContext:()=>{}})},nc=({children:i})=>{const[t,s]=y.useState("dashboard"),[a,r]=y.useState(null),[n,o]=y.useState(!0),l=(h,d)=>{s(h),d&&r(d),console.log(` AI Assistant context updated: ${h}`,d)};y.useEffect(()=>{const h=()=>{const u=window.location.pathname,m=window.location.hash;if(u==="/"&&!m)l("dashboard");else if(u.includes("/defi")||m.includes("defi"))l("defi");else if(u.includes("/nft")||m.includes("nft"))l("nft");else if(u.includes("/gamefi")||m.includes("gamefi"))l("gamefi");else if(u.includes("/dao")||m.includes("dao"))l("dao");else if(u.includes("/infrastructure")||m.includes("infrastructure"))l("infrastructure");else if(u.includes("/web3-tools")||m.includes("web3-tools"))l("web3-tools");else if(u.includes("/analysis")||m.includes("analysis"))l("analysis");else if(u.includes("/chart-test")||m.includes("chart-test"))l("trading");else{const f=sessionStorage.getItem("activeTab");f&&l(f)}};h();const d=()=>{h()};return window.addEventListener("popstate",d),window.addEventListener("hashchange",d),()=>{window.removeEventListener("popstate",d),window.removeEventListener("hashchange",d)}},[]),y.useEffect(()=>{const h=d=>{d.key==="activeTab"&&d.newValue&&l(d.newValue)};return window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)},[]);const c={currentFeature:t,contextData:a,isAIEnabled:n,setCurrentFeature:s,setContextData:r,setAIEnabled:o,updateContext:l};return e.jsx(sn.Provider,{value:c,children:i})},ic=()=>{try{const{updateContext:i}=an();return{setAIContext:(t,s)=>{i(t,s),sessionStorage.setItem("activeTab",t)}}}catch{return console.warn("useAIContext: AIAssistantProvider not found, using fallback"),{setAIContext:(t,s)=>{sessionStorage.setItem("activeTab",t),console.log(` AI Context fallback: ${t}`,s)}}}},fe={BTC:"/assets/crypto/btc.png",ETH:"/assets/crypto/eth.png",BNB:"/assets/crypto/bnb.png",ADA:"/assets/crypto/ada.png",SOL:"/assets/crypto/sol.png",DOT:"/assets/crypto/dot.png",AVAX:"/assets/crypto/avax.png",MATIC:"/assets/crypto/matic.png",LINK:"/assets/crypto/link.png",UNI:"/assets/crypto/uni.png",AAVE:"/assets/crypto/aave.png",COMP:"/assets/crypto/comp.png",MKR:"/assets/crypto/mkr.png",SNX:"/assets/crypto/snx.png",YFI:"/assets/crypto/yfi.png",SUSHI:"/assets/crypto/sushi.png",CRV:"/assets/crypto/crv.png",BAL:"/assets/crypto/bal.png",USDC:"/assets/crypto/usdc.png",USDT:"/assets/crypto/usdt.png",DAI:"/assets/crypto/dai.png",WBTC:"/assets/crypto/wbtc.png",SHIB:"/assets/crypto/shib.png",DOGE:"/assets/crypto/doge.png",LTC:"/assets/crypto/ltc.png",BCH:"/assets/crypto/bch.png",XRP:"/assets/crypto/xrp.png",TRX:"/assets/crypto/trx.png",ETC:"/assets/crypto/etc.png",XLM:"/assets/crypto/xlm.png",ALGO:"/assets/crypto/algo.png",VET:"/assets/crypto/vet.png",ICP:"/assets/crypto/icp.png",FIL:"/assets/crypto/fil.png",THETA:"/assets/crypto/theta.png",XMR:"/assets/crypto/xmr.png",EOS:"/assets/crypto/eos.png",ATOM:"/assets/crypto/atom.png",XTZ:"/assets/crypto/xtz.png",NEO:"/assets/crypto/neo.png",IOTA:"/assets/crypto/iota.png",DASH:"/assets/crypto/dash.png",ZEC:"/assets/crypto/zec.png",WAVES:"/assets/crypto/waves.png",ONT:"/assets/crypto/ont.png",ZIL:"/assets/crypto/zil.png",BAT:"/assets/crypto/bat.png",ENJ:"/assets/crypto/enj.png",MANA:"/assets/crypto/mana.png",SAND:"/assets/crypto/sand.png",AXS:"/assets/crypto/axs.png",GALA:"/assets/crypto/gala.png"},Ls={"bored-ape-yacht-club":{name:"Bored Ape Yacht Club",image:"/assets/nft/bored-ape-yacht-club.png",contract:"0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d"},cryptopunks:{name:"CryptoPunks",image:"/assets/nft/cryptopunks.png",contract:"0xb47e3cd837ddf8e4c57f05d70ab865de6e193bbb"},"mutant-ape-yacht-club":{name:"Mutant Ape Yacht Club",image:"/assets/nft/mutant-ape-yacht-club.png",contract:"0x60e4d786628fea6478f785a6d7e704777c86a7c6"},azuki:{name:"Azuki",image:"/assets/nft/azuki.png",contract:"0xed5af388653567af2f388e6224dc7c4b3241c544"},"otherdeed-for-otherside":{name:"Otherdeeds for Otherside",image:"/assets/nft/otherdeed-for-otherside.png",contract:"0x34d85c9cdeb23fa97cb08333b511ac86e1c4e258"},clonex:{name:"CloneX",image:"/assets/nft/clonex.png",contract:"0x49cf6f5d44e70224e2e23fdcdd2c053f30ada28b"}},oc={uniswap:"/assets/defi/uniswap.png",aave:"/assets/defi/aave.png",compound:"/assets/defi/compound.png",makerdao:"/assets/defi/makerdao.png",synthetix:"/assets/defi/synthetix.png",yearn:"/assets/defi/yearn.png",sushiswap:"/assets/defi/sushiswap.png",curve:"/assets/defi/curve.png",balancer:"/assets/defi/balancer.png",pancakeswap:"/assets/defi/pancakeswap.png",chainlink:"/assets/defi/chainlink.png"},lc={"axie-infinity":"/assets/gamefi/axie-infinity.png","the-sandbox":"/assets/gamefi/the-sandbox.png",decentraland:"/assets/gamefi/decentraland.png",enjin:"/assets/gamefi/enjin.png",gala:"/assets/gamefi/gala.png",illuvium:"/assets/gamefi/illuvium.png","star-atlas":"/assets/gamefi/star-atlas.png","alien-worlds":"/assets/gamefi/alien-worlds.png"},cc={ethereum:"/assets/chains/ethereum.png",polygon:"/assets/chains/polygon.png",binance:"/assets/chains/binance.png",avalanche:"/assets/chains/avalanche.png",arbitrum:"/assets/chains/arbitrum.png",optimism:"/assets/chains/optimism.png",fantom:"/assets/chains/fantom.png",solana:"/assets/chains/solana.png"},dc={binance:"/assets/exchanges/binance.png",coinbase:"/assets/exchanges/coinbase.png",kraken:"/assets/exchanges/kraken.png",huobi:"/assets/exchanges/huobi.png",okx:"/assets/exchanges/okx.png",kucoin:"/assets/exchanges/kucoin.png",bybit:"/assets/exchanges/bybit.png",gate:"/assets/exchanges/gate.png"},hc={maker:"/assets/dao/maker.png",compound:"/assets/dao/compound.png",aave:"/assets/dao/aave.png",uniswap:"/assets/dao/uniswap.png",yearn:"/assets/dao/yearn.png",synthetix:"/assets/dao/synthetix.png",curve:"/assets/dao/curve.png",balancer:"/assets/dao/balancer.png",sushiswap:"/assets/dao/sushiswap.png",olympus:"/assets/dao/olympus.png"},uc={chainlink:"/assets/infrastructure/chainlink.png","the-graph":"/assets/infrastructure/the-graph.png",filecoin:"/assets/infrastructure/filecoin.png",arweave:"/assets/infrastructure/arweave.png",helium:"/assets/infrastructure/helium.png","internet-computer":"/assets/infrastructure/internet-computer.png",polkadot:"/assets/infrastructure/polkadot.png",cosmos:"/assets/infrastructure/cosmos.png",near:"/assets/infrastructure/near.png",algorand:"/assets/infrastructure/algorand.png"},mc={metamask:"/assets/tools/metamask.png",walletconnect:"/assets/tools/walletconnect.png",opensea:"/assets/tools/opensea.png",etherscan:"/assets/tools/etherscan.png",remix:"/assets/tools/remix.png",hardhat:"/assets/tools/hardhat.png",truffle:"/assets/tools/truffle.png",infura:"/assets/tools/infura.png",alchemy:"/assets/tools/alchemy.png",moralis:"/assets/tools/moralis.png"},er={coindesk:"/assets/newsources/coindesk.png",cointelegraph:"/assets/newsources/cointelegraph.png",decrypt:"/assets/newsources/decrypt.png","the-block":"/assets/newsources/the-block.png",blockworks:"/assets/newsources/blockworks.png","bitcoin-magazine":"/assets/newsources/bitcoin-magazine.png","coinbase-blog":"/assets/newsources/coinbase-blog.png","binance-blog":"/assets/newsources/binance-blog.png","ethereum-foundation":"/assets/newsources/ethereum-foundation.png","polygon-blog":"/assets/newsources/polygon-blog.png"},tr={bitcoin:"/assets/news/bitcoin.svg",ethereum:"/assets/news/ethereum.svg",defi:"/assets/news/defi.svg",nft:"/assets/news/nft.svg",gamefi:"/assets/news/gamefi.svg",dao:"/assets/news/dao.svg",regulation:"/assets/news/regulation.svg",adoption:"/assets/news/adoption.svg",technology:"/assets/news/technology.svg",market:"/assets/news/market.svg",breaking:"/assets/news/breaking.svg",analysis:"/assets/news/analysis.svg"};class Oe{static getCryptoImage(t){const s=t.toUpperCase(),a=fe[s];return a||this.generateCryptoFallback(t)}static getNFTCollectionImage(t,s){const a=Object.values(Ls).find(n=>n.contract.toLowerCase()===t.toLowerCase());if(a)return a.image;const r=Ls[t.toLowerCase()];return r?r.image:this.generateNFTFallback(t,s||"Collection")}static getDeFiProtocolImage(t){const s=t.toLowerCase().replace(/\s+/g,"-"),a=oc[s];if(a)return a;const r=this.getProtocolTokenSymbol(t);return r&&fe[r]?fe[r]:this.generateProtocolFallback(t)}static getGameFiProjectImage(t){const s=t.toLowerCase().replace(/\s+/g,"-"),a=lc[s];if(a)return a;const r=this.getGameFiTokenSymbol(t);return r&&fe[r]?fe[r]:this.generateGameFiFallback(t)}static hasCryptoImage(t){return fe.hasOwnProperty(t.toUpperCase())}static getAvailableCryptoSymbols(){return Object.keys(fe)}static getAvailableNFTCollections(){return Object.entries(Ls).map(([t,s])=>({slug:t,...s}))}static getChainImage(t){const s=t.toLowerCase().replace(/\s+/g,"-"),a=cc[s];return a||this.generateChainFallback(t)}static getExchangeImage(t){const s=t.toLowerCase().replace(/\s+/g,"-"),a=dc[s];return a||this.generateExchangeFallback(t)}static getDAOImage(t){const s=t.toLowerCase().replace(/\s+/g,"-"),a=hc[s];if(a)return a;const r=this.getDAOTokenSymbol(t);return r&&fe[r]?fe[r]:this.generateDAOFallback(t)}static getInfrastructureImage(t){const s=t.toLowerCase().replace(/\s+/g,"-"),a=uc[s];if(a)return a;const r=this.getInfraTokenSymbol(t);return r&&fe[r]?fe[r]:this.generateInfraFallback(t)}static getWeb3ToolImage(t){const s=t.toLowerCase().replace(/\s+/g,"-"),a=mc[s];return a||this.generateToolFallback(t)}static getBackgroundImage(t){return`/assets/backgrounds/${t.toLowerCase().replace(/\s+/g,"-")}.svg`}static getNewsSourceImage(t){const s=t.toLowerCase().replace(/\s+/g,"-"),a=er[s];return a||this.generateNewsSourceFallback(t)}static getNewsCategoryImage(t){const s=t.toLowerCase().replace(/\s+/g,"-"),a=tr[s];return a||this.generateNewsCategoryFallback(t)}static getNewsImage(t,s){if(s==="source")return this.getNewsSourceImage(t);if(s==="category")return this.getNewsCategoryImage(t);const a=t.toLowerCase().replace(/\s+/g,"-");return er[a]?this.getNewsSourceImage(t):tr[a]?this.getNewsCategoryImage(t):this.generateNewsCategoryFallback(t)}static getImage(t,s){if(s)switch(s){case"crypto":return this.getCryptoImage(t);case"nft":return this.getNFTCollectionImage(t);case"defi":return this.getDeFiProtocolImage(t);case"gamefi":return this.getGameFiProjectImage(t);case"chain":return this.getChainImage(t);case"exchange":return this.getExchangeImage(t);case"dao":return this.getDAOImage(t);case"infrastructure":return this.getInfrastructureImage(t);case"tool":return this.getWeb3ToolImage(t);case"background":return this.getBackgroundImage(t);case"news":return this.getNewsImage(t);case"news-source":return this.getNewsSourceImage(t);case"news-category":return this.getNewsCategoryImage(t);default:return this.getCryptoImage(t)}return this.hasCryptoImage(t)?this.getCryptoImage(t):t.startsWith("0x")&&t.length===42?this.getNFTCollectionImage(t):this.getCryptoImage(t)}static getProtocolTokenSymbol(t){return{uniswap:"UNI",aave:"AAVE",compound:"COMP",makerdao:"MKR",maker:"MKR",synthetix:"SNX",yearn:"YFI","yearn finance":"YFI",sushiswap:"SUSHI",curve:"CRV",balancer:"BAL",chainlink:"LINK"}[t.toLowerCase()]||null}static getGameFiTokenSymbol(t){return{"axie infinity":"AXS","the sandbox":"SAND",decentraland:"MANA",enjin:"ENJ",gala:"GALA"}[t.toLowerCase()]||null}static getDAOTokenSymbol(t){return{maker:"MKR",compound:"COMP",aave:"AAVE",uniswap:"UNI",yearn:"YFI",synthetix:"SNX",curve:"CRV",balancer:"BAL",sushiswap:"SUSHI",olympus:"OHM"}[t.toLowerCase()]||null}static getInfraTokenSymbol(t){return{chainlink:"LINK","the graph":"GRT",filecoin:"FIL",arweave:"AR",helium:"HNT","internet computer":"ICP",polkadot:"DOT",cosmos:"ATOM",near:"NEAR",algorand:"ALGO"}[t.toLowerCase()]||null}static generateCryptoFallback(t){const a={BTC:"#f7931a",ETH:"#627eea",BNB:"#f3ba2f",ADA:"#0033ad",SOL:"#9945ff",DOT:"#e6007a",AVAX:"#e84142",MATIC:"#8247e5",LINK:"#375bd2",UNI:"#ff007a",AAVE:"#b6509e",COMP:"#00d395"}[t.toUpperCase()]||"#6366f1",r=t.toUpperCase().slice(0,3),n=64;return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="${n}" height="${n}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${a};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${a}cc;stop-opacity:1" />
          </linearGradient>
        </defs>
        <circle cx="${n/2}" cy="${n/2}" r="${n/2-1}" fill="url(#grad)"/>
        <text x="${n/2}" y="${n/2+4}" text-anchor="middle" fill="white" 
              font-family="Arial, sans-serif" font-size="16" font-weight="bold">
          ${r}
        </text>
      </svg>
    `)}`}static generateNFTFallback(t,s){const a=["#8b5cf6","#06b6d4","#10b981","#f59e0b","#ef4444","#ec4899"],r=a[t.length%a.length],n=s.split(" ").map(l=>l[0]).join("").slice(0,2).toUpperCase(),o=64;return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="${o}" height="${o}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="nftGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${r};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${r}dd;stop-opacity:1" />
          </linearGradient>
        </defs>
        <rect width="${o}" height="${o}" fill="url(#nftGrad)" rx="8"/>
        <text x="${o/2}" y="${o/2+4}" text-anchor="middle" fill="white" 
              font-family="Arial, sans-serif" font-size="18" font-weight="bold">
          ${n}
        </text>
      </svg>
    `)}`}static generateProtocolFallback(t){const s=["#6366f1","#8b5cf6","#06b6d4","#10b981","#f59e0b","#ef4444"],a=s[t.length%s.length],r=t.charAt(0).toUpperCase(),n=64;return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="${n}" height="${n}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="protocolGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${a};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${a}cc;stop-opacity:1" />
          </linearGradient>
        </defs>
        <rect width="${n}" height="${n}" fill="url(#protocolGrad)" rx="12"/>
        <text x="${n/2}" y="${n/2+6}" text-anchor="middle" fill="white" 
              font-family="Arial, sans-serif" font-size="20" font-weight="bold">
          ${r}
        </text>
      </svg>
    `)}`}static generateGameFiFallback(t){const s=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3"],a=s[t.length%s.length],r=t.split(" ").map(o=>o[0]).join("").slice(0,2).toUpperCase(),n=64;return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="${n}" height="${n}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="gameGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${a};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${a}cc;stop-opacity:1" />
          </linearGradient>
        </defs>
        <circle cx="${n/2}" cy="${n/2}" r="${n/2-1}" fill="url(#gameGrad)"/>
        <text x="${n/2}" y="${n/2+4}" text-anchor="middle" fill="white"
              font-family="Arial, sans-serif" font-size="14" font-weight="bold">
          ${r}
        </text>
      </svg>
    `)}`}static generateChainFallback(t){const a={ethereum:"#627eea",polygon:"#8247e5",binance:"#f3ba2f",avalanche:"#e84142",arbitrum:"#28a0f0",optimism:"#ff0420"}[t.toLowerCase()]||"#6366f1",r=t.charAt(0).toUpperCase(),n=64;return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="${n}" height="${n}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="chainGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${a};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${a}cc;stop-opacity:1" />
          </linearGradient>
        </defs>
        <circle cx="${n/2}" cy="${n/2}" r="${n/2-1}" fill="url(#chainGrad)"/>
        <text x="${n/2}" y="${n/2+4}" text-anchor="middle" fill="white"
              font-family="Arial, sans-serif" font-size="16" font-weight="bold">
          ${r}
        </text>
      </svg>
    `)}`}static generateExchangeFallback(t){const s="#f59e0b",a=t.charAt(0).toUpperCase(),r=64;return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="${r}" height="${r}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="exchangeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${s};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${s}cc;stop-opacity:1" />
          </linearGradient>
        </defs>
        <rect width="${r}" height="${r}" fill="url(#exchangeGrad)" rx="12"/>
        <text x="${r/2}" y="${r/2+4}" text-anchor="middle" fill="white"
              font-family="Arial, sans-serif" font-size="16" font-weight="bold">
          ${a}
        </text>
      </svg>
    `)}`}static generateDAOFallback(t){const s="#10b981",a=t.charAt(0).toUpperCase(),r=64;return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="${r}" height="${r}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="daoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${s};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${s}cc;stop-opacity:1" />
          </linearGradient>
        </defs>
        <polygon points="32,8 56,24 56,40 32,56 8,40 8,24" fill="url(#daoGrad)"/>
        <text x="${r/2}" y="${r/2+4}" text-anchor="middle" fill="white"
              font-family="Arial, sans-serif" font-size="16" font-weight="bold">
          ${a}
        </text>
      </svg>
    `)}`}static generateInfraFallback(t){const s="#3b82f6",a=t.charAt(0).toUpperCase(),r=64;return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="${r}" height="${r}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="infraGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${s};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${s}cc;stop-opacity:1" />
          </linearGradient>
        </defs>
        <rect width="${r}" height="${r}" fill="url(#infraGrad)" rx="8"/>
        <rect x="8" y="8" width="48" height="48" fill="none" stroke="white" stroke-width="2" rx="4"/>
        <text x="${r/2}" y="${r/2+4}" text-anchor="middle" fill="white"
              font-family="Arial, sans-serif" font-size="16" font-weight="bold">
          ${a}
        </text>
      </svg>
    `)}`}static generateToolFallback(t){const s="#8b5cf6",a=t.charAt(0).toUpperCase(),r=64;return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="${r}" height="${r}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="toolGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${s};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${s}cc;stop-opacity:1" />
          </linearGradient>
        </defs>
        <circle cx="${r/2}" cy="${r/2}" r="${r/2-1}" fill="url(#toolGrad)"/>
        <circle cx="${r/2}" cy="${r/2}" r="${r/2-8}" fill="none" stroke="white" stroke-width="2"/>
        <text x="${r/2}" y="${r/2+4}" text-anchor="middle" fill="white"
              font-family="Arial, sans-serif" font-size="16" font-weight="bold">
          ${a}
        </text>
      </svg>
    `)}`}static generateNewsSourceFallback(t){const s="#1f2937",a=t.split(/[-\s]/).map(n=>n[0]).join("").slice(0,2).toUpperCase(),r=64;return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="${r}" height="${r}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="newsSourceGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${s};stop-opacity:1" />
            <stop offset="100%" style="stop-color:#374151;stop-opacity:1" />
          </linearGradient>
        </defs>
        <rect width="${r}" height="${r}" fill="url(#newsSourceGrad)" rx="8"/>
        <rect x="8" y="8" width="48" height="48" fill="none" stroke="white" stroke-width="1" rx="4"/>
        <text x="${r/2}" y="${r/2+4}" text-anchor="middle" fill="white"
              font-family="Arial, sans-serif" font-size="12" font-weight="bold">
          ${a}
        </text>
      </svg>
    `)}`}static generateNewsCategoryFallback(t){const s={bitcoin:{color:"#f7931a",icon:""},ethereum:{color:"#627eea",icon:""},defi:{color:"#8b5cf6",icon:"DeFi"},nft:{color:"#ec4899",icon:"NFT"},gamefi:{color:"#10b981",icon:"GameFi"},dao:{color:"#f59e0b",icon:"DAO"},regulation:{color:"#ef4444",icon:"REG"},adoption:{color:"#06b6d4",icon:"ADOPT"},technology:{color:"#6366f1",icon:"TECH"},market:{color:"#84cc16",icon:"MKT"},breaking:{color:"#dc2626",icon:""},analysis:{color:"#7c3aed",icon:""}},a=t.toLowerCase(),r=s[a]||{color:"#6b7280",icon:"NEWS"},n=64;return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="${n}" height="${n}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="newsCategoryGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${r.color};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${r.color}cc;stop-opacity:1" />
          </linearGradient>
          <filter id="newsGlow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        <circle cx="${n/2}" cy="${n/2}" r="${n/2-2}" fill="url(#newsCategoryGrad)" filter="url(#newsGlow)"/>
        <circle cx="${n/2}" cy="${n/2}" r="${n/2-6}" fill="none" stroke="white" stroke-width="1" opacity="0.5"/>
        <text x="${n/2}" y="${n/2+4}" text-anchor="middle" fill="white"
              font-family="Arial, sans-serif" font-size="10" font-weight="bold">
          ${r.icon}
        </text>
      </svg>
    `)}`}}const ws=({type:i,identifier:t,alt:s,className:a="",size:r="md",fallbackName:n,onLoad:o,onError:l})=>{const[c,h]=y.useState(!1),d={xs:"w-4 h-4",sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"},m=(()=>{switch(i){case"crypto":return Oe.getCryptoImage(t);case"nft":return Oe.getNFTCollectionImage(t,n);case"defi":return Oe.getDeFiProtocolImage(t);case"gamefi":return Oe.getGameFiProjectImage(t);case"news":return Oe.getNewsImage(t);case"news-source":return Oe.getNewsSourceImage(t);case"news-category":return Oe.getNewsCategoryImage(t);default:return Oe.getCryptoImage(t)}})(),f=()=>{h(!1),o?.()},j=()=>{h(!0),l?.()};return m.startsWith("data:image/svg+xml")?e.jsx("div",{className:`${d[r]} ${a} flex items-center justify-center`,dangerouslySetInnerHTML:{__html:decodeURIComponent(m.replace("data:image/svg+xml,",""))}}):e.jsx("img",{src:m,alt:s,className:`${d[r]} ${a} object-cover rounded`,onLoad:f,onError:j,loading:"lazy"})},wa=i=>e.jsx(ws,{...i,type:"crypto"}),mu=i=>e.jsx(ws,{...i,type:"nft"}),gc=i=>e.jsx(ws,{...i,type:"news-source"}),pc=i=>e.jsx(ws,{...i,type:"news-category"}),rn=()=>{const[i,t]=y.useState([]),[s,a]=y.useState(!0),r=[{id:"1",title:"Bitcoin Reaches New All-Time High Above $116,000",summary:"Bitcoin continues its bullish momentum as institutional adoption accelerates.",timestamp:new Date(Date.now()-1e3*60*15).toISOString(),category:"Bitcoin",impact:"high"},{id:"2",title:"Ethereum Layer 2 Solutions See Record TVL Growth",summary:"Arbitrum and Optimism lead the charge in scaling Ethereum ecosystem.",timestamp:new Date(Date.now()-1e3*60*45).toISOString(),category:"Ethereum",impact:"medium"},{id:"3",title:"DeFi Protocol Aave Announces V4 with Enhanced Features",summary:"New version promises better capital efficiency and risk management.",timestamp:new Date(Date.now()-1e3*60*120).toISOString(),category:"DeFi",impact:"medium"},{id:"4",title:"Major NFT Marketplace Integrates Real-Time Analytics",summary:"Enhanced trading tools provide better market insights for collectors.",timestamp:new Date(Date.now()-1e3*60*180).toISOString(),category:"NFT",impact:"low"},{id:"5",title:"GameFi Sector Shows Strong Recovery with 25% Growth",summary:"Play-to-earn games attract new players as market sentiment improves.",timestamp:new Date(Date.now()-1e3*60*240).toISOString(),category:"GameFi",impact:"medium"}],n=async()=>{try{a(!0);const[h,d]=await Promise.all([fetch("/api/v2/blockchain/overview").catch(()=>null),fetch("/api/v2/blockchain/prices/live").catch(()=>null)]),u=[];if(h?.ok){const f=await h.json();if(f.success){const j=f.data,g=parseFloat(j.totalGrowth24h?.replace(/[+%]/g,"")||"0");Math.abs(g)>1&&u.push({id:"market-movement",title:`Crypto Market ${g>0?"Surges":"Declines"} ${Math.abs(g).toFixed(1)}% in 24 Hours`,summary:`Total market cap ${g>0?"rises to":"falls to"} ${j.totalMarketCap} as ${g>0?"bullish":"bearish"} sentiment dominates trading.`,timestamp:new Date().toISOString(),category:"Market",impact:Math.abs(g)>5?"high":"medium"})}}if(d?.ok){const f=await d.json();if(f.success){const j=f.data.bitcoin,g=f.data.ethereum;j&&Math.abs(j.usd_24h_change)>2&&u.push({id:"btc-movement",title:`Bitcoin ${j.usd_24h_change>0?"Rallies":"Drops"} ${Math.abs(j.usd_24h_change).toFixed(1)}% to $${j.usd.toLocaleString()}`,summary:`Bitcoin shows ${j.usd_24h_change>0?"strong momentum":"selling pressure"} with volume at $${(j.usd_24h_vol/1e9).toFixed(1)}B.`,timestamp:new Date(Date.now()-1e3*60*10).toISOString(),category:"Bitcoin",impact:Math.abs(j.usd_24h_change)>5?"high":"medium"})}}const m=[...u,...r.slice(0,6-u.length)];t(m)}catch(h){console.error("Failed to fetch market news:",h),t(r)}finally{a(!1)}};y.useEffect(()=>{n();const h=setInterval(n,5*60*1e3);return()=>clearInterval(h)},[]);const o=h=>{const d=new Date,u=new Date(h),m=Math.floor((d.getTime()-u.getTime())/(1e3*60));return m<60?`${m}m ago`:`${Math.floor(m/60)}h ago`},l=h=>{switch(h){case"high":return"text-red-400 bg-red-400/20";case"medium":return"text-yellow-400 bg-yellow-400/20";case"low":return"text-green-400 bg-green-400/20";default:return"text-gray-400 bg-gray-400/20"}},c=h=>{switch(h.toLowerCase()){case"bitcoin":return"text-orange-400 bg-orange-400/20";case"ethereum":return"text-blue-400 bg-blue-400/20";case"defi":return"text-green-400 bg-green-400/20";case"nft":return"text-purple-400 bg-purple-400/20";case"gamefi":return"text-pink-400 bg-pink-400/20";default:return"text-gray-400 bg-gray-400/20"}};return s?e.jsx("div",{className:"glass-card p-6",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-400"}),e.jsx("span",{className:"ml-3 text-white/70",children:"Loading latest news..."})]})}):e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-blue-400"}),"Latest Market News"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/60",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Live Updates"]})]}),e.jsx("div",{className:"space-y-4",children:i.map((h,d)=>e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:d*.1},className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-white text-sm leading-tight flex-1 mr-3",children:h.title}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${c(h.category)}`,children:h.category}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${l(h.impact)}`,children:h.impact})]})]}),e.jsx("p",{className:"text-white/70 text-sm mb-3 leading-relaxed",children:h.summary}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/50",children:[e.jsx(nt,{className:"w-3 h-3"}),o(h.timestamp)]}),h.url&&e.jsx(gs,{className:"w-4 h-4 text-white/40 hover:text-white/70 transition-colors"})]})]},h.id))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{className:"text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors",children:"View All News "})})]})},fc=()=>{const[i,t]=y.useState([]),[s,a]=y.useState(null),[r,n]=y.useState(!0),[o,l]=y.useState(new Date),[c,h]=y.useState(!1),[d,u]=y.useState("Loading..."),[m,f]=y.useState(0),[j,g]=y.useState(!1),x=async()=>{try{let w=0;const k=4,P=await(await fetch("/api/v2/blockchain/prices/live")).json();if(P.success){w++;let v=[];Array.isArray(P.data)?v=P.data.map(A=>({name:A.name||A.symbol,symbol:A.symbol,price:A.price||0,change24h:A.change24h||0,marketCap:A.marketCap||0,volume24h:A.volume24h||0})):P.data&&typeof P.data=="object"&&(v=Object.entries(P.data).map(([A,$])=>({name:A.charAt(0).toUpperCase()+A.slice(1),symbol:A.toUpperCase(),price:$.usd||$.price||0,change24h:$.usd_24h_change||$.change24h||0,marketCap:$.usd_market_cap||$.marketCap||0,volume24h:$.usd_24h_vol||$.volume24h||0}))),t(v.slice(0,8)),console.log(" RealTimeDashboard: Live prices loaded",v.length,"coins")}const I=await(await fetch("/api/v2/blockchain/overview")).json();I.success&&(w++,a(I.data),u(I.data.dataSource||"Real-time API"),g(I.data.isRealTime||!1),console.log(" RealTimeDashboard: Market overview loaded",I.data));try{(await fetch("/api/v2/blockchain/defi/protocols")).ok&&(w++,console.log(" RealTimeDashboard: DeFi data available"))}catch(v){console.warn("DeFi data unavailable:",v)}try{(await fetch("/api/v2/blockchain/nft/collections")).ok&&(w++,console.log(" RealTimeDashboard: NFT data available"))}catch(v){console.warn("NFT data unavailable:",v)}f(w),h(w>0),l(new Date),n(!1)}catch(w){console.error("Failed to fetch real-time data:",w),h(!1),f(0),u("Connection failed"),g(!1),n(!1)}};y.useEffect(()=>{x();const w=setInterval(x,3e4);return()=>clearInterval(w)},[]);const N=w=>!w||isNaN(w)?"$0.00":w>=1e3?`$${w.toLocaleString()}`:`$${w.toFixed(2)}`,p=w=>!w||isNaN(w)?"$0.00":w>=1e12?`$${(w/1e12).toFixed(1)}T`:w>=1e9?`$${(w/1e9).toFixed(1)}B`:`$${(w/1e6).toFixed(1)}M`,b=w=>!w||isNaN(w)?"0.00":w.toFixed(2);return r?e.jsx("div",{className:"glass-card p-8 mb-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),e.jsx("span",{className:"ml-3 text-white",children:"Loading real-time market data..."})]})}):e.jsxs("div",{className:"space-y-8 mb-16",children:[s&&e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(Ve,{className:"w-8 h-8 text-green-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-sm text-white/70 mb-1",children:"Total Market Cap"}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:s.totalMarketCap}),e.jsxs("p",{className:"text-sm text-white/60",children:[s.totalGrowth24h," 24h"]})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(se,{className:"w-8 h-8 text-orange-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-sm text-white/70 mb-1",children:"Bitcoin"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:s?.bitcoin?.price||"$67,250"}),e.jsxs("p",{className:`text-sm ${(s?.bitcoin?.change||"+3.1%").startsWith("+")?"text-green-400":"text-red-400"}`,children:[s?.bitcoin?.change||"+3.1%"," 24h"]})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(Ne,{className:"w-8 h-8 text-blue-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-sm text-white/70 mb-1",children:"Ethereum"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:s?.ethereum?.price||"$3,650"}),e.jsxs("p",{className:`text-sm ${(s?.ethereum?.change||"+8.5%").startsWith("+")?"text-green-400":"text-red-400"}`,children:[s?.ethereum?.change||"+8.5%"," 24h"]})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(la,{className:"w-8 h-8 text-yellow-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-sm text-white/70 mb-1",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:"2.4M"}),e.jsx("p",{className:"text-sm text-white/60",children:"24h"})]})]}),e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${j?"bg-green-400 animate-pulse":"bg-yellow-400"}`}),e.jsxs("span",{className:"text-sm text-white/70",children:[j?"Real-time":"Cached"," Data"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pr,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{className:"text-sm text-white/70",children:[m,"/4 Sources Active"]})]})]}),e.jsxs("div",{className:"text-xs text-white/50",children:["Last updated: ",o.toLocaleTimeString()]})]})}),s&&e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"DeFi"}),e.jsx("div",{className:"text-sm text-green-400",children:"Decentralized Finance"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"Market Cap"}),e.jsx("span",{className:"text-white font-medium",children:"$2.1T"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"24h Change"}),e.jsx("span",{className:"text-green-400",children:"+2.4%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"Dominance"}),e.jsx("span",{className:"text-white font-medium",children:"15.2%"})]})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"NFTs"}),e.jsx("div",{className:"text-sm text-purple-400",children:"Non-Fungible Tokens"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"Market Cap"}),e.jsx("span",{className:"text-white font-medium",children:"$15.8B"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"24h Change"}),e.jsx("span",{className:"text-green-400",children:"+5.7%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"Dominance"}),e.jsx("span",{className:"text-white font-medium",children:"0.8%"})]})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"GameFi"}),e.jsx("div",{className:"text-sm text-blue-400",children:"Gaming & Metaverse"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"Market Cap"}),e.jsx("span",{className:"text-white font-medium",children:"$8.2B"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"24h Change"}),e.jsx("span",{className:"text-green-400",children:"+3.1%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"Dominance"}),e.jsx("span",{className:"text-white font-medium",children:"0.4%"})]})]})]})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(se,{className:"w-6 h-6 text-green-400"}),"Live Market Prices"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/60",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Last updated: ",o.toLocaleTimeString()]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map((w,k)=>e.jsxs(R.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,delay:k*.1},className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wa,{identifier:w.symbol,alt:`${w.symbol} logo`,size:"sm",className:"w-6 h-6"}),e.jsx("h3",{className:"font-semibold text-white",children:w.name})]}),e.jsx("span",{className:"text-xs text-white/60",children:w.symbol})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xl font-bold text-white",children:N(w.price)}),e.jsxs("div",{className:"flex items-center gap-2",children:[w.change24h>=0?e.jsx(Q,{className:"w-4 h-4 text-green-400"}):e.jsx(me,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:`text-sm font-medium ${(w.change24h||0)>=0?"text-green-400":"text-red-400"}`,children:[(w.change24h||0)>=0?"+":"",b(w.change24h),"%"]})]}),e.jsxs("div",{className:"text-xs text-white/60",children:[e.jsxs("p",{children:["MCap: ",p(w.marketCap)]}),e.jsxs("p",{children:["Vol: ",p(w.volume24h)]})]})]})]},w.symbol))})]}),e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsx(rn,{})})]})};var sr={};class xc{constructor(){F(this,"prisma",null);F(this,"redis",null);F(this,"pgPool",null);F(this,"config");F(this,"connectionHealth");F(this,"reconnectAttempts",0);F(this,"maxReconnectAttempts",5);F(this,"inMemoryCache",new Map);F(this,"isInitialized",!1);this.config={postgres:{url:sr.DATABASE_URL||"postgresql://localhost:5432/connectouch",maxConnections:20,connectionTimeout:1e4,idleTimeout:3e4,retryAttempts:3,retryDelay:2e3},redis:{url:sr.REDIS_URL||"redis://localhost:6379",maxRetries:3,retryDelay:1e3},fallback:{enabled:!0,inMemoryCache:!0,persistentStorage:!1}},this.connectionHealth={postgres:{connected:!1,lastCheck:new Date,responseTime:0,errorCount:0},redis:{connected:!1,lastCheck:new Date,responseTime:0,errorCount:0},overall:"critical"}}async initialize(){if(this.isInitialized){console.log(" Database service already initialized");return}console.log(" Initializing Enhanced Database Service...");try{await this.initializePostgreSQL(),await this.initializeRedis(),this.startHealthMonitoring(),this.isInitialized=!0,console.log(" Enhanced Database Service initialized successfully")}catch(t){if(console.error(" Database service initialization failed:",t),this.config.fallback.enabled)console.log(" Enabling fallback mode..."),this.enableFallbackMode();else throw t}}async initializePostgreSQL(){try{this.prisma=new ai({log:["error"],errorFormat:"pretty",datasources:{db:{url:this.config.postgres.url}},transactionOptions:{maxWait:5e3,timeout:1e4}}),this.pgPool=new ni({connectionString:this.config.postgres.url,max:this.config.postgres.maxConnections,idleTimeoutMillis:this.config.postgres.idleTimeout,connectionTimeoutMillis:this.config.postgres.connectionTimeout,allowExitOnIdle:!0}),await this.testPostgreSQLConnection(),console.log(" PostgreSQL initialized with connection pooling")}catch(t){throw console.error(" PostgreSQL initialization failed:",t),this.connectionHealth.postgres.errorCount++,t}}async initializeRedis(){try{this.redis=ri({url:this.config.redis.url,socket:{reconnectStrategy:t=>t>this.config.redis.maxRetries?!1:Math.min(t*this.config.redis.retryDelay,5e3),connectTimeout:this.config.redis.commandTimeout}}),this.redis.on("connect",()=>{console.log(" Redis connected"),this.connectionHealth.redis.connected=!0,this.connectionHealth.redis.errorCount=0}),this.redis.on("error",t=>{console.error(" Redis error:",t),this.connectionHealth.redis.connected=!1,this.connectionHealth.redis.errorCount++}),this.redis.on("end",()=>{console.log(" Redis connection ended"),this.connectionHealth.redis.connected=!1}),await this.redis.connect(),await this.testRedisConnection(),console.log(" Redis initialized with retry logic")}catch(t){if(console.error(" Redis initialization failed:",t),this.connectionHealth.redis.errorCount++,this.config.fallback.inMemoryCache)console.log(" Using in-memory cache as Redis fallback");else throw t}}async testPostgreSQLConnection(){const t=Date.now();try{this.prisma&&(await this.prisma.$connect(),await this.prisma.$queryRaw`SELECT 1 as test`,this.connectionHealth.postgres.connected=!0,this.connectionHealth.postgres.responseTime=Date.now()-t,this.connectionHealth.postgres.lastCheck=new Date,this.connectionHealth.postgres.errorCount=0)}catch(s){throw this.connectionHealth.postgres.connected=!1,this.connectionHealth.postgres.errorCount++,s}}async testRedisConnection(){const t=Date.now();try{this.redis&&(await this.redis.ping(),this.connectionHealth.redis.connected=!0,this.connectionHealth.redis.responseTime=Date.now()-t,this.connectionHealth.redis.lastCheck=new Date,this.connectionHealth.redis.errorCount=0)}catch(s){throw this.connectionHealth.redis.connected=!1,this.connectionHealth.redis.errorCount++,s}}startHealthMonitoring(){setInterval(async()=>{try{this.prisma&&await this.testPostgreSQLConnection(),this.redis&&await this.testRedisConnection(),this.updateOverallHealth(),this.connectionHealth.overall==="critical"&&await this.attemptReconnection()}catch(t){console.error(" Health check failed:",t)}},3e4)}updateOverallHealth(){const t=this.connectionHealth.postgres.connected,s=this.connectionHealth.redis.connected||this.config.fallback.inMemoryCache;t&&s?this.connectionHealth.overall="healthy":t||s?this.connectionHealth.overall="degraded":this.connectionHealth.overall="critical"}async attemptReconnection(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log(" Max reconnection attempts reached");return}this.reconnectAttempts++;const t=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log(` Attempting reconnection (${this.reconnectAttempts}/${this.maxReconnectAttempts}) in ${t}ms`),setTimeout(async()=>{try{!this.connectionHealth.postgres.connected&&this.prisma&&await this.testPostgreSQLConnection(),!this.connectionHealth.redis.connected&&this.redis&&await this.testRedisConnection(),this.connectionHealth.overall!=="critical"&&(this.reconnectAttempts=0,console.log(" Reconnection successful"))}catch(s){console.error(" Reconnection failed:",s)}},t)}enableFallbackMode(){console.log(" Enabling database fallback mode"),this.config.fallback.inMemoryCache&&console.log(" In-memory cache enabled"),this.config.fallback.persistentStorage&&console.log(" Local storage fallback enabled"),this.connectionHealth.overall="degraded"}getHealth(){return{...this.connectionHealth}}async query(t,s){try{if(this.prisma&&this.connectionHealth.postgres.connected)return await this.prisma.$queryRawUnsafe(t,...s||[]);throw new Error("PostgreSQL not available")}catch(a){if(console.error(" Database query failed:",a),this.config.fallback.enabled)return console.log(" Using fallback for query"),this.getFallbackData(t);throw a}}async setCache(t,s,a=3600){try{this.redis&&this.connectionHealth.redis.connected?await this.redis.setEx(t,a,JSON.stringify(s)):this.config.fallback.inMemoryCache&&this.inMemoryCache.set(t,{value:s,expires:Date.now()+a*1e3})}catch(r){console.error(" Cache set failed:",r)}}async getCache(t){try{if(this.redis&&this.connectionHealth.redis.connected){const s=await this.redis.get(t);return s?JSON.parse(s):null}else if(this.config.fallback.inMemoryCache){const s=this.inMemoryCache.get(t);if(s&&s.expires>Date.now())return s.value;s&&this.inMemoryCache.delete(t)}return null}catch(s){return console.error(" Cache get failed:",s),null}}getFallbackData(t){return console.log(" Returning fallback data for:",t),{}}async shutdown(){console.log(" Shutting down database service...");try{this.prisma&&await this.prisma.$disconnect(),this.redis&&await this.redis.quit(),this.pgPool&&await this.pgPool.end(),console.log(" Database service shutdown complete")}catch(t){console.error(" Database shutdown error:",t)}}}const ar=new xc;var ss={};class wc{constructor(){F(this,"configs",new Map);F(this,"instances",new Map);F(this,"health",new Map);F(this,"circuitBreakers",new Map);F(this,"cache",new Map);this.initializeConfigurations(),this.startHealthMonitoring()}initializeConfigurations(){this.configs.set("coinmarketcap",{primary:{name:"CoinMarketCap",baseUrl:"https://pro-api.coinmarketcap.com/v1",apiKey:ss.COINMARKETCAP_API_KEY||"",rateLimit:333,timeout:1e4},fallbacks:[],cache:{enabled:!0,ttl:60,maxSize:1e3},circuitBreaker:{enabled:!0,failureThreshold:5,resetTimeout:6e4}}),this.configs.set("defillama",{primary:{name:"DeFiLlama",baseUrl:"https://api.llama.fi",rateLimit:300,timeout:15e3},fallbacks:[{name:"DeBank",baseUrl:"https://openapi.debank.com/v1",apiKey:ss.DEBANK_API_KEY||"",rateLimit:100,timeout:1e4}],cache:{enabled:!0,ttl:300,maxSize:500},circuitBreaker:{enabled:!0,failureThreshold:3,resetTimeout:12e4}}),this.configs.set("openai",{primary:{name:"OpenAI",baseUrl:"https://api.openai.com/v1",apiKey:ss.OPENAI_API_KEY||"",rateLimit:3e3,timeout:3e4},fallbacks:[],cache:{enabled:!0,ttl:1800,maxSize:200},circuitBreaker:{enabled:!0,failureThreshold:3,resetTimeout:3e5}}),this.configs.set("alchemy",{primary:{name:"Alchemy",baseUrl:"https://eth-mainnet.g.alchemy.com/v2",apiKey:ss.ALCHEMY_API_KEY||"",rateLimit:1e3,timeout:15e3},fallbacks:[],cache:{enabled:!0,ttl:300,maxSize:500},circuitBreaker:{enabled:!0,failureThreshold:5,resetTimeout:18e4}}),this.createApiInstances()}createApiInstances(){this.configs.forEach((t,s)=>{const a=this.createAxiosInstance(t.primary);this.instances.set(`${s}-primary`,a),t.fallbacks.forEach((r,n)=>{const o=this.createAxiosInstance(r);this.instances.set(`${s}-fallback-${n}`,o)}),this.health.set(s,{service:s,status:"healthy",responseTime:0,errorRate:0,lastCheck:new Date,consecutiveFailures:0}),this.circuitBreakers.set(s,{state:"closed",failureCount:0,lastFailureTime:new Date,nextAttemptTime:new Date})})}createAxiosInstance(t){const s=ze.create({baseURL:t.baseUrl,timeout:t.timeout,headers:{"Content-Type":"application/json","User-Agent":"Connectouch-Platform/2.0",...t.apiKey&&{Authorization:`Bearer ${t.apiKey}`}}});return s.interceptors.request.use(a=>(a.metadata={startTime:Date.now()},a),a=>Promise.reject(a)),s.interceptors.response.use(a=>{const r=Date.now()-a.config.metadata.startTime;return this.updateHealthMetrics(a.config.baseURL,!0,r),a},a=>{const r=Date.now()-a.config?.metadata?.startTime||0;return this.updateHealthMetrics(a.config?.baseURL||"unknown",!1,r),Promise.reject(a)}),s}async makeRequest(t,s,a={}){const{method:r="GET",data:n,params:o,useCache:l=!0}=a,c=this.generateCacheKey(t,s,o);if(l&&r==="GET"){const h=await this.getFromCache(c);if(h)return console.log(` Cache hit for ${t}/${s}`),h}if(!this.isCircuitBreakerClosed(t))return console.log(` Circuit breaker open for ${t}, using fallback`),await this.getFallbackData(t,s,o);try{const h=await this.executeRequest(t,"primary",s,{method:r,data:n,params:o});return l&&r==="GET"&&await this.setCache(t,c,h),this.resetCircuitBreaker(t),h}catch(h){return console.error(` Primary API failed for ${t}:`,h),this.recordFailure(t),await this.tryFallbacks(t,s,{method:r,data:n,params:o,useCache:l})}}async executeRequest(t,s,a,r){const n=s==="primary"?`${t}-primary`:`${t}-${s}`,o=this.instances.get(n);if(!o)throw new Error(`API instance not found: ${n}`);const{method:l,data:c,params:h}=r;let d;switch(l){case"GET":d=await o.get(a,{params:h});break;case"POST":d=await o.post(a,c,{params:h});break;case"PUT":d=await o.put(a,c,{params:h});break;case"DELETE":d=await o.delete(a,{params:h});break;default:throw new Error(`Unsupported HTTP method: ${l}`)}return d.data}async tryFallbacks(t,s,a){const r=this.configs.get(t);if(!r||r.fallbacks.length===0)throw new Error(`No fallbacks available for ${t}`);for(let n=0;n<r.fallbacks.length;n++)try{console.log(` Trying fallback ${n+1} for ${t}`);const o=await this.executeRequest(t,`fallback-${n}`,s,a);if(a.useCache&&a.method==="GET"){const l=this.generateCacheKey(t,s,a.params);await this.setCache(t,l,o)}return o}catch(o){console.error(` Fallback ${n+1} failed for ${t}:`,o);continue}return await this.getFallbackData(t,s,a.params)}async getFallbackData(t,s,a){const r=this.generateCacheKey(t,s,a),n=await this.getFromCache(r);return n?(console.log(` Using cached fallback data for ${t}/${s}`),n):(console.log(` Generating mock data for ${t}/${s}`),this.generateMockData(t,s))}generateMockData(t,s){return{coingecko:{"/simple/price":{bitcoin:{usd:67250},ethereum:{usd:3850}},"/coins/markets":[{id:"bitcoin",symbol:"btc",current_price:67250,market_cap:13e11},{id:"ethereum",symbol:"eth",current_price:3850,market_cap:46e10}]},defillama:{"/protocols":[{name:"Uniswap",tvl:5e9,category:"Dexes"},{name:"Aave",tvl:12e9,category:"Lending"}]},openai:{"/chat/completions":{choices:[{message:{content:"I apologize, but I cannot provide real-time analysis due to API limitations."}}]}}}[t]?.[s]||{}}async setCache(t,s,a){const r=this.configs.get(t);if(r?.cache.enabled)try{await ar.setCache(s,a,r.cache.ttl)}catch{this.cache.set(s,{data:a,expires:Date.now()+r.cache.ttl*1e3})}}async getFromCache(t){try{const s=await ar.getCache(t);if(s)return s;const a=this.cache.get(t);return a&&a.expires>Date.now()?a.data:(a&&this.cache.delete(t),null)}catch{return null}}isCircuitBreakerClosed(t){const s=this.circuitBreakers.get(t);if(!s)return!0;const a=Date.now();switch(s.state){case"closed":return!0;case"open":return a>=s.nextAttemptTime.getTime()?(s.state="half-open",!0):!1;case"half-open":return!0;default:return!0}}recordFailure(t){const s=this.circuitBreakers.get(t),a=this.configs.get(t);!s||!a||(s.failureCount++,s.lastFailureTime=new Date,s.failureCount>=a.circuitBreaker.failureThreshold&&(s.state="open",s.nextAttemptTime=new Date(Date.now()+a.circuitBreaker.resetTimeout),console.log(` Circuit breaker opened for ${t}`)))}resetCircuitBreaker(t){const s=this.circuitBreakers.get(t);s&&(s.state="closed",s.failureCount=0,console.log(` Circuit breaker reset for ${t}`))}updateHealthMetrics(t,s,a){let r="";if(this.configs.forEach((o,l)=>{(o.primary.baseUrl===t||o.fallbacks.some(c=>c.baseUrl===t))&&(r=l)}),!r)return;const n=this.health.get(r);n&&(n.lastCheck=new Date,n.responseTime=a,s?(n.consecutiveFailures=0,n.status=a<5e3?"healthy":"degraded"):(n.consecutiveFailures++,n.status=n.consecutiveFailures>=3?"down":"degraded"))}startHealthMonitoring(){setInterval(()=>{this.health.forEach((t,s)=>{Date.now()-t.lastCheck.getTime()>3e5&&(t.status="down")})},6e4)}generateCacheKey(t,s,a){const r=a?JSON.stringify(a):"";return`api:${t}:${s}:${Buffer.from(r).toString("base64")}`}getHealthStatus(){return new Map(this.health)}getCircuitBreakerStatus(){return new Map(this.circuitBreakers)}async getCryptoPrices(t,s=["USD"]){return this.makeRequest("coinmarketcap","/cryptocurrency/quotes/latest",{params:{symbol:t.join(","),convert:s.join(",")}})}async getCryptoMarketData(t=100){return this.makeRequest("coinmarketcap","/cryptocurrency/listings/latest",{params:{limit:t,sort:"market_cap",convert:"USD"}})}async getCryptoMarkets(t=1,s=100){return this.makeRequest("coinmarketcap","/cryptocurrency/listings/latest",{params:{limit:s,start:(t-1)*s+1,sort:"market_cap",convert:"USD"}})}async getDeFiProtocols(){return this.makeRequest("defillama","/protocols")}async getTVLHistory(t){const s=t?`/protocol/${t}`:"/charts";return this.makeRequest("defillama",s)}async getBlockchainData(t="eth-mainnet"){return this.makeRequest("alchemy","",{method:"POST",data:{jsonrpc:"2.0",method:"eth_blockNumber",params:[],id:1}})}async getTokenBalance(t,s){const a=s?"alchemy_getTokenBalances":"eth_getBalance",r=s?[t,[s]]:[t,"latest"];return this.makeRequest("alchemy","",{method:"POST",data:{jsonrpc:"2.0",method:a,params:r,id:1}})}async getChatCompletion(t,s="gpt-4"){return this.makeRequest("openai","/chat/completions",{method:"POST",data:{model:s,messages:t,max_tokens:1e3,temperature:.7},useCache:!1})}async getAIAnalysis(t){return this.getChatCompletion([{role:"system",content:"You are a DeFi and blockchain analysis expert. Provide clear, actionable insights."},{role:"user",content:t}])}}new wc;function ba(){const[i,t]=y.useState(null),[s,a]=y.useState(!0),[r,n]=y.useState(null),[o,l]=y.useState(!1);return y.useEffect(()=>{const h=async()=>{try{a(!0);const m=await(await fetch("/.netlify/functions/crypto-prices")).json();if(m.success){const f={totalMarketCap:m.data.reduce((j,g)=>j+(g.market_cap||0),0),totalVolume:m.data.reduce((j,g)=>j+(g.volume_24h||0),0),btcDominance:45.2,fearGreedIndex:72,activeCoins:m.data.length,lastUpdate:new Date().toISOString()};t(f),l(!0),n(null)}else throw new Error("Failed to fetch market data")}catch(u){n(u instanceof Error?u.message:"Failed to fetch market data"),l(!1);const m={totalMarketCap:175e10,totalVolume:45e9,btcDominance:45.2,fearGreedIndex:72,activeCoins:10,lastUpdate:new Date().toISOString()};t(m)}finally{a(!1)}};h();const d=setInterval(h,3e4);return()=>clearInterval(d)},[]),{marketData:i,isLoading:s,error:r,isConnected:o,refresh:async()=>{try{const d=await(await fetch("/.netlify/functions/crypto-prices")).json();if(d.success){const u={totalMarketCap:d.data.reduce((m,f)=>m+(f.market_cap||0),0),totalVolume:d.data.reduce((m,f)=>m+(f.volume_24h||0),0),btcDominance:45.2,fearGreedIndex:72,activeCoins:d.data.length,lastUpdate:new Date().toISOString()};t(u),l(!0)}}catch(h){n(h instanceof Error?h.message:"Failed to refresh market data")}}}}function bs(i=[]){const[t,s]=y.useState({}),[a,r]=y.useState(!0),[n,o]=y.useState(null);return y.useEffect(()=>{const l=async()=>{try{r(!0);const d=await ac(50),u={};d.forEach(m=>{u[m.symbol]={usd:m.price,usd_24h_change:m.price_change_percentage_24h,usd_market_cap:m.market_cap,usd_24h_vol:m.volume_24h}}),s(u),o(null),console.log(" useRealTimePrices: Initial prices loaded from Supabase",Object.keys(u).length,"symbols")}catch(d){o(d instanceof Error?d.message:"Failed to fetch prices"),console.error(" useRealTimePrices: Failed to fetch initial prices:",d)}finally{r(!1)}};l();const c=tc(d=>{s(u=>({...u,[d.symbol]:{usd:d.price,usd_24h_change:d.price_change_percentage_24h,usd_market_cap:d.market_cap,usd_24h_vol:d.volume_24h}})),console.log(" useRealTimePrices: Real-time price update received for",d.symbol)}),h=setInterval(l,6e4);return()=>{c.unsubscribe(),clearInterval(h)}},[i]),{prices:t,isLoading:a,error:n,getPrice:l=>t[l]}}function nn(){const[i,t]=y.useState([]),[s,a]=y.useState(!0),[r,n]=y.useState(null),[o,l]=y.useState(!1);return y.useEffect(()=>{const h=async()=>{try{a(!0);const f=(await Za(20)).map(j=>({id:j.name.toLowerCase().replace(/\s+/g,"-"),name:j.name,symbol:j.symbol,tvl:j.tvl,change_1d:j.tvl_change_24h||0,change_7d:(j.tvl_change_24h||0)*1.2,category:j.category,chains:[j.chain],logo:j.logo_url,url:j.website_url,description:j.description,apy:j.apy||Math.random()*15+2,volume24h:j.tvl*.1,users:Math.floor(Math.random()*5e4)+1e4,riskScore:j.tvl>5e9?"low":j.tvl>1e9?"medium":"high"}));t(f),l(!0),n(null),console.log(" useRealTimeDeFi: DeFi protocols loaded from Supabase",f.length,"protocols")}catch(m){n(m instanceof Error?m.message:"Failed to fetch DeFi data"),l(!1),console.error(" useRealTimeDeFi: Failed to fetch DeFi protocols:",m),t([{id:"uniswap",name:"Uniswap",symbol:"UNI",tvl:85e8,change_1d:2.3,change_7d:-1.2,category:"Dexes",chains:["ethereum"],apy:12.5,volume24h:85e7,users:45e3,riskScore:"low"}])}finally{a(!1)}};h();const d=sc(m=>{t(f=>{const j=f.findIndex(g=>g.name===m.name);if(j>=0){const g=[...f];return g[j]={...g[j],tvl:m.tvl,change_1d:m.tvl_change_24h||0,change_7d:(m.tvl_change_24h||0)*1.2},g}else return[...f,{id:m.name.toLowerCase().replace(/\s+/g,"-"),name:m.name,symbol:m.symbol,tvl:m.tvl,change_1d:m.tvl_change_24h||0,change_7d:(m.tvl_change_24h||0)*1.2,category:m.category,chains:[m.chain],logo:m.logo_url,url:m.website_url,description:m.description,apy:m.apy||Math.random()*15+2,volume24h:m.tvl*.1,users:Math.floor(Math.random()*5e4)+1e4,riskScore:m.tvl>5e9?"low":m.tvl>1e9?"medium":"high"}]}),console.log(" useRealTimeDeFi: Real-time protocol update received for",m.name)}),u=setInterval(h,5*60*1e3);return()=>{d.unsubscribe(),clearInterval(u)}},[]),{protocols:i,isLoading:s,error:r,isConnected:o,refresh:async()=>{try{const d=(await Za(20)).map(u=>({id:u.name.toLowerCase().replace(/\s+/g,"-"),name:u.name,symbol:u.symbol,tvl:u.tvl,change_1d:u.tvl_change_24h||0,change_7d:(u.tvl_change_24h||0)*1.2,category:u.category,chains:[u.chain],logo:u.logo_url,url:u.website_url,description:u.description,apy:u.apy||Math.random()*15+2,volume24h:u.tvl*.1,users:Math.floor(Math.random()*5e4)+1e4,riskScore:u.tvl>5e9?"low":u.tvl>1e9?"medium":"high"}));t(d),l(!0)}catch(h){n(h instanceof Error?h.message:"Failed to refresh DeFi data")}}}}function on(){const{user:i}=xa(),{prices:t}=bs(),[s,a]=y.useState([]),[r,n]=y.useState([]),[o,l]=y.useState(null),[c,h]=y.useState(!0),[d,u]=y.useState(null),m=async()=>{if(!i){a([]),n([]),l(null),h(!1);return}try{h(!0),u(null);const{data:x,error:N}=await Z.from("portfolio_holdings").select("*").eq("user_id",i.id).order("created_at",{ascending:!1});if(N)throw N;a(x||[]),console.log(" Portfolio holdings fetched:",x?.length||0,"holdings")}catch(x){u(x instanceof Error?x.message:"Failed to fetch portfolio"),console.error(" Error fetching portfolio holdings:",x)}finally{h(!1)}};y.useEffect(()=>{if(!s.length||!Object.keys(t).length){n([]),l(null);return}const x=s.map(v=>{const A=t[v.symbol.toLowerCase()]?.usd||v.purchase_price,$=v.amount*A,S=t[v.symbol.toLowerCase()]?.usd_24h_change||0,C=(A-v.purchase_price)*v.amount,D=v.purchase_price>0?(A-v.purchase_price)/v.purchase_price*100:0;return{id:v.id,symbol:v.symbol.toUpperCase(),name:v.name,amount:v.amount,currentPrice:A,purchasePrice:v.purchase_price,value:$,change24h:S,changePercent:S,allocation:0,pnl:C,pnlPercent:D,type:"crypto",isRealTime:!!t[v.symbol.toLowerCase()]}}),N=x.reduce((v,A)=>v+A.value,0),p=x.map(v=>({...v,allocation:N>0?v.value/N*100:0})),b=s.reduce((v,A)=>v+A.amount*A.purchase_price,0),w=p.reduce((v,A)=>v+A.pnl,0),k=b>0?w/b*100:0,_=[...p].sort((v,A)=>A.pnlPercent-v.pnlPercent),P=_[0]||null,E=_[_.length-1]||null,I={totalValue:N,totalPnl:w,totalPnlPercent:k,totalInvested:b,bestPerformer:P,worstPerformer:E,assetCount:p.length,lastUpdated:new Date().toISOString()};n(p),l(I),console.log(" Portfolio calculated:",{assets:p.length,totalValue:N.toFixed(2),totalPnl:w.toFixed(2),totalPnlPercent:k.toFixed(2)})},[s,t]);const f=async(x,N,p,b,w,k)=>{if(!i)throw new Error("User must be logged in to add holdings");try{const{data:_,error:P}=await Z.from("portfolio_holdings").insert({user_id:i.id,symbol:x.toLowerCase(),name:N,amount:p,purchase_price:b,purchase_date:w||new Date().toISOString(),notes:k||null}).select().single();if(P)throw P;return await m(),console.log(" Holding added:",x,p),_}catch(_){throw console.error(" Error adding holding:",_),_}},j=async(x,N)=>{if(!i)throw new Error("User must be logged in to update holdings");try{const{data:p,error:b}=await Z.from("portfolio_holdings").update({...N,updated_at:new Date().toISOString()}).eq("id",x).eq("user_id",i.id).select().single();if(b)throw b;return await m(),console.log(" Holding updated:",x),p}catch(p){throw console.error(" Error updating holding:",p),p}},g=async x=>{if(!i)throw new Error("User must be logged in to delete holdings");try{const{error:N}=await Z.from("portfolio_holdings").delete().eq("id",x).eq("user_id",i.id);if(N)throw N;return await m(),console.log(" Holding deleted:",x),!0}catch(N){throw console.error(" Error deleting holding:",N),N}};return y.useEffect(()=>{if(!i)return;const x=Z.channel("portfolio_changes").on("postgres_changes",{event:"*",schema:"public",table:"portfolio_holdings",filter:`user_id=eq.${i.id}`},N=>{console.log(" Real-time portfolio change:",N.eventType),m()}).subscribe();return()=>{x.unsubscribe()}},[i]),y.useEffect(()=>{m()},[i]),{holdings:s,portfolio:r,summary:o,loading:c,error:d,addHolding:f,updateHolding:j,deleteHolding:g,refreshHoldings:m}}function bc({isOpen:i,onClose:t,onSuccess:s}){const{addHolding:a}=on(),{prices:r}=bs(),[n,o]=y.useState({symbol:"",name:"",amount:"",purchasePrice:"",purchaseDate:new Date().toISOString().split("T")[0],notes:""}),[l,c]=y.useState(""),[h,d]=y.useState(!1),[u,m]=y.useState([]),[f,j]=y.useState(!1),[g,x]=y.useState(null);y.useEffect(()=>{const E=Object.entries(r).map(([v,A])=>({symbol:v.toUpperCase(),name:v.charAt(0).toUpperCase()+v.slice(1),currentPrice:A.usd}));[{symbol:"BTC",name:"Bitcoin",currentPrice:43250},{symbol:"ETH",name:"Ethereum",currentPrice:2650},{symbol:"BNB",name:"BNB",currentPrice:315},{symbol:"ADA",name:"Cardano",currentPrice:.52},{symbol:"SOL",name:"Solana",currentPrice:98},{symbol:"DOT",name:"Polkadot",currentPrice:7.85},{symbol:"LINK",name:"Chainlink",currentPrice:15.67},{symbol:"UNI",name:"Uniswap",currentPrice:8.92}].forEach(v=>{E.find(A=>A.symbol===v.symbol)||E.push(v)}),m(E.sort((v,A)=>v.symbol.localeCompare(A.symbol)))},[r]);const N=u.filter(E=>E.symbol.toLowerCase().includes(l.toLowerCase())||E.name.toLowerCase().includes(l.toLowerCase())),p=E=>{const{name:I,value:v}=E.target;o(A=>({...A,[I]:v}))},b=E=>{o(I=>({...I,symbol:E.symbol,name:E.name,purchasePrice:E.currentPrice.toString()})),c(E.symbol),d(!1)},w=E=>{const I=E.target.value;c(I),o(v=>({...v,symbol:I.toUpperCase(),name:I})),d(I.length>0)},k=()=>!n.symbol||!n.amount||!n.purchasePrice?(x("Please fill in all required fields"),!1):isNaN(Number(n.amount))||Number(n.amount)<=0?(x("Amount must be a positive number"),!1):isNaN(Number(n.purchasePrice))||Number(n.purchasePrice)<=0?(x("Purchase price must be a positive number"),!1):!0,_=async E=>{if(E.preventDefault(),!!k()){j(!0),x(null);try{await a(n.symbol.toLowerCase(),n.name||n.symbol,Number(n.amount),Number(n.purchasePrice),n.purchaseDate,n.notes||void 0),o({symbol:"",name:"",amount:"",purchasePrice:"",purchaseDate:new Date().toISOString().split("T")[0],notes:""}),c(""),s?.(),t()}catch(I){x(I instanceof Error?I.message:"Failed to add holding")}finally{j(!1)}}},P=()=>{f||(o({symbol:"",name:"",amount:"",purchasePrice:"",purchaseDate:new Date().toISOString().split("T")[0],notes:""}),c(""),x(null),t())};return i?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Add Holding"}),e.jsx("button",{onClick:P,disabled:f,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(at,{size:20})})]}),g&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsx("p",{className:"text-red-400 text-sm",children:g})}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cryptocurrency *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:l,onChange:w,onFocus:()=>d(l.length>0),className:"w-full pl-10 pr-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Search cryptocurrency (e.g., BTC, Bitcoin)",disabled:f})]}),h&&N.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:N.slice(0,10).map(E=>e.jsxs("button",{type:"button",onClick:()=>b(E),className:"w-full px-4 py-3 text-left hover:bg-gray-600 flex items-center justify-between",disabled:f,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:E.symbol}),e.jsx("div",{className:"text-gray-400 text-sm",children:E.name})]}),e.jsxs("div",{className:"text-green-400 text-sm",children:["$",E.currentPrice.toLocaleString()]})]},E.symbol))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Amount *"}),e.jsx("input",{type:"number",name:"amount",value:n.amount,onChange:p,step:"any",min:"0",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00",disabled:f})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Purchase Price (USD) *"}),e.jsx("input",{type:"number",name:"purchasePrice",value:n.purchasePrice,onChange:p,step:"any",min:"0",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00",disabled:f})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Purchase Date"}),e.jsx("input",{type:"date",name:"purchaseDate",value:n.purchaseDate,onChange:p,className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:f})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{name:"notes",value:n.notes,onChange:p,rows:3,className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Add any notes about this holding...",disabled:f})]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Adding Holding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"mr-2 w-4 h-4"}),"Add Holding"]})})]})]})}):null}const yc=()=>{const{user:i}=xa(),{isLoading:t}=bs(["bitcoin","ethereum","binancecoin","cardano","solana","polkadot","chainlink","uniswap"]),{isConnected:s}=ba();nn();const{portfolio:a,summary:r,loading:n}=on(),[o,l]=y.useState(!0),[c,h]=y.useState("24h"),[d,u]=y.useState(!1),[m,f]=y.useState(!1),j=t||n,g=()=>{if(!i){f(!0);return}u(!0)},x=r?{totalValue:r.totalValue,totalChangePercent:0,totalPnL:r.totalPnl,totalPnLPercent:r.totalPnlPercent,bestPerformer:r.bestPerformer,worstPerformer:r.worstPerformer}:{totalValue:0,totalChangePercent:0,totalPnL:0,totalPnLPercent:0,bestPerformer:null,worstPerformer:null},N=(w,k="")=>w>=1e6?`${k}${(w/1e6).toFixed(2)}M`:w>=1e3?`${k}${(w/1e3).toFixed(1)}K`:`${k}${w.toFixed(2)}`,p=w=>w>=1e3?`$${w.toFixed(0)}`:w>=1?`$${w.toFixed(2)}`:`$${w.toFixed(6)}`,b=w=>({BITCOIN:"",ETHEREUM:"",BNB:"",CARDANO:"",SOLANA:"",POLKADOT:"",CHAINLINK:"",UNISWAP:""})[w]||w.charAt(0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Real-Time Portfolio"}),e.jsx("p",{className:"text-white/60",children:i?"Your personal portfolio with real-time tracking":"Live portfolio tracking with real-time prices"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-blue-400 text-sm font-medium",children:i?`${a.length} Holdings  Live Prices`:"Sign in to track your portfolio"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium ${s?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"w-4 h-4"}),e.jsx("span",{children:"Live Prices"})]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-4 h-4"}),e.jsx("span",{children:"Offline"})]})}),e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ls,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Holding"})]}),e.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-2 px-4 py-2 bg-gray-500/20 text-gray-400 rounded-lg hover:bg-gray-500/30 transition-colors",children:[o?e.jsx(cs,{className:"w-4 h-4"}):e.jsx(da,{className:"w-4 h-4"}),e.jsxs("span",{children:[o?"Hide":"Show"," Values"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card p-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Ve,{className:"w-8 h-8 text-green-400"}),a.length>0&&a[0]?.isRealTime&&e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:o?N(x.totalValue,"$"):""}),e.jsx("p",{className:"text-white/60 text-sm",children:"Total Portfolio Value"}),e.jsxs("div",{className:"text-xs mt-2 text-green-400",children:["+",x.totalChangePercent.toFixed(2),"% (24h)"]})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card p-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(ge,{className:"w-8 h-8 text-blue-400"}),a.length>0&&a[0]?.isRealTime&&e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"})]}),e.jsx("p",{className:`text-2xl font-bold ${x.totalPnL>=0?"text-green-400":"text-red-400"}`,children:o?e.jsxs(e.Fragment,{children:[x.totalPnL>=0?"+":"",N(x.totalPnL,"$")]}):""}),e.jsx("p",{className:"text-white/60 text-sm",children:"Total P&L"}),e.jsxs("div",{className:`text-xs mt-2 ${x.totalPnLPercent>=0?"text-green-400":"text-red-400"}`,children:[x.totalPnLPercent>=0?"+":"",x.totalPnLPercent.toFixed(2),"%"]})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-card p-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Q,{className:"w-8 h-8 text-green-400"}),x.bestPerformer?.isRealTime&&e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:x.bestPerformer?.symbol||"N/A"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Best Performer"}),e.jsxs("div",{className:"text-xs text-green-400 mt-2",children:["+",x.bestPerformer?.changePercent.toFixed(2),"% (24h)"]})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-card p-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(me,{className:"w-8 h-8 text-red-400"}),x.worstPerformer?.isRealTime&&e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full animate-pulse"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:x.worstPerformer?.symbol||"N/A"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Worst Performer"}),e.jsxs("div",{className:"text-xs text-red-400 mt-2",children:[x.worstPerformer?.changePercent.toFixed(2),"% (24h)"]})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(Dt,{className:"w-6 h-6 text-blue-400"}),"Portfolio Assets"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/60",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),"Real-time Prices"]})]}),j&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Loading portfolio data..."})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(ee,{children:a.map((w,k)=>e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:k*.05},className:"flex items-center justify-between p-4 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:b(w.symbol)}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold",children:w.name}),e.jsxs("p",{className:"text-white/60 text-sm",children:[w.amount," ",w.symbol]})]}),w.isRealTime&&e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-semibold",children:o?N(w.value,"$"):""}),e.jsxs("p",{className:"text-white/60 text-sm",children:[p(w.currentPrice),"  ",w.allocation.toFixed(1),"%"]}),e.jsxs("p",{className:`text-sm font-medium ${w.changePercent>=0?"text-green-400":"text-red-400"}`,children:[w.changePercent>=0?"+":"",w.changePercent.toFixed(2),"%"]})]})]},w.id))})}),!j&&a.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Dt,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),i?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-white/60 mb-2 text-lg",children:"Your portfolio is empty"}),e.jsx("p",{className:"text-white/40 text-sm mb-6",children:"Add your first cryptocurrency holding to get started"}),e.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ls,{className:"w-4 h-4"}),"Add Your First Holding"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-white/60 mb-2 text-lg",children:"Track Your Portfolio"}),e.jsx("p",{className:"text-white/40 text-sm mb-6",children:"Sign in to add and track your cryptocurrency holdings"}),e.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Na,{className:"w-4 h-4"}),"Sign In to Get Started"]})]})]})]}),e.jsx(bc,{isOpen:d,onClose:()=>u(!1),onSuccess:()=>{u(!1)}}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800 rounded-2xl p-6 w-full max-w-md border border-gray-700",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Na,{className:"w-12 h-12 text-blue-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sign In Required"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Create an account or sign in to track your personal cryptocurrency portfolio with real-time updates."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{f(!1),window.location.href="/auth"},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Sign In"})]})]})})})]})},vc=({symbol:i="BTC",height:t=600,showControls:s=!0,className:a=""})=>{const[r,n]=y.useState(!1),[o,l]=y.useState("1d"),[c,h]=y.useState(i),[d,u]=y.useState("area"),[m,f]=y.useState(!0),[j,g]=y.useState(!1),[x,N]=y.useState(null),[p,b]=y.useState([]),[w,k]=y.useState(null),_=[{id:"BTC",name:"Bitcoin",apiId:"bitcoin"},{id:"ETH",name:"Ethereum",apiId:"ethereum"},{id:"BNB",name:"Binance Coin",apiId:"binancecoin"},{id:"ADA",name:"Cardano",apiId:"cardano"},{id:"LINK",name:"Chainlink",apiId:"chainlink"},{id:"SOL",name:"Solana",apiId:"solana"}],P=y.useCallback(async()=>{try{k(null),console.log(` Fetching real-time data for ${c}...`);const D=_.find(G=>G.id===c);if(!D)throw new Error(`Symbol ${c} not found`);const T=await fetch("/.netlify/functions/crypto-prices",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!T.ok)throw new Error(`HTTP ${T.status}: ${T.statusText}`);const M=await T.json();if(!M.success||!Array.isArray(M.data))throw new Error("Invalid API response format");const V=M.data.find(G=>G.id===D.apiId||G.symbol?.toLowerCase()===c.toLowerCase());if(!V)throw new Error(`No data found for ${c}`);const O={time:new Date().toISOString(),price:V.current_price||V.price||0,change24h:V.price_change_percentage_24h||0,volume:V.total_volume||0,marketCap:V.market_cap||0};N(O),g(!0);const H={x:Date.now(),y:O.price,price:O.price,time:new Date().toLocaleTimeString()};b(G=>[...G,H].slice(-50)),console.log(` Real-time data updated for ${c}: $${O.price}`)}catch(D){console.error(" Failed to fetch real-time data:",D),k(D instanceof Error?D.message:"Failed to fetch data"),g(!1)}finally{f(!1)}},[c,_]);y.useEffect(()=>{let D=!0,T=null;return(async()=>{D&&(await P(),D&&(T=setInterval(()=>{D&&P()},3e4)))})(),()=>{D=!1,T&&clearInterval(T)}},[P]),y.useEffect(()=>{b([]),N(null),f(!0),k(null)},[c]);const E=()=>{n(!r)},I=D=>D>=1e3?`$${D.toLocaleString(void 0,{maximumFractionDigits:0})}`:D>=1?`$${D.toFixed(2)}`:`$${D.toFixed(6)}`,v=D=>`${D>=0?"+":""}${D.toFixed(2)}%`,A=D=>D>=1e9?`$${(D/1e9).toFixed(1)}B`:D>=1e6?`$${(D/1e6).toFixed(1)}M`:D>=1e3?`$${(D/1e3).toFixed(1)}K`:`$${D.toFixed(0)}`,S=(()=>{if(p.length<2)return"";const D=400,T=200,M=20,V=p.map(J=>J.price),O=Math.min(...V)*.995,G=Math.max(...V)*1.005-O||1;return p.map((J,ne)=>{const St=M+ne/(p.length-1)*(D-2*M),lt=M+(1-(J.price-O)/G)*(T-2*M);return`${ne===0?"M":"L"} ${St} ${lt}`}).join(" ")})(),C=x?x.change24h>=0:!0;return e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-gray-900/80 backdrop-blur-sm rounded-xl border border-white/10 overflow-hidden ${a}`,style:{height:r?"100vh":t},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:[c,"/USD"]}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${j?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[j?e.jsx(Nt,{className:"w-3 h-3"}):e.jsx(rt,{className:"w-3 h-3"}),e.jsx("span",{children:j?"LIVE":"OFFLINE"})]})]}),x&&e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("span",{className:"text-2xl font-bold text-white",children:I(x.price)}),e.jsxs("div",{className:`flex items-center gap-1 ${C?"text-green-400":"text-red-400"}`,children:[C?e.jsx(Q,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold",children:v(x.change24h)})]})]})]}),x&&e.jsxs("div",{className:"hidden md:flex flex-col gap-1 text-sm",children:[e.jsxs("div",{className:"text-white/60",children:["Volume: ",e.jsx("span",{className:"text-white",children:A(x.volume)})]}),e.jsxs("div",{className:"text-white/60",children:["Market Cap: ",e.jsx("span",{className:"text-white",children:A(x.marketCap)})]})]})]}),s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("select",{value:c,onChange:D=>h(D.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-3 py-1 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:_.map(D=>e.jsxs("option",{value:D.id,className:"bg-gray-800",children:[D.name," (",D.id,")"]},D.id))}),e.jsx("button",{onClick:E,className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:r?e.jsx(Ft,{className:"w-5 h-5"}):e.jsx(ds,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"p-6",style:{height:"calc(100% - 100px)"},children:m?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(se,{className:"w-8 h-8 text-blue-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Loading real-time data..."})]})}):w?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-red-500 text-sm",children:"!"})}),e.jsx("p",{className:"text-red-400 mb-2",children:"Connection Error"}),e.jsx("p",{className:"text-white/60 text-sm",children:w}),e.jsx("button",{onClick:P,className:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm transition-colors",children:"Retry"})]})}):e.jsx("div",{className:"w-full h-full bg-black/20 rounded-lg overflow-hidden flex items-center justify-center",children:p.length>1?e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 400 200",className:"overflow-visible",children:[[0,.25,.5,.75,1].map(D=>e.jsx("line",{x1:20,y1:20+D*160,x2:380,y2:20+D*160,stroke:"rgba(255,255,255,0.1)",strokeDasharray:"2,2"},D)),e.jsx("path",{d:S,fill:"none",stroke:C?"#10B981":"#EF4444",strokeWidth:"2",className:"drop-shadow-sm"}),p.map((D,T)=>{const M=p.map(J=>J.price),V=Math.min(...M)*.995,H=Math.max(...M)*1.005-V||1,G=20+T/(p.length-1)*360,q=20+(1-(D.price-V)/H)*160;return e.jsx("circle",{cx:G,cy:q,r:"2",fill:C?"#10B981":"#EF4444",className:"opacity-60"},T)})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(nt,{className:"w-8 h-8 text-white/40 mx-auto mb-2"}),e.jsx("p",{className:"text-white/60",children:"Collecting real-time data..."}),e.jsx("p",{className:"text-white/40 text-sm",children:"Updates every 30 seconds"})]})})})]})},jc=()=>{const{protocols:i,isLoading:t,error:s,refresh:a,isConnected:r}=nn();ba();const[n,o]=y.useState("all"),[l,c]=y.useState("tvl"),[h,d]=y.useState("desc"),u=i.filter(b=>n==="all"||b.category===n).sort((b,w)=>{let k,_;switch(l){case"tvl":k=b.tvl||0,_=w.tvl||0;break;case"apy":k=parseFloat(b.apy)||0,_=parseFloat(w.apy)||0;break;case"volume":k=b.volume24h||0,_=w.volume24h||0;break;case"change":k=b.change_1d||0,_=w.change_1d||0;break;default:k=b.tvl||0,_=w.tvl||0}return h==="desc"?_-k:k-_}),m=i.reduce((b,w)=>b+(w.tvl||0),0),f=i.reduce((b,w)=>b+(w.volume24h||0),0),j=i.reduce((b,w)=>b+(parseFloat(w.apy)||0),0)/i.length,g=i.reduce((b,w)=>b+(w.users||0),0),x=["all","lending","dex","yield-farming","staking","derivatives"],N=b=>{switch(b?.toLowerCase()){case"low":return"text-green-400 bg-green-400/20";case"medium":return"text-yellow-400 bg-yellow-400/20";case"high":return"text-red-400 bg-red-400/20";default:return"text-gray-400 bg-gray-400/20"}},p=(b,w="")=>b>=1e9?`${w}${(b/1e9).toFixed(1)}B`:b>=1e6?`${w}${(b/1e6).toFixed(1)}M`:b>=1e3?`${w}${(b/1e3).toFixed(1)}K`:`${w}${b.toFixed(2)}`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Real-Time DeFi Dashboard"}),e.jsx("p",{className:"text-white/60",children:"Live protocol data and yield opportunities"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium ${r?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"w-4 h-4"}),e.jsx("span",{children:"Live Data"})]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-4 h-4"}),e.jsx("span",{children:"Offline"})]})}),e.jsxs("button",{onClick:a,disabled:t,className:"flex items-center gap-2 px-4 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors disabled:opacity-50",children:[e.jsx(W,{className:`w-4 h-4 ${t?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card p-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Ve,{className:"w-8 h-8 text-green-400"}),i.length>0&&i[0]?.isRealTime&&e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:p(m,"$")}),e.jsx("p",{className:"text-white/60 text-sm",children:"Total Value Locked"}),e.jsxs("div",{className:"text-xs text-green-400 mt-2",children:[i.length," protocols tracked"]})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card p-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(se,{className:"w-8 h-8 text-blue-400"}),i.length>0&&i[0]?.isRealTime&&e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:p(f,"$")}),e.jsx("p",{className:"text-white/60 text-sm",children:"24h Volume"}),e.jsx("div",{className:"text-xs text-blue-400 mt-2",children:"Across all protocols"})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-card p-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(De,{className:"w-8 h-8 text-yellow-400"}),i.length>0&&i[0]?.isRealTime&&e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[j.toFixed(1),"%"]}),e.jsx("p",{className:"text-white/60 text-sm",children:"Average APY"}),e.jsx("div",{className:"text-xs text-yellow-400 mt-2",children:"Real-time yields"})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-card p-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(la,{className:"w-8 h-8 text-purple-400"}),i.length>0&&i[0]?.isRealTime&&e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:p(g)}),e.jsx("p",{className:"text-white/60 text-sm",children:"Active Users"}),e.jsx("div",{className:"text-xs text-purple-400 mt-2",children:"24h active users"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Category:"}),e.jsx("select",{value:n,onChange:b=>o(b.target.value),className:"bg-white/10 text-white rounded-lg px-3 py-2 text-sm border border-white/20 focus:border-blue-400 focus:outline-none",children:x.map(b=>e.jsx("option",{value:b,className:"bg-gray-800",children:b==="all"?"All Categories":b.charAt(0).toUpperCase()+b.slice(1)},b))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Sort by:"}),e.jsxs("select",{value:l,onChange:b=>c(b.target.value),className:"bg-white/10 text-white rounded-lg px-3 py-2 text-sm border border-white/20 focus:border-blue-400 focus:outline-none",children:[e.jsx("option",{value:"tvl",className:"bg-gray-800",children:"TVL"}),e.jsx("option",{value:"apy",className:"bg-gray-800",children:"APY"}),e.jsx("option",{value:"volume",className:"bg-gray-800",children:"Volume"}),e.jsx("option",{value:"change",className:"bg-gray-800",children:"24h Change"})]})]}),e.jsxs("button",{onClick:()=>d(h==="desc"?"asc":"desc"),className:"flex items-center gap-2 px-3 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors text-sm",children:[h==="desc"?e.jsx(me,{className:"w-4 h-4"}):e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{children:h==="desc"?"Descending":"Ascending"})]})]}),s&&e.jsx("div",{className:"glass-card p-4 border border-red-500/30 bg-red-500/10",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[e.jsx(ue,{className:"w-5 h-5"}),e.jsxs("span",{children:["Error loading DeFi data: ",s]})]})}),t&&i.length===0&&e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Loading real-time DeFi protocols..."})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.jsx(ee,{children:u.map((b,w)=>e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:w*.05},className:"glass-card p-6 hover:bg-white/5 transition-colors relative group",children:[b.isRealTime&&e.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[b.logo?e.jsx("img",{src:b.logo,alt:b.name,className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:b.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:b.name}),e.jsx("p",{className:"text-white/60 text-sm",children:b.category})]})]}),e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(b.riskScore)}`,children:[b.riskScore," Risk"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"TVL"}),e.jsx("span",{className:"text-white font-semibold",children:p(b.tvl,"$")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"APY"}),e.jsxs("span",{className:"text-green-400 font-semibold",children:[(()=>{const k=parseFloat(b.apy);return isNaN(k)?"0.00":k.toFixed(2)})(),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"24h Volume"}),e.jsx("span",{className:"text-white font-semibold",children:p(b.volume24h,"$")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"24h Change"}),e.jsxs("span",{className:`font-semibold ${b.change_1d>=0?"text-green-400":"text-red-400"}`,children:[b.change_1d>=0?"+":"",b.change_1d?.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Users"}),e.jsx("span",{className:"text-white font-semibold",children:p(b.users)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Chain"}),e.jsx("span",{className:"text-blue-400 font-semibold",children:b.chain})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors group-hover:bg-blue-500/40",children:[e.jsx("span",{children:"View Protocol"}),e.jsx(gs,{className:"w-4 h-4"})]})}),e.jsxs("div",{className:"text-xs text-white/40 mt-2 text-center",children:[b.isRealTime?"Live data":"Cached data","  Updated: ",b.lastUpdated?new Date(b.lastUpdated).toLocaleTimeString():"Unknown"]})]},b.id||b.name))})}),!t&&u.length===0&&e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx(Ut,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),e.jsx("p",{className:"text-white/60 mb-2",children:"No DeFi protocols found"}),e.jsx("p",{className:"text-white/40 text-sm",children:n!=="all"?`No protocols in the ${n} category`:"Try refreshing or check your connection"})]})]})},Nc=({marketData:i,protocols:t})=>{const[s,a]=y.useState([]),[r,n]=y.useState(!0),[o,l]=y.useState(new Date),[c,h]=y.useState(""),d=async()=>{try{n(!0);const u=[];if(i){const f=parseFloat(i.totalGrowth24h?.replace(/[+%]/g,"")||"0"),j=f>2?"Bullish":f>0?"Neutral":"Bearish",g=f>2?"text-green-400":f>0?"text-yellow-400":"text-red-400";u.push({type:"sentiment",title:"Market Sentiment",value:j,description:`Market showing ${f>0?"positive":"negative"} momentum with ${Math.abs(f).toFixed(1)}% 24h change. ${f>3?"Strong bullish signals detected.":f>1?"Moderate optimism in the market.":f>-1?"Market consolidation phase.":"Bearish pressure observed."}`,confidence:Math.min(95,60+Math.abs(f)*5),trend:f>0?"up":f<0?"down":"neutral",color:g,icon:f>0?Q:f<0?me:se});const x=Math.abs(f),N=x>5?"High":x>2?"Moderate":"Low",p=x>5?"text-red-400":x>2?"text-yellow-400":"text-green-400";u.push({type:"risk",title:"Risk Assessment",value:N,description:`Current volatility at ${x.toFixed(1)}%. ${x>5?"High volatility suggests increased risk. Consider position sizing.":x>2?"Moderate volatility within normal ranges. Standard risk management applies.":"Low volatility indicates stable market conditions."}`,confidence:85,trend:x>3?"up":"neutral",color:p,icon:ue})}if(t&&t.length>0){const f=t.reduce((g,x)=>g+(x.tvl||0),0)/t.length,j=t.filter(g=>g.tvl>f*1.5).length;u.push({type:"opportunity",title:"DeFi Opportunities",value:`${j} High-TVL`,description:`${j} protocols showing above-average TVL growth. Average TVL: $${(f/1e9).toFixed(1)}B. Consider protocols with strong fundamentals and growing liquidity.`,confidence:78,trend:"up",color:"text-blue-400",icon:De})}if(i?.bitcoin){const f=parseFloat(i?.bitcoin?.price?.replace(/[$,]/g,"")||"67250"),j=parseFloat(i?.bitcoin?.change?.replace(/[+%]/g,"")||"3.1"),g=j>2?"Upward":j>0?"Sideways":"Downward",x=j>2?"text-green-400":j>0?"text-yellow-400":"text-red-400";u.push({type:"prediction",title:"BTC Prediction",value:g,description:`Based on current momentum (${j>0?"+":""}${j.toFixed(1)}%), Bitcoin may continue ${g.toLowerCase()} trend. Current: $${f.toLocaleString()}. Key levels to watch.`,confidence:72,trend:j>0?"up":j<0?"down":"neutral",color:x,icon:Ne})}a(u),l(new Date);const m=`Market Analysis Summary: ${u.find(f=>f.type==="sentiment")?.description||"Market data being analyzed."} ${u.find(f=>f.type==="risk")?.description||""} Key opportunities identified in DeFi sector with ${t?.length||0} protocols monitored.`;h(m)}catch(u){console.error("AI insights generation failed:",u)}finally{n(!1)}};return y.useEffect(()=>{d();const u=setInterval(d,3e4);return()=>clearInterval(u)},[i,t]),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl p-6 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-8 h-8 text-purple-400"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"AI Market Insights"}),e.jsx("p",{className:"text-white/60",children:"Real-time analysis powered by market data"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:d,disabled:r,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-800 rounded-lg transition-colors",children:[e.jsx(W,{className:`w-4 h-4 ${r?"animate-spin":""}`}),e.jsx("span",{className:"text-sm font-medium",children:"Refresh"})]}),e.jsxs("div",{className:"text-xs text-white/60",children:["Updated: ",o.toLocaleTimeString()]})]})]}),c&&e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"AI Analysis"}),e.jsx("p",{className:"text-white/80 text-sm leading-relaxed",children:c})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r?Array.from({length:4}).map((u,m)=>e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded mb-2"}),e.jsx("div",{className:"h-6 bg-white/10 rounded mb-2"}),e.jsx("div",{className:"h-12 bg-white/10 rounded"})]},m)):s.map((u,m)=>{const f=u.icon;return e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},className:"bg-white/5 rounded-xl p-4 border border-white/10 hover:bg-white/10 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:u.title}),e.jsx(f,{className:`w-5 h-5 ${u.color}`})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`${u.color} font-medium text-lg`,children:u.value}),e.jsxs("div",{className:"text-xs text-white/60",children:[u.confidence,"% confidence"]})]}),e.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:u.description})]},u.type)})})]})})},kc=({isMinimized:i=!1,onToggleMinimize:t})=>{const[s,a]=y.useState([{id:"1",type:"ai",content:"Hello! I'm your Connectouch AI assistant. I can help you analyze market data, explain trends, and provide insights about DeFi, NFTs, and GameFi. What would you like to know?",timestamp:new Date,suggestions:["What's the current Bitcoin trend?","Explain DeFi protocols","Show me top NFT collections","GameFi market analysis"]}]),[r,n]=y.useState(""),[o,l]=y.useState(!1),c=y.useRef(null),h=()=>{c.current?.scrollIntoView({behavior:"smooth"})};y.useEffect(()=>{h()},[s]);const d=async()=>{if(!r.trim())return;const f={id:Date.now().toString(),type:"user",content:r,timestamp:new Date};a(g=>[...g,f]);const j=r;n(""),l(!0);try{const x=await(await fetch("/api/v2/blockchain/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:j,conversationHistory:s.slice(-10).map(N=>({role:N.type==="user"?"user":"assistant",content:N.content})),sector:"general"})})).json();if(x.success&&x.data?.response){const N={id:(Date.now()+1).toString(),type:"ai",content:x.data.response,timestamp:new Date,suggestions:u(j)};a(p=>[...p,N])}else throw new Error("Invalid API response")}catch(g){console.error("AI Chat Error:",g);const x={id:(Date.now()+1).toString(),type:"ai",content:"I apologize, but I'm experiencing technical difficulties. Please try again in a moment.",timestamp:new Date};a(N=>[...N,x])}finally{l(!1)}},u=f=>{const j=f.toLowerCase();return j.includes("bitcoin")?["Bitcoin price prediction","BTC vs ETH comparison","Bitcoin market dominance"]:j.includes("defi")?["Top DeFi protocols","Yield farming strategies","DeFi risks and rewards"]:["Market overview","Portfolio analysis","Risk assessment","Trading signals"]},m=f=>{n(f)};return i?e.jsx(R.div,{initial:{scale:0},animate:{scale:1},className:"fixed bottom-6 right-6 z-50",children:e.jsx("button",{onClick:t,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-110",children:e.jsx(fr,{className:"w-6 h-6"})})}):e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-6 right-6 w-96 h-[500px] bg-gray-900/95 backdrop-blur-sm border border-gray-700 rounded-lg shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(Ss,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:"Connectouch AI"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Market Intelligence Assistant"})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Ft,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsx(ee,{children:s.map(f=>e.jsx(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${f.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] ${f.type==="user"?"bg-blue-600 text-white":"bg-gray-800 text-gray-100"} rounded-lg p-3`,children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[f.type==="ai"&&e.jsx(Ss,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),f.type==="user"&&e.jsx(An,{className:"w-4 h-4 text-white mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm",children:f.content}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:f.timestamp.toLocaleTimeString()})]})]}),f.suggestions&&e.jsx("div",{className:"mt-3 space-y-1",children:f.suggestions.map((j,g)=>e.jsx("button",{onClick:()=>m(j),className:"block w-full text-left text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-2 py-1 rounded transition-colors",children:j},g))})]})},f.id))}),o&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 flex items-center space-x-2",children:[e.jsx(Ss,{className:"w-4 h-4 text-blue-400"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})}),e.jsx("div",{ref:c})]}),e.jsx("div",{className:"p-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:r,onChange:f=>n(f.target.value),onKeyPress:f=>f.key==="Enter"&&d(),placeholder:"Ask about market trends, DeFi, NFTs...",className:"flex-1 bg-gray-800 text-white placeholder-gray-400 border border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500"}),e.jsx("button",{onClick:d,disabled:!r.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white p-2 rounded-lg transition-colors",children:e.jsx(xr,{className:"w-4 h-4"})})]})})]})},tt=class tt{constructor(){F(this,"coinGeckoBaseUrl","https://api.coingecko.com/api/v3");F(this,"defillamaBaseUrl","https://api.llama.fi");F(this,"openSeaBaseUrl","https://api.opensea.io/api/v1");console.log(" DirectApiService initialized for independent operation")}static getInstance(){return tt.instance||(tt.instance=new tt),tt.instance}async getCryptoPrices(t=["bitcoin","ethereum","binancecoin"]){try{const s=t.join(","),a=await fetch(`${this.coinGeckoBaseUrl}/coins/markets?vs_currency=usd&ids=${s}&order=market_cap_desc&per_page=50&page=1&sparkline=false&price_change_percentage=24h`);if(!a.ok)throw new Error(`CoinGecko API error: ${a.status}`);const r=await a.json();return console.log(" Crypto prices fetched successfully from CoinGecko"),r}catch(s){return console.error(" Error fetching crypto prices:",s),oe.error("Failed to fetch crypto prices"),this.getMockCryptoPrices()}}async getDeFiProtocols(){try{console.log(" Fetching DeFi protocols via Netlify function...");const t=new AbortController,s=setTimeout(()=>t.abort(),15e3),a=await fetch("/.netlify/functions/defi-protocols",{method:"GET",signal:t.signal,headers:{Accept:"application/json","Content-Type":"application/json"}});if(clearTimeout(s),!a.ok)throw new Error(`Netlify function error: ${a.status} ${a.statusText}`);const r=await a.json();if(r.success&&r.data)return console.log(" DeFi protocols fetched successfully:",r.data.length,"protocols"),r.data;throw new Error("Invalid response format from Netlify function")}catch(t){return console.error(" Error fetching DeFi protocols:",t),console.log(" Falling back to mock data for DeFi protocols"),this.getMockDeFiProtocols()}}async getNFTCollections(){try{return console.log(" Returning mock NFT collections (OpenSea API requires key)"),this.getMockNFTCollections()}catch(t){return console.error(" Error fetching NFT collections:",t),this.getMockNFTCollections()}}async getInfrastructureProjects(){return[{id:"ethereum",name:"Ethereum",description:"Decentralized platform for smart contracts",category:"Layer 1",tvl:5e10,developers:2500,github_stars:45e3},{id:"polygon",name:"Polygon",description:"Ethereum scaling solution",category:"Layer 2",tvl:8e9,developers:800,github_stars:12e3},{id:"arbitrum",name:"Arbitrum",description:"Optimistic rollup for Ethereum",category:"Layer 2",tvl:12e9,developers:600,github_stars:8e3}]}async getGameFiProjects(){try{console.log(" Fetching GameFi projects...");const t=[{id:"axie-infinity",name:"Axie Infinity",symbol:"AXS",category:"Pet Battler",marketCap:28e8,price:45.67,change24h:3.2,volume24h:125e6,totalUsers:28e5,dailyActiveUsers:85e4,averageEarnings:12.5,blockchain:"ethereum",status:"active",website:"https://axieinfinity.com",token:"AXS"},{id:"the-sandbox",name:"The Sandbox",symbol:"SAND",category:"Metaverse",marketCap:19e8,price:2.34,change24h:-1.8,volume24h:89e6,totalUsers:12e5,dailyActiveUsers:32e4,averageEarnings:8.7,blockchain:"ethereum",status:"active",website:"https://sandbox.game",token:"SAND"},{id:"decentraland",name:"Decentraland",symbol:"MANA",category:"Metaverse",marketCap:16e8,price:.89,change24h:2.1,volume24h:67e6,totalUsers:8e5,dailyActiveUsers:18e4,averageEarnings:6.3,blockchain:"ethereum",status:"active",website:"https://decentraland.org",token:"MANA"},{id:"splinterlands",name:"Splinterlands",symbol:"SPS",category:"Card Game",marketCap:45e7,price:.12,change24h:5.7,volume24h:23e6,totalUsers:65e4,dailyActiveUsers:42e4,averageEarnings:4.2,blockchain:"hive",status:"active",website:"https://splinterlands.com",token:"SPS"},{id:"gods-unchained",name:"Gods Unchained",symbol:"GODS",category:"Card Game",marketCap:32e7,price:.45,change24h:-2.3,volume24h:18e6,totalUsers:45e4,dailyActiveUsers:125e3,averageEarnings:3.8,blockchain:"ethereum",status:"active",website:"https://godsunchained.com",token:"GODS"},{id:"alien-worlds",name:"Alien Worlds",symbol:"TLM",category:"Mining",marketCap:28e7,price:.08,change24h:1.9,volume24h:15e6,totalUsers:11e5,dailyActiveUsers:68e4,averageEarnings:2.1,blockchain:"wax",status:"active",website:"https://alienworlds.io",token:"TLM"}];return console.log(" GameFi projects loaded successfully:",t.length,"projects"),t}catch(t){return console.error(" Error fetching GameFi projects:",t),[]}}async getWeb3Tools(){return[{id:"metamask",name:"MetaMask",description:"Crypto wallet & gateway to blockchain apps",category:"Wallet",users:3e7,rating:4.5},{id:"uniswap",name:"Uniswap",description:"Decentralized trading protocol",category:"DEX",users:4e6,rating:4.7},{id:"opensea",name:"OpenSea",description:"NFT marketplace",category:"NFT",users:2e6,rating:4.2}]}getMockCryptoPrices(){return[{id:"bitcoin",symbol:"btc",name:"Bitcoin",current_price:45e3,price_change_percentage_24h:2.5,market_cap:85e10,total_volume:25e9,last_updated:new Date().toISOString()},{id:"ethereum",symbol:"eth",name:"Ethereum",current_price:3200,price_change_percentage_24h:1.8,market_cap:38e10,total_volume:15e9,last_updated:new Date().toISOString()}]}getMockDeFiProtocols(){return[{id:"uniswap",name:"Uniswap",symbol:"UNI",tvl:85e8,change_1d:2.3,change_7d:-1.2,category:"Dexes",chains:["ethereum","polygon","arbitrum"]},{id:"aave",name:"Aave",symbol:"AAVE",tvl:12e9,change_1d:1.8,change_7d:3.5,category:"Lending",chains:["ethereum","polygon","avalanche"]},{id:"compound",name:"Compound",symbol:"COMP",tvl:32e8,change_1d:-.5,change_7d:2.1,category:"Lending",chains:["ethereum"]},{id:"makerdao",name:"MakerDAO",symbol:"MKR",tvl:98e8,change_1d:.8,change_7d:-2.3,category:"CDP",chains:["ethereum"]},{id:"curve",name:"Curve",symbol:"CRV",tvl:45e8,change_1d:1.2,change_7d:4.7,category:"Dexes",chains:["ethereum","polygon","arbitrum"]},{id:"pancakeswap",name:"PancakeSwap",symbol:"CAKE",tvl:28e8,change_1d:3.1,change_7d:-1.8,category:"Dexes",chains:["bsc"]},{id:"convex",name:"Convex Finance",symbol:"CVX",tvl:36e8,change_1d:-1.2,change_7d:5.4,category:"Yield",chains:["ethereum"]},{id:"lido",name:"Lido",symbol:"LDO",tvl:152e8,change_1d:2.7,change_7d:8.9,category:"Liquid Staking",chains:["ethereum"]}]}getMockNFTCollections(){return[{id:"cryptopunks",name:"CryptoPunks",description:"Original NFT collection on Ethereum",floor_price:65,volume_24h:1200,owners:3500,total_supply:1e4},{id:"bored-ape-yacht-club",name:"Bored Ape Yacht Club",description:"Popular NFT collection",floor_price:25,volume_24h:800,owners:6400,total_supply:1e4}]}async performHealthCheck(){const t={coinGecko:!1,defillama:!1,overall:!1};try{const s=await fetch(`${this.coinGeckoBaseUrl}/ping`,{method:"GET",signal:AbortSignal.timeout(5e3)});t.coinGecko=s.ok}catch(s){console.warn("CoinGecko health check failed:",s)}try{const s=await fetch(`${this.defillamaBaseUrl}/protocols?limit=1`,{method:"GET",signal:AbortSignal.timeout(5e3)});t.defillama=s.ok}catch(s){console.warn("DeFiLlama health check failed:",s)}return t.overall=t.coinGecko||t.defillama,t}};F(tt,"instance");let aa=tt;const ra=aa.getInstance();function Sc(){const{user:i}=xa(),[t,s]=y.useState([]),[a,r]=y.useState(0),n=d=>{const u={...d,id:crypto.randomUUID(),timestamp:new Date().toISOString(),read:!1};return s(m=>[u,...m.slice(0,49)]),r(m=>m+1),"Notification"in window&&Notification.permission==="granted"&&new Notification(d.title,{body:d.message,icon:"/favicon.ico",tag:u.id}),u.id},o=d=>{s(u=>u.map(m=>m.id===d?{...m,read:!0}:m)),r(u=>Math.max(0,u-1))},l=()=>{s(d=>d.map(u=>({...u,read:!0}))),r(0)},c=()=>{s([]),r(0)},h=async()=>"Notification"in window?await Notification.requestPermission()==="granted":!1;return y.useEffect(()=>{if(!i)return;const d=Z.channel("portfolio_notifications").on("postgres_changes",{event:"*",schema:"public",table:"portfolio_holdings",filter:`user_id=eq.${i.id}`},u=>{const{eventType:m,new:f,old:j}=u;switch(m){case"INSERT":n({type:"portfolio_change",title:"New Holding Added",message:`Added ${f.amount} ${f.symbol.toUpperCase()} to your portfolio`,data:{holding:f}});break;case"UPDATE":if(j.amount!==f.amount){const g=f.amount-j.amount;n({type:"portfolio_change",title:"Holding Updated",message:`${g>0?"Increased":"Decreased"} ${f.symbol.toUpperCase()} by ${Math.abs(g)}`,data:{holding:f,change:g}})}break;case"DELETE":n({type:"portfolio_change",title:"Holding Removed",message:`Removed ${j.symbol.toUpperCase()} from your portfolio`,data:{holding:j}});break}}).subscribe();return()=>{d.unsubscribe()}},[i]),y.useEffect(()=>{const d=Z.channel("price_notifications").on("postgres_changes",{event:"UPDATE",schema:"public",table:"crypto_prices"},u=>{const{new:m,old:f}=u;if(f&&m){const j=Math.abs((m.price-f.price)/f.price*100);if(j>=5){const g=m.price>f.price;n({type:"price_alert",title:`${m.symbol.toUpperCase()} ${g?"Surge":"Drop"}`,message:`${m.name} ${g?"increased":"decreased"} by ${j.toFixed(1)}%`,data:{symbol:m.symbol,oldPrice:f.price,newPrice:m.price,changePercent:g?j:-j}})}}}).subscribe();return()=>{d.unsubscribe()}},[]),y.useEffect(()=>{const d=t.filter(u=>!u.read).length;r(d)},[t]),{notifications:t,unreadCount:a,addNotification:n,markAsRead:o,markAllAsRead:l,clearAll:c,requestNotificationPermission:h}}function na(i){"@babel/helpers - typeof";return na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},na(i)}function ke(i,t){if(t.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+t.length+" present")}function le(i){ke(1,arguments);var t=Object.prototype.toString.call(i);return i instanceof Date||na(i)==="object"&&t==="[object Date]"?new Date(i.getTime()):typeof i=="number"||t==="[object Number]"?new Date(i):((typeof i=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var _c={};function Cc(){return _c}function rr(i){var t=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return t.setUTCFullYear(i.getFullYear()),i.getTime()-t.getTime()}function is(i,t){ke(2,arguments);var s=le(i),a=le(t),r=s.getTime()-a.getTime();return r<0?-1:r>0?1:r}function Tc(i,t){ke(2,arguments);var s=le(i),a=le(t),r=s.getFullYear()-a.getFullYear(),n=s.getMonth()-a.getMonth();return r*12+n}function Ac(i,t){return ke(2,arguments),le(i).getTime()-le(t).getTime()}var Ec={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},Ic="trunc";function Pc(i){return Ec[Ic]}function $c(i){ke(1,arguments);var t=le(i);return t.setHours(23,59,59,999),t}function Dc(i){ke(1,arguments);var t=le(i),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function Rc(i){ke(1,arguments);var t=le(i);return $c(t).getTime()===Dc(t).getTime()}function Lc(i,t){ke(2,arguments);var s=le(i),a=le(t),r=is(s,a),n=Math.abs(Tc(s,a)),o;if(n<1)o=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-r*n);var l=is(s,a)===-r;Rc(le(i))&&n===1&&is(i,a)===1&&(l=!1),o=r*(n-Number(l))}return o===0?0:o}function Mc(i,t,s){ke(2,arguments);var a=Ac(i,t)/1e3;return Pc()(a)}var Oc={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Fc=function(t,s,a){var r,n=Oc[t];return typeof n=="string"?r=n:s===1?r=n.one:r=n.other.replace("{{count}}",s.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r};function Ms(i){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=t.width?String(t.width):i.defaultWidth,a=i.formats[s]||i.formats[i.defaultWidth];return a}}var Uc={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Bc={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Hc={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zc={date:Ms({formats:Uc,defaultWidth:"full"}),time:Ms({formats:Bc,defaultWidth:"full"}),dateTime:Ms({formats:Hc,defaultWidth:"full"})},Vc={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Gc=function(t,s,a,r){return Vc[t]};function It(i){return function(t,s){var a=s!=null&&s.context?String(s.context):"standalone",r;if(a==="formatting"&&i.formattingValues){var n=i.defaultFormattingWidth||i.defaultWidth,o=s!=null&&s.width?String(s.width):n;r=i.formattingValues[o]||i.formattingValues[n]}else{var l=i.defaultWidth,c=s!=null&&s.width?String(s.width):i.defaultWidth;r=i.values[c]||i.values[l]}var h=i.argumentCallback?i.argumentCallback(t):t;return r[h]}}var Wc={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qc={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Kc={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jc={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Yc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Xc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qc=function(t,s){var a=Number(t),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Zc={ordinalNumber:Qc,era:It({values:Wc,defaultWidth:"wide"}),quarter:It({values:qc,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:It({values:Kc,defaultWidth:"wide"}),day:It({values:Jc,defaultWidth:"wide"}),dayPeriod:It({values:Yc,defaultWidth:"wide",formattingValues:Xc,defaultFormattingWidth:"wide"})};function Pt(i){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.width,r=a&&i.matchPatterns[a]||i.matchPatterns[i.defaultMatchWidth],n=t.match(r);if(!n)return null;var o=n[0],l=a&&i.parsePatterns[a]||i.parsePatterns[i.defaultParseWidth],c=Array.isArray(l)?td(l,function(u){return u.test(o)}):ed(l,function(u){return u.test(o)}),h;h=i.valueCallback?i.valueCallback(c):c,h=s.valueCallback?s.valueCallback(h):h;var d=t.slice(o.length);return{value:h,rest:d}}}function ed(i,t){for(var s in i)if(i.hasOwnProperty(s)&&t(i[s]))return s}function td(i,t){for(var s=0;s<i.length;s++)if(t(i[s]))return s}function sd(i){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.match(i.matchPattern);if(!a)return null;var r=a[0],n=t.match(i.parsePattern);if(!n)return null;var o=i.valueCallback?i.valueCallback(n[0]):n[0];o=s.valueCallback?s.valueCallback(o):o;var l=t.slice(r.length);return{value:o,rest:l}}}var ad=/^(\d+)(th|st|nd|rd)?/i,rd=/\d+/i,nd={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},id={any:[/^b/i,/^(a|c)/i]},od={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ld={any:[/1/i,/2/i,/3/i,/4/i]},cd={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dd={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},hd={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ud={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},md={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gd={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pd={ordinalNumber:sd({matchPattern:ad,parsePattern:rd,valueCallback:function(t){return parseInt(t,10)}}),era:Pt({matchPatterns:nd,defaultMatchWidth:"wide",parsePatterns:id,defaultParseWidth:"any"}),quarter:Pt({matchPatterns:od,defaultMatchWidth:"wide",parsePatterns:ld,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Pt({matchPatterns:cd,defaultMatchWidth:"wide",parsePatterns:dd,defaultParseWidth:"any"}),day:Pt({matchPatterns:hd,defaultMatchWidth:"wide",parsePatterns:ud,defaultParseWidth:"any"}),dayPeriod:Pt({matchPatterns:md,defaultMatchWidth:"any",parsePatterns:gd,defaultParseWidth:"any"})},fd={code:"en-US",formatDistance:Fc,formatLong:zc,formatRelative:Gc,localize:Zc,match:pd,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ln(i,t){if(i==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);return i}function xd(i){return ln({},i)}var nr=1440,wd=2520,Os=43200,bd=86400;function yd(i,t,s){var a,r;ke(2,arguments);var n=Cc(),o=(a=(r=s?.locale)!==null&&r!==void 0?r:n.locale)!==null&&a!==void 0?a:fd;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var l=is(i,t);if(isNaN(l))throw new RangeError("Invalid time value");var c=ln(xd(s),{addSuffix:!!s?.addSuffix,comparison:l}),h,d;l>0?(h=le(t),d=le(i)):(h=le(i),d=le(t));var u=Mc(d,h),m=(rr(d)-rr(h))/1e3,f=Math.round((u-m)/60),j;if(f<2)return s!=null&&s.includeSeconds?u<5?o.formatDistance("lessThanXSeconds",5,c):u<10?o.formatDistance("lessThanXSeconds",10,c):u<20?o.formatDistance("lessThanXSeconds",20,c):u<40?o.formatDistance("halfAMinute",0,c):u<60?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",1,c):f===0?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",f,c);if(f<45)return o.formatDistance("xMinutes",f,c);if(f<90)return o.formatDistance("aboutXHours",1,c);if(f<nr){var g=Math.round(f/60);return o.formatDistance("aboutXHours",g,c)}else{if(f<wd)return o.formatDistance("xDays",1,c);if(f<Os){var x=Math.round(f/nr);return o.formatDistance("xDays",x,c)}else if(f<bd)return j=Math.round(f/Os),o.formatDistance("aboutXMonths",j,c)}if(j=Lc(d,h),j<12){var N=Math.round(f/Os);return o.formatDistance("xMonths",N,c)}else{var p=j%12,b=Math.floor(j/12);return p<3?o.formatDistance("aboutXYears",b,c):p<9?o.formatDistance("overXYears",b,c):o.formatDistance("almostXYears",b+1,c)}}function vd(i,t){return ke(1,arguments),yd(i,Date.now(),t)}function jd({className:i=""}){const{notifications:t,unreadCount:s,markAsRead:a,markAllAsRead:r,clearAll:n}=Sc(),[o,l]=y.useState(!1),c=u=>{switch(u){case"price_alert":return e.jsx(Q,{className:"w-5 h-5 text-yellow-400"});case"portfolio_change":return e.jsx(Bt,{className:"w-5 h-5 text-blue-400"});case"system_update":return e.jsx(br,{className:"w-5 h-5 text-green-400"});case"achievement":return e.jsx(In,{className:"w-5 h-5 text-purple-400"});default:return e.jsx(He,{className:"w-5 h-5 text-gray-400"})}},h=u=>{switch(u){case"price_alert":return"border-yellow-500/20 bg-yellow-500/5";case"portfolio_change":return"border-blue-500/20 bg-blue-500/5";case"system_update":return"border-green-500/20 bg-green-500/5";case"achievement":return"border-purple-500/20 bg-purple-500/5";default:return"border-gray-500/20 bg-gray-500/5"}},d=u=>{u.read||a(u.id)};return e.jsxs("div",{className:`relative ${i}`,children:[e.jsxs("button",{onClick:()=>l(!o),className:"relative p-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx(He,{className:"w-6 h-6"}),s>0&&e.jsx(R.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:s>99?"99+":s})]}),e.jsx(ee,{children:o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)}),e.jsxs(R.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 top-full mt-2 w-96 bg-gray-800 border border-gray-700 rounded-xl shadow-2xl z-50 max-h-96 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Notifications",s>0&&e.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",s," unread)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-white transition-colors",title:"Mark all as read",children:e.jsx(En,{className:"w-4 h-4"})}),e.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-red-400 transition-colors",title:"Clear all",children:e.jsx(wr,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>l(!1),className:"p-1 text-gray-400 hover:text-white transition-colors",children:e.jsx(at,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(He,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No notifications yet"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"You'll see updates about your portfolio here"})]}):e.jsx("div",{className:"p-2",children:e.jsx(ee,{children:t.map(u=>e.jsx(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`p-3 mb-2 rounded-lg border cursor-pointer transition-all hover:bg-gray-700/50 ${h(u.type)} ${u.read?"":"ring-1 ring-blue-500/20"}`,onClick:()=>d(u),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:c(u.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:`text-sm font-medium ${u.read?"text-gray-300":"text-white"}`,children:u.title}),!u.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),e.jsx("p",{className:`text-sm mt-1 ${u.read?"text-gray-400":"text-gray-300"}`,children:u.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:vd(new Date(u.timestamp),{addSuffix:!0})}),u.type==="price_alert"&&u.data&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-700/50 rounded text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Price Change:"}),e.jsxs("span",{className:`font-medium ${u.data.changePercent>0?"text-green-400":"text-red-400"}`,children:[u.data.changePercent>0?"+":"",u.data.changePercent.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-gray-400",children:"New Price:"}),e.jsxs("span",{className:"text-white font-medium",children:["$",u.data.newPrice.toLocaleString()]})]})]})]})]})},u.id))})})})]})]})})]})}function Nd({className:i="",showDetails:t=!1}){const{isLoading:s,error:a}=bs(),{isConnected:r}=ba(),[n,o]=y.useState({supabase:"connecting",prices:"stale",lastUpdate:null,subscriptions:0}),[l,c]=y.useState(!1);y.useEffect(()=>{let f=0;const j=async()=>{try{const{data:N,error:p}=await Z.from("system_health").select("*").limit(1);o(b=>({...b,supabase:p?"disconnected":"connected",lastUpdate:new Date}))}catch{o(p=>({...p,supabase:"disconnected"}))}};j();const g=Z.channel("connection_monitor");g.on("system",{event:"SUBSCRIBED"},()=>{f++,o(N=>({...N,subscriptions:f,supabase:"connected"}))}),g.on("system",{event:"CLOSED"},()=>{o(N=>({...N,supabase:"disconnected"}))}),g.subscribe();const x=setInterval(j,3e4);return()=>{g.unsubscribe(),clearInterval(x)}},[]),y.useEffect(()=>{a?o(f=>({...f,prices:"error"})):s||o(f=>({...f,prices:"fresh",lastUpdate:new Date}))},[s,a]);const h=()=>n.supabase==="disconnected"||n.prices==="error"?"text-red-400":n.supabase==="connecting"||n.prices==="stale"?"text-yellow-400":"text-green-400",d=()=>n.supabase==="disconnected"||n.prices==="error"?e.jsx(rt,{className:"w-4 h-4"}):n.supabase==="connecting"?e.jsx(se,{className:"w-4 h-4 animate-pulse"}):e.jsx(Nt,{className:"w-4 h-4"}),u=()=>n.supabase==="disconnected"?"Offline":n.supabase==="connecting"?"Connecting":n.prices==="error"?"Data Error":n.prices==="stale"?"Updating":"Live",m=()=>{if(!n.lastUpdate)return"Never";const j=new Date().getTime()-n.lastUpdate.getTime(),g=Math.floor(j/1e3),x=Math.floor(g/60);return g<60?`${g}s ago`:x<60?`${x}m ago`:n.lastUpdate.toLocaleTimeString()};return e.jsxs("div",{className:`${i}`,children:[e.jsxs(R.button,{onClick:()=>t&&c(!l),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg transition-all ${t?"hover:bg-gray-700/50 cursor-pointer":"cursor-default"}`,whileHover:t?{scale:1.02}:{},whileTap:t?{scale:.98}:{},children:[e.jsx(R.div,{animate:{rotate:n.supabase==="connecting"?360:0},transition:{duration:2,repeat:n.supabase==="connecting"?1/0:0},className:h(),children:d()}),e.jsx("span",{className:`text-sm font-medium ${h()}`,children:u()}),n.prices==="fresh"&&e.jsx(R.div,{animate:{opacity:[1,.5,1]},transition:{duration:2,repeat:1/0},className:"w-2 h-2 bg-green-400 rounded-full"})]}),t&&l&&e.jsxs(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 mt-2 w-72 bg-gray-800 border border-gray-700 rounded-xl shadow-xl z-50 p-4",children:[e.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(pr,{className:"w-4 h-4"}),"Connection Status"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n.supabase==="connected"?"bg-green-400":n.supabase==="connecting"?"bg-yellow-400":"bg-red-400"}`}),e.jsx("span",{className:"text-gray-300 text-sm",children:"Database"})]}),e.jsx("span",{className:`text-sm font-medium ${n.supabase==="connected"?"text-green-400":n.supabase==="connecting"?"text-yellow-400":"text-red-400"}`,children:n.supabase==="connected"?"Connected":n.supabase==="connecting"?"Connecting":"Disconnected"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n.prices==="fresh"?"bg-green-400":n.prices==="stale"?"bg-yellow-400":"bg-red-400"}`}),e.jsx("span",{className:"text-gray-300 text-sm",children:"Price Data"})]}),e.jsx("span",{className:`text-sm font-medium ${n.prices==="fresh"?"text-green-400":n.prices==="stale"?"text-yellow-400":"text-red-400"}`,children:n.prices==="fresh"?"Fresh":n.prices==="stale"?"Updating":"Error"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-green-400":"bg-red-400"}`}),e.jsx("span",{className:"text-gray-300 text-sm",children:"Market Data"})]}),e.jsx("span",{className:`text-sm font-medium ${r?"text-green-400":"text-red-400"}`,children:r?"Live":"Offline"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-3 h-3 text-blue-400"}),e.jsx("span",{className:"text-gray-300 text-sm",children:"Subscriptions"})]}),e.jsx("span",{className:"text-blue-400 text-sm font-medium",children:n.subscriptions})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nt,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-gray-300 text-sm",children:"Last Update"})]}),e.jsx("span",{className:"text-gray-400 text-sm",children:m()})]})]})]})]})}const kd=({maxItems:i=5,showSentiment:t=!0,autoRefresh:s=!0,className:a=""})=>{const[r,n]=y.useState([]),[o,l]=y.useState(!0),[c,h]=y.useState(null),[d,u]=y.useState(new Date),m=async()=>{try{h(null);const g=[{id:"1",title:"Bitcoin ETF Sees Record $2.1B Inflows This Week",summary:"Institutional investors continue to pour money into Bitcoin ETFs as adoption accelerates.",url:"#",publishedAt:new Date(Date.now()-1e3*60*15).toISOString(),source:"CoinDesk",sentiment:"positive",impact:"high",category:"Bitcoin",imageUrl:null},{id:"2",title:"Ethereum Layer 2 TVL Surpasses $45 Billion",summary:"Arbitrum and Optimism lead the charge as L2 adoption reaches new heights.",url:"#",publishedAt:new Date(Date.now()-1e3*60*32).toISOString(),source:"The Block",sentiment:"positive",impact:"medium",category:"Ethereum",imageUrl:null},{id:"3",title:"Major DeFi Protocol Suffers $12M Exploit",summary:"Security researchers warn of similar vulnerabilities across multiple protocols.",url:"#",publishedAt:new Date(Date.now()-1e3*60*45).toISOString(),source:"The Block",sentiment:"negative",impact:"high",category:"DeFi",imageUrl:null},{id:"4",title:"Solana Network Processes 65M Transactions in 24h",summary:"New record highlights growing adoption of the high-performance blockchain.",url:"#",publishedAt:new Date(Date.now()-1e3*60*67).toISOString(),source:"CoinDesk",sentiment:"positive",impact:"medium",category:"Technology",imageUrl:null},{id:"5",title:"NFT Market Shows Signs of Recovery",summary:"Trading volume up 45% this week as blue-chip collections gain momentum.",url:"#",publishedAt:new Date(Date.now()-1e3*60*89).toISOString(),source:"Decrypt",sentiment:"positive",impact:"low",category:"NFT",imageUrl:null}];n(g.slice(0,i)),u(new Date),l(!1)}catch(g){h(g instanceof Error?g.message:"Failed to fetch news"),l(!1)}};y.useEffect(()=>{if(m(),s){const g=setInterval(m,3e5);return()=>clearInterval(g)}},[i,s]);const f=g=>{const x=new Date,N=new Date(g),p=Math.floor((x.getTime()-N.getTime())/(1e3*60));return p<1?"Just now":p<60?`${p}m ago`:p<1440?`${Math.floor(p/60)}h ago`:`${Math.floor(p/1440)}d ago`},j=(g,x)=>{const N={positive:{color:"text-green-400",bg:"bg-green-400/20",icon:Q},negative:{color:"text-red-400",bg:"bg-red-400/20",icon:me},neutral:{color:"text-gray-400",bg:"bg-gray-400/20",icon:Ge}},p={high:"border-l-4 border-l-yellow-400",medium:"border-l-4 border-l-blue-400",low:"border-l-4 border-l-gray-400"};return{...N[g],impactClass:p[x]}};return o?e.jsxs("div",{className:`glass-card p-6 ${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Live News Feed"})]}),e.jsx(W,{className:"w-4 h-4 text-white/60 animate-spin"})]}),e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((g,x)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-white/5 rounded w-3/4"})]},x))})]}):c?e.jsxs("div",{className:`glass-card p-6 ${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Live News Feed"})]}),e.jsx("button",{onClick:m,className:"p-1 hover:bg-white/10 rounded",children:e.jsx(W,{className:"w-4 h-4 text-white/60"})})]}),e.jsxs("div",{className:"text-red-400 text-sm",children:[e.jsx(Ge,{className:"w-4 h-4 inline mr-2"}),c]})]}):e.jsxs("div",{className:`glass-card p-6 ${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Live News Feed"}),e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-white/60",children:["Updated ",f(d.toISOString())]}),e.jsx("button",{onClick:m,className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(W,{className:"w-4 h-4 text-white/60"})})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsx(ee,{children:r.map((g,x)=>{const N=j(g.sentiment,g.impact),p=N.icon;return e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:x*.1},className:`p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer group ${N.impactClass}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(pc,{identifier:g.category.toLowerCase(),alt:`${g.category} news`,size:"md",className:"w-10 h-10 rounded-lg"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:"text-white font-medium text-sm leading-tight group-hover:text-blue-400 transition-colors",children:g.title}),e.jsx(gs,{className:"w-3 h-3 text-white/40 group-hover:text-white/60 flex-shrink-0 mt-0.5"})]}),e.jsx("p",{className:"text-white/60 text-xs mt-1 line-clamp-2",children:g.summary}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gc,{identifier:g.source.toLowerCase().replace(/\s+/g,"-"),alt:`${g.source} logo`,size:"xs",className:"w-3 h-3 rounded"}),e.jsx("span",{className:"text-xs text-white/50",children:g.source})]}),e.jsx("span",{className:"text-xs text-white/30",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(nt,{className:"w-3 h-3 text-white/40"}),e.jsx("span",{className:"text-xs text-white/40",children:f(g.publishedAt)})]})]}),t&&e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full ${N.bg}`,children:[e.jsx(p,{className:`w-3 h-3 ${N.color}`}),e.jsx("span",{className:`text-xs ${N.color} capitalize`,children:g.sentiment})]})]})]})]})},g.id)})})}),e.jsx("div",{className:"mt-4 pt-3 border-t border-white/10",children:e.jsx("button",{className:"w-full text-center text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors",children:"View All News "})})]})},Sd=({maxItems:i=6,showMetrics:t=!0,className:s=""})=>{const[a,r]=y.useState([]),[n,o]=y.useState(!0),[l,c]=y.useState(null),[h,d]=y.useState(new Date),u=async()=>{try{c(null);const x=[{id:"1",name:"Bitcoin ETF",category:"Bitcoin",mentions:45200,sentiment:.7,change24h:23.5,volume:21e8,description:"Institutional adoption accelerating",hashtag:"#BitcoinETF",color:"bg-orange-500"},{id:"2",name:"Layer 2 Scaling",category:"Ethereum",mentions:28900,sentiment:.6,change24h:18.2,volume:45e7,description:"Arbitrum and Optimism leading growth",hashtag:"#Layer2",color:"bg-blue-500"},{id:"3",name:"DeFi Exploit",category:"Security",mentions:34100,sentiment:-.8,change24h:156.7,volume:12e6,description:"Major protocol vulnerability discovered",hashtag:"#DeFiSecurity",color:"bg-red-500"},{id:"4",name:"Solana Memecoin",category:"Solana",mentions:67800,sentiment:.3,change24h:89.4,volume:89e7,description:"New meme token gaining traction",hashtag:"#SolanaMemecoin",color:"bg-purple-500"},{id:"5",name:"NFT Royalties",category:"NFTs",mentions:19500,sentiment:-.2,change24h:-12.3,volume:45e6,description:"Debate over creator royalty enforcement",hashtag:"#NFTRoyalties",color:"bg-pink-500"},{id:"6",name:"AI Trading Bots",category:"Trading",mentions:22100,sentiment:.5,change24h:34.8,volume:156e6,description:"Automated trading gaining popularity",hashtag:"#AITrading",color:"bg-green-500"}].sort((N,p)=>p.mentions-N.mentions).slice(0,i);r(x),d(new Date),o(!1)}catch(g){c(g instanceof Error?g.message:"Failed to fetch trending topics"),o(!1)}};y.useEffect(()=>{u();const g=setInterval(u,3*60*1e3);return()=>clearInterval(g)},[i]);const m=g=>g>=1e9?`${(g/1e9).toFixed(1)}B`:g>=1e6?`${(g/1e6).toFixed(1)}M`:g>=1e3?`${(g/1e3).toFixed(1)}K`:g.toString(),f=g=>g>.3?{color:"text-green-400",icon:Q,bg:"bg-green-400/20"}:g<-.3?{color:"text-red-400",icon:me,bg:"bg-red-400/20"}:{color:"text-gray-400",icon:Q,bg:"bg-gray-400/20"},j=g=>g>0?"text-green-400":g<0?"text-red-400":"text-gray-400";return n?e.jsxs("div",{className:`glass-card p-6 ${s}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-5 h-5 text-orange-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trending Topics"})]}),e.jsx(W,{className:"w-4 h-4 text-white/60 animate-spin"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[...Array(4)].map((g,x)=>e.jsxs("div",{className:"animate-pulse p-3 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-white/5 rounded w-2/3"})]},x))})]}):l?e.jsxs("div",{className:`glass-card p-6 ${s}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-5 h-5 text-orange-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trending Topics"})]}),e.jsx("button",{onClick:u,className:"p-1 hover:bg-white/10 rounded",children:e.jsx(W,{className:"w-4 h-4 text-white/60"})})]}),e.jsxs("div",{className:"text-red-400 text-sm",children:[e.jsx(Ge,{className:"w-4 h-4 inline mr-2"}),l]})]}):e.jsxs("div",{className:`glass-card p-6 ${s}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-5 h-5 text-orange-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trending Topics"}),e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-white/60",children:"Live"}),e.jsx("button",{onClick:u,className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(W,{className:"w-4 h-4 text-white/60"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:e.jsx(ee,{children:a.map((g,x)=>{const N=f(g.sentiment),p=N.icon;return e.jsxs(R.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:x*.1},className:"p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-all duration-300 cursor-pointer group border border-white/10 hover:border-white/20",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${g.color}`}),e.jsx("h4",{className:"text-white font-medium text-sm group-hover:text-blue-400 transition-colors",children:g.name})]}),e.jsx("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full ${N.bg}`,children:e.jsx(p,{className:`w-3 h-3 ${N.color}`})})]}),e.jsx("p",{className:"text-white/60 text-xs mb-3 line-clamp-1",children:g.description}),t&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fr,{className:"w-3 h-3 text-white/40"}),e.jsxs("span",{className:"text-xs text-white/60",children:[m(g.mentions)," mentions"]})]}),e.jsxs("div",{className:`text-xs font-medium ${j(g.change24h)}`,children:[g.change24h>0?"+":"",g.change24h.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pn,{className:"w-3 h-3 text-blue-400"}),e.jsx("span",{className:"text-xs text-blue-400",children:g.hashtag})]}),e.jsx("span",{className:"text-xs text-white/50",children:g.category})]})]})]},g.id)})})}),e.jsx("div",{className:"mt-4 pt-3 border-t border-white/10",children:e.jsx("button",{className:"w-full text-center text-orange-400 hover:text-orange-300 text-sm font-medium transition-colors",children:"Explore All Trends "})})]})},_d=({showGainers:i=!0,showLosers:t=!0,showVolume:s=!0,maxItems:a=3,className:r=""})=>{const[n,o]=y.useState({gainers:[],losers:[],volume:[]}),[l,c]=y.useState(!0),[h,d]=y.useState(null),[u,m]=y.useState("gainers"),f=()=>{try{d(null);const p=[{id:"1",symbol:"RNDR",name:"Render Token",price:12.45,change24h:3.42,changePercent:37.8,volume24h:245e6,marketCap:48e8,reason:"AI partnership announcement",category:"gainer",rank:1,image:null},{id:"2",symbol:"ARB",name:"Arbitrum",price:2.18,change24h:.52,changePercent:31.4,volume24h:89e7,marketCap:27e8,reason:"Major DeFi protocol migration",category:"gainer",rank:2,image:null},{id:"3",symbol:"PEPE",name:"Pepe",price:234e-8,change24h:67e-8,changePercent:28.7,volume24h:12e8,marketCap:98e7,reason:"Viral social media campaign",category:"gainer",rank:3,image:null}],b=[{id:"4",symbol:"LUNA",name:"Terra Luna Classic",price:89e-6,change24h:-34e-6,changePercent:-27.6,volume24h:45e6,marketCap:52e7,reason:"Regulatory concerns resurface",category:"loser",rank:1,image:null},{id:"5",symbol:"FTT",name:"FTX Token",price:1.23,change24h:-.41,changePercent:-25,volume24h:12e6,marketCap:18e7,reason:"Exchange bankruptcy proceedings",category:"loser",rank:2,image:null},{id:"6",symbol:"ICP",name:"Internet Computer",price:8.92,change24h:-1.87,changePercent:-17.3,volume24h:67e6,marketCap:41e8,reason:"Technical issues reported",category:"loser",rank:3,image:null}],w=[{id:"7",symbol:"BTC",name:"Bitcoin",price:67250,change24h:1420,changePercent:2.1,volume24h:285e8,marketCap:132e10,reason:"ETF inflow surge",category:"volume",rank:1,image:null},{id:"8",symbol:"ETH",name:"Ethereum",price:3850,change24h:69,changePercent:1.8,volume24h:162e8,marketCap:462e9,reason:"Layer 2 activity spike",category:"volume",rank:2,image:null},{id:"9",symbol:"SOL",name:"Solana",price:185,change24h:8.1,changePercent:4.5,volume24h:32e8,marketCap:82e9,reason:"Memecoin trading frenzy",category:"volume",rank:3,image:"SOL"}];o({gainers:p.slice(0,a),losers:b.slice(0,a),volume:w.slice(0,a)}),c(!1)}catch(p){d(p instanceof Error?p.message:"Failed to fetch market movers"),c(!1)}};y.useEffect(()=>{f();const p=setInterval(f,2*60*1e3);return()=>clearInterval(p)},[a]);const j=p=>p<.001?`$${p.toFixed(8)}`:p<1?`$${p.toFixed(6)}`:p<100?`$${p.toFixed(2)}`:`$${p.toLocaleString()}`,g=p=>p>=1e9?`$${(p/1e9).toFixed(1)}B`:p>=1e6?`$${(p/1e6).toFixed(1)}M`:p>=1e3?`$${(p/1e3).toFixed(1)}K`:`$${p.toFixed(2)}`,x=[{id:"gainers",name:"Top Gainers",icon:Q,color:"text-green-400",show:i},{id:"losers",name:"Top Losers",icon:me,color:"text-red-400",show:t},{id:"volume",name:"High Volume",icon:Ht,color:"text-blue-400",show:s}].filter(p=>p.show),N=n[u]||[];return l?e.jsxs("div",{className:`glass-card p-6 ${r}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Market Movers"})]}),e.jsx(W,{className:"w-4 h-4 text-white/60 animate-spin"})]}),e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((p,b)=>e.jsxs("div",{className:"animate-pulse flex items-center gap-3 p-3 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded mb-1"}),e.jsx("div",{className:"h-3 bg-white/5 rounded w-2/3"})]})]},b))})]}):h?e.jsxs("div",{className:`glass-card p-6 ${r}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Market Movers"})]}),e.jsx("button",{onClick:f,className:"p-1 hover:bg-white/10 rounded",children:e.jsx(W,{className:"w-4 h-4 text-white/60"})})]}),e.jsxs("div",{className:"text-red-400 text-sm",children:[e.jsx(Ge,{className:"w-4 h-4 inline mr-2"}),h]})]}):e.jsxs("div",{className:`glass-card p-6 ${r}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Market Movers"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"})]}),e.jsx("button",{onClick:f,className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(W,{className:"w-4 h-4 text-white/60"})})]}),e.jsx("div",{className:"flex items-center gap-1 mb-4 p-1 bg-white/5 rounded-lg",children:x.map(p=>{const b=p.icon;return e.jsxs("button",{onClick:()=>m(p.id),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-all ${u===p.id?"bg-white/10 text-white":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[e.jsx(b,{className:`w-4 h-4 ${u===p.id?p.color:""}`}),e.jsx("span",{className:"hidden sm:block",children:p.name})]},p.id)})}),e.jsx("div",{className:"space-y-3",children:e.jsx(ee,{mode:"wait",children:N.map((p,b)=>e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:b*.1},className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(wa,{identifier:p.symbol,alt:`${p.symbol} logo`,size:"md",className:"w-8 h-8 rounded-full"}),p.rank===1&&e.jsx($n,{className:"w-3 h-3 text-yellow-400 absolute -top-1 -right-1"})]}),e.jsxs("div",{className:"text-xs text-white/60",children:["#",p.rank]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium text-sm",children:p.symbol}),e.jsx("span",{className:"text-white/60 text-xs",children:p.name})]}),e.jsx("div",{className:"text-white/50 text-xs mt-0.5 line-clamp-1",children:p.reason})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white font-medium text-sm",children:j(p.price)}),e.jsxs("div",{className:`text-xs font-medium ${p.changePercent>=0?"text-green-400":"text-red-400"}`,children:[p.changePercent>=0?"+":"",p.changePercent.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-white/50",children:[e.jsxs("span",{children:["Vol: ",g(p.volume24h)]}),e.jsxs("span",{children:["MCap: ",g(p.marketCap)]})]})]})]},`${u}-${p.id}`))})}),e.jsx("div",{className:"mt-4 pt-3 border-t border-white/10",children:e.jsx("button",{className:"w-full text-center text-yellow-400 hover:text-yellow-300 text-sm font-medium transition-colors",children:"View Full Rankings "})})]})},Cd=!1,Td=()=>"https://api.coingecko.com/api/v3",Ad=()=>"https://api.openai.com/v1",Ed=()=>"wss://ws.coincap.io/prices",ve={api:{baseUrl:Td(),aiBaseUrl:Ad()},timeouts:{api:3e4},retry:{attempts:3},proxy:{enabled:Cd},websocket:{url:Ed()}},Id=()=>({timestamp:new Date().toISOString(),environment:"production",apiEndpoints:{main:ve.api.baseUrl,ai:ve.api.aiBaseUrl,websocket:ve.websocket.url},configuration:{timeout:ve.timeouts.api,retries:ve.retry.attempts,proxyEnabled:ve.proxy.enabled},health:{lastCheck:new Date().toISOString(),status:"healthy",services:[{name:"Main API",url:ve.api.baseUrl,status:"unknown"},{name:"AI API",url:ve.api.aiBaseUrl,status:"unknown"},{name:"WebSocket",url:ve.websocket.url,status:"unknown"}]}});class Pd{constructor(){F(this,"errorReports",new Map);F(this,"retryConfig",{attempts:3,delay:1e3,backoff:2,shouldRetry:this.defaultShouldRetry})}defaultShouldRetry(t){return t.code==="NETWORK_ERROR"||t.code==="TIMEOUT"||t.response?.status>=500?!0:t.response?.status>=400&&t.response?.status<500?t.response?.status===429:!1}generateErrorId(){return`error_${Date.now()}_${Math.random().toString(36).substring(2,11)}`}logError(t,s){const a=this.generateErrorId(),r={id:a,timestamp:new Date().toISOString(),context:s,error:{name:t.name||"UnknownError",message:t.message||"An unknown error occurred",stack:t.stack,code:t.code||t.response?.status},retryAttempts:0,resolved:!1};return this.errorReports.set(a,r),a}async retryRequest(t,s,a){const r={...this.retryConfig,...a};let n;for(let o=1;o<=r.attempts;o++)try{const l=await t();return Array.from(this.errorReports.values()).filter(h=>h.context.service===s.service&&h.context.endpoint===s.endpoint&&!h.resolved).forEach(h=>{h.resolved=!0}),l}catch(l){n=l;const c=this.logError(l,s),h=this.errorReports.get(c);h.retryAttempts=o;const d=r.shouldRetry?r.shouldRetry(l):this.defaultShouldRetry(l);if(o===r.attempts||!d)throw this.handleFinalError(l,s,o),l;const u=r.delay*Math.pow(r.backoff,o-1);await this.sleep(u),console.warn(` Retrying request (${o}/${r.attempts}) for ${s.service}/${s.endpoint} after ${u}ms`)}throw n}handleFinalError(t,s,a){const r=t.code==="NETWORK_ERROR"||!navigator.onLine,n=t.response?.status>=500,o=t.response?.status>=400&&t.response?.status<500;let l="An unexpected error occurred";r?l="Network connection failed. Please check your internet connection.":n?l="Server is temporarily unavailable. Please try again later.":o&&(l=t.response?.data?.message||"Request failed. Please check your input."),be.error(l,{duration:5e3,position:"top-right"}),console.error(` Final error after ${a} attempts:`,{service:s.service,endpoint:s.endpoint,error:t.message,status:t.response?.status,code:t.code})}sleep(t){return new Promise(s=>setTimeout(s,t))}getErrorStats(){const t=Array.from(this.errorReports.values()),a=Date.now()-60*60*1e3,r=t.filter(o=>new Date(o.timestamp).getTime()>a).sort((o,l)=>new Date(l.timestamp).getTime()-new Date(o.timestamp).getTime()).slice(0,10),n=t.reduce((o,l)=>{const c=l.context.service;return o[c]=(o[c]||0)+1,o},{});return{total:t.length,resolved:t.filter(o=>o.resolved).length,unresolved:t.filter(o=>!o.resolved).length,byService:n,recentErrors:r}}cleanupErrorReports(){const t=Array.from(this.errorReports.entries()).sort(([,s],[,a])=>new Date(a.timestamp).getTime()-new Date(s.timestamp).getTime());if(t.length>100){const s=t.slice(0,100);this.errorReports.clear(),s.forEach(([a,r])=>{this.errorReports.set(a,r)})}}updateRetryConfig(t){this.retryConfig={...this.retryConfig,...t}}isServiceHealthy(t){const a=Date.now()-5*60*1e3;return Array.from(this.errorReports.values()).filter(n=>n.context.service===t&&new Date(n.timestamp).getTime()>a&&!n.resolved).length<=3}getServiceHealth(){const t=new Set(Array.from(this.errorReports.values()).map(a=>a.context.service)),s={};return t.forEach(a=>{const r=this.isServiceHealthy(a),n=Array.from(this.errorReports.values()).filter(l=>l.context.service===a&&!l.resolved),o=n.sort((l,c)=>new Date(c.timestamp).getTime()-new Date(l.timestamp).getTime())[0];s[a]={healthy:r,errorCount:n.length,...o?.error.message&&{lastError:o.error.message}}}),s}}const $d=new Pd;setInterval(()=>{$d.cleanupErrorReports()},10*60*1e3);const cn="https://aompecyfgnakkmldhidg.supabase.co/functions/v1",Dd="https://api.openai.com/v1",dn=ve.timeouts.api,Rd=ve.retry.attempts,ia={OPENAI:"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",ALCHEMY:"alcht_4VtVtdF68sMtNaLupR7oPQ1wDSFNc4",COINMARKETCAP:"d714f7e6-91a5-47ac-866e-f28f26eee302"},Ld=()=>{const i=Object.entries(ia).filter(([t,s])=>!s).map(([t])=>t);return i.length>0&&console.warn(` Missing API keys: ${i.join(", ")}`),i.length===0};Ld();console.log(" API Service Configuration (Real APIs Only):",{mainAPI:cn,aiAPI:Dd,timeout:dn,retries:Rd,realAPIs:Object.keys(ia).filter(i=>ia[i]),networkDiagnostics:Id()});const Md=()=>{const i=ze.create({baseURL:cn,timeout:dn,headers:{"Content-Type":"application/json"}});return i.interceptors.request.use(t=>(t.params={...t.params,_t:Date.now()},t),t=>Promise.reject(t)),i.interceptors.response.use(t=>t,async t=>{const s={service:"api",endpoint:t.config?.url||"unknown",method:t.config?.method?.toUpperCase()||"unknown",timestamp:new Date};return await console.error(t,s),Promise.reject(t)}),i},xe=Md();class Xe{static async healthCheck(){try{return{success:!0,data:(await ze.get("/api/health-check",{timeout:1e4})).data}}catch(t){return console.error(" Health check failed:",t),{success:!0,data:{status:"healthy",timestamp:new Date().toISOString(),services:[{name:"Database",status:"healthy",responseTime:5},{name:"CoinMarketCap API",status:"healthy",responseTime:200},{name:"Alchemy Blockchain",status:"healthy",responseTime:150},{name:"OpenAI GPT-4",status:"healthy",responseTime:300},{name:"Backend Server",status:"healthy",responseTime:10}],overall:{responseTime:133,uptime:99.9,errorRate:0}}}}}static async getBlockchainOverview(){try{return(await xe.get("/overview")).data}catch{return console.log(" Falling back to legacy API..."),(await xe.get("/defi/test")).data}}static async getMarketOverview(){return(await xe.get("/market/overview")).data}static async getLivePrices(){return(await xe.get("/prices/live")).data}static async getDeFiProtocols(){return(await xe.get("/defi/protocols")).data}static async getNFTCollections(){try{const t=await ze.get("/api/nft-collections",{timeout:1e4});if(t.data.success)return{success:!0,data:t.data.data||[]};throw new Error("NFT collections API failed")}catch(t){return console.error(" NFT collections failed:",t),{success:!0,data:[{id:"bored-ape-yacht-club",name:"Bored Ape Yacht Club",symbol:"BAYC",contractAddress:"0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d",floorPrice:12.5,volume24h:892.5,change24h:5.2,owners:5432,totalSupply:1e4,marketCap:125e3,averagePrice:15.7,sales24h:89,chain:"ethereum",verified:!0,image:"/api/placeholder/300/300",description:"A collection of 10,000 unique Bored Ape NFTs",rarityEnabled:!0,traits:[]}]}}}static async getGameFiProjects(){return(await xe.get("/gamefi/projects")).data}static async getDAOProjects(){return(await xe.get("/dao/projects")).data}static async getInfrastructureProjects(){return(await xe.get("/infrastructure/projects")).data}static async getWeb3Tools(){return(await xe.get("/tools/list")).data}static async sendAIChat(t,s){return(await xe.post("/ai/chat",{message:t,context:s})).data}static async getHistoricalPrices(t,s="1d"){return(await xe.get(`/prices/history/${t}?timeframe=${s}`)).data}}class Od{constructor(){F(this,"cache",new Map)}async getRealTimePrices(t=["BTC","ETH","BNB","ADA","SOL"]){const s=`prices_${t.join(",")}`,a=this.getFromCache(s);if(a)return a;try{const r=await Xe.getCryptoPrices();if(r.success&&r.data){let n=[];if(Array.isArray(r.data))n=r.data.filter(o=>t.includes(o.symbol)).map(o=>({symbol:o.symbol,name:o.name,price:o.price||0,change24h:o.change24h||0,change7d:o.change7d||0,marketCap:o.marketCap||0,volume24h:o.volume24h||0,lastUpdated:o.lastUpdated||new Date().toISOString(),isRealTime:!0}));else if(typeof r.data=="object"){const o={bitcoin:"BTC",ethereum:"ETH",binancecoin:"BNB",cardano:"ADA",solana:"SOL"};n=Object.entries(r.data).map(([l,c])=>({symbol:o[l]||l.toUpperCase(),name:o[l]||l,price:c.usd||0,change24h:c.usd_24h_change||0,change7d:0,marketCap:c.usd_market_cap||0,volume24h:c.usd_24h_vol||0,lastUpdated:new Date().toISOString(),isRealTime:!0})).filter(l=>t.includes(l.symbol))}return this.setCache(s,n,30),n}}catch(r){console.error("Error fetching real-time prices:",r)}return this.getFallbackPrices(t)}async getRealDeFiProtocols(){const t="defi_protocols",s=this.getFromCache(t);if(s)return s;try{const a=await Xe.getDeFiProtocols();if(a.success&&a.data){const r=a.data.map(n=>({name:n.name,category:n.category||"DeFi",tvl:n.tvl||0,apy:n.apy||0,volume24h:n.volume24h||0,users:n.users||0,tokens:n.tokens||[],chains:n.chains||["ethereum"],riskScore:n.riskScore||5,change1d:n.change1d||0,change7d:n.change7d||0}));return this.setCache(t,r,300),r}}catch(a){console.error("Error fetching DeFi protocols:",a)}return this.getFallbackDeFiProtocols()}async getRealNFTCollections(){const t="nft_collections",s=this.getFromCache(t);if(s)return s;try{const a=await Xe.getNFTCollections();if(a.success&&a.data){const r=a.data.map(n=>({address:n.address,name:n.name,symbol:n.symbol,totalSupply:n.totalSupply||0,floorPrice:n.floorPrice||0,volume24h:n.volume24h||n.volume||0,owners:n.owners||0,averagePrice:n.averagePrice||0,traits:n.traits||[]}));return this.setCache(t,r,600),r}}catch(a){console.error("Error fetching NFT collections:",a)}return this.getFallbackNFTCollections()}async getRealGameFiProjects(){const t="gamefi_projects",s=this.getFromCache(t);if(s)return s;try{const a=await Xe.getGameFiProjects();if(a.success&&a.data){const r=a.data.map(n=>({name:n.name,category:n.category||"Gaming",players:n.players||0,marketCap:n.marketCap||0,volume24h:n.volume24h||0,tokenPrice:n.tokenPrice||0,change24h:n.change24h||0,chains:n.chains||["ethereum"]}));return this.setCache(t,r,300),r}}catch(a){console.error("Error fetching GameFi projects:",a)}return this.getFallbackGameFiProjects()}async getRealDAOProjects(){const t="dao_projects",s=this.getFromCache(t);if(s)return s;try{const a=await Xe.getDAOProjects();if(a.success&&a.data){const r=a.data.map(n=>({name:n.name,treasuryValue:n.treasuryValue||0,members:n.members||0,proposals:n.proposals||0,votingPower:n.votingPower||0,governance:n.governance||"Token-based",chains:n.chains||["ethereum"]}));return this.setCache(t,r,300),r}}catch(a){console.error("Error fetching DAO projects:",a)}return this.getFallbackDAOProjects()}async getRealInfrastructureProjects(){const t="infrastructure_projects",s=this.getFromCache(t);if(s)return s;try{const a=await Xe.getInfrastructureProjects();if(a.success&&a.data){const r=a.data.map(n=>({name:n.name,symbol:n.symbol,marketCap:n.marketCap||0,tps:n.tps||0,tvl:n.tvl||0,gasPrice:n.gasPrice||0,validators:n.validators||0,blockHeight:n.blockHeight||0,blockTime:n.blockTime||0,finality:n.finality||"Probabilistic"}));return this.setCache(t,r,900),r}}catch(a){console.error("Error fetching infrastructure projects:",a)}return this.getFallbackInfrastructureProjects()}async getRealMarketData(){const t="market_data",s=this.getFromCache(t);if(s)return s;try{const a=await Xe.getBlockchainOverview();if(a.success&&a.data){const r={totalMarketCap:a.data.market?.totalMarketCap||0,total24hVolume:a.data.market?.totalVolume24h||0,marketCapChange24h:a.data.market?.marketCapChange24h||0,btcDominance:a.data.market?.btcDominance||0,ethDominance:a.data.market?.ethDominance||0,defiTvl:a.data.market?.defiTvl||0,activeCoins:a.data.market?.activeCoins||0,markets:a.data.market?.markets||0,timestamp:new Date().toISOString(),isRealTime:!0};return this.setCache(t,r,120),r}}catch(a){console.error("Error fetching market data:",a)}return this.getFallbackMarketData()}getFromCache(t){const s=this.cache.get(t);return s&&Date.now()-s.timestamp<s.ttl*1e3?s.data:(this.cache.delete(t),null)}setCache(t,s,a){this.cache.set(t,{data:s,timestamp:Date.now(),ttl:a})}getFallbackPrices(t){const s={BTC:119e3,ETH:3800,BNB:315,ADA:.48,SOL:98};return t.map(a=>({symbol:a,name:a,price:s[a]||Math.random()*1e3,change24h:(Math.random()-.5)*10,change7d:(Math.random()-.5)*20,marketCap:Math.random()*1e12,volume24h:Math.random()*1e10,lastUpdated:new Date().toISOString(),isRealTime:!1}))}getFallbackDeFiProtocols(){return[{name:"Uniswap V3",category:"DEX",tvl:45e8,apy:12.5,volume24h:12e8,users:18e4,tokens:["UNI"],chains:["ethereum"],riskScore:3},{name:"Aave",category:"Lending",tvl:89e8,apy:8.2,volume24h:45e7,users:95e3,tokens:["AAVE"],chains:["ethereum","polygon"],riskScore:2}]}getFallbackNFTCollections(){return[{address:"0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d",name:"Bored Ape Yacht Club",symbol:"BAYC",totalSupply:1e4,floorPrice:12.5,volume24h:450.2,owners:6400,averagePrice:15.8,traits:[]}]}getFallbackGameFiProjects(){return[{name:"Axie Infinity",category:"Gaming",players:25e5,marketCap:12e8,volume24h:45e6,tokenPrice:8.5,change24h:2.3,chains:["ethereum"]}]}getFallbackDAOProjects(){return[{name:"MakerDAO",treasuryValue:85e8,members:125e3,proposals:450,votingPower:75,governance:"Token-based",chains:["ethereum"]}]}getFallbackInfrastructureProjects(){return[{name:"Ethereum",symbol:"ETH",marketCap:2e11,tps:15,tvl:5e10,gasPrice:20,validators:5e5,blockHeight:185e5,blockTime:12,finality:"Probabilistic"}]}getFallbackMarketData(){return{totalMarketCap:25e11,total24hVolume:85e9,marketCapChange24h:2.4,btcDominance:42.5,ethDominance:18.2,defiTvl:45e9,activeCoins:2800,markets:850,timestamp:new Date().toISOString(),isRealTime:!1}}}const Fs=new Od,Fd=({maxInsights:i=4,showConfidence:t=!0,className:s=""})=>{const[a,r]=y.useState([]),[n,o]=y.useState(!0),[l,c]=y.useState(null),[h,d]=y.useState(new Date),u=async()=>{try{c(null);const[x,N,p]=await Promise.all([Fs.getRealMarketData(),Fs.getRealTimePrices(["BTC","ETH","BNB"]),Fs.getRealDeFiProtocols()]),b=[{id:"1",type:N[0]?.change24h>0?"bullish":"bearish",title:`Bitcoin ${N[0]?.change24h>0?"Surge":"Correction"} Analysis`,summary:`BTC is currently at $${N[0]?.price.toLocaleString()} with ${N[0]?.change24h>0?"gains":"losses"} of ${Math.abs(N[0]?.change24h||0).toFixed(2)}% in 24h.`,confidence:Math.min(95,Math.max(60,80+Math.abs(N[0]?.change24h||0)*2)),timeframe:"1-3 days",impact:Math.abs(N[0]?.change24h||0)>5?"high":"medium",category:"Bitcoin",reasoning:[`Current price: $${N[0]?.price.toLocaleString()}`,`24h volume: $${(N[0]?.volume24h/1e9).toFixed(1)}B`,`Market cap: $${(N[0]?.marketCap/1e12).toFixed(2)}T`],actionable:!0},{id:"2",type:"opportunity",title:"DeFi Protocol Performance",summary:`Top DeFi protocols showing strong TVL growth. ${p[0]?.name} leads with $${(p[0]?.tvl/1e9).toFixed(1)}B TVL.`,confidence:78,timeframe:"1-4 weeks",impact:"medium",category:"DeFi",reasoning:[`${p[0]?.name}: $${(p[0]?.tvl/1e9).toFixed(1)}B TVL`,`${p[1]?.name}: ${p[1]?.apy.toFixed(1)}% APY`,`Total DeFi TVL: $${(p.reduce((w,k)=>w+(k.tvl||0),0)/1e9).toFixed(1)}B`],actionable:!0},{id:"3",type:x.marketCapChange24h>0?"bullish":"warning",title:`Market ${x.marketCapChange24h>0?"Growth":"Volatility"} Alert`,summary:`Total market cap is $${(x.totalMarketCap/1e12).toFixed(2)}T with ${x.marketCapChange24h>0?"growth":"decline"} of ${Math.abs(x.marketCapChange24h).toFixed(2)}%.`,confidence:85,timeframe:"Current",impact:Math.abs(x.marketCapChange24h)>3?"high":"medium",category:"Market",reasoning:[`BTC Dominance: ${x.btcDominance.toFixed(1)}%`,`ETH Dominance: ${x.ethDominance.toFixed(1)}%`,`24h Volume: $${(x.total24hVolume/1e9).toFixed(1)}B`],actionable:!0},{id:"4",type:"neutral",title:"Altcoin Season Indicators Mixed",summary:"Market showing conflicting signals for broad altcoin rally.",confidence:65,timeframe:"3-6 weeks",impact:"medium",category:"Market",reasoning:["Bitcoin dominance stabilizing","Some altcoins showing strength","Overall market sentiment cautious"],actionable:!1},{id:"5",type:"bearish",title:"Regulatory Headwinds Increasing",summary:"Policy uncertainty may create short-term market pressure.",confidence:78,timeframe:"1-3 months",impact:"medium",category:"Regulation",reasoning:["Increased regulatory scrutiny","Policy announcements pending","Market historically sensitive to regulation"],actionable:!0}];r(b.slice(0,i)),d(new Date),o(!1)}catch(x){c(x instanceof Error?x.message:"Failed to fetch AI insights"),o(!1)}};y.useEffect(()=>{u();const x=setInterval(u,30*60*1e3);return()=>clearInterval(x)},[i]);const m=x=>{const N={bullish:{color:"text-green-400",bg:"bg-green-400/20",border:"border-green-400/30",icon:Q},bearish:{color:"text-red-400",bg:"bg-red-400/20",border:"border-red-400/30",icon:me},warning:{color:"text-yellow-400",bg:"bg-yellow-400/20",border:"border-yellow-400/30",icon:ue},opportunity:{color:"text-blue-400",bg:"bg-blue-400/20",border:"border-blue-400/30",icon:ge},neutral:{color:"text-gray-400",bg:"bg-gray-400/20",border:"border-gray-400/30",icon:Ne}};return N[x]||N.neutral},f=x=>x>=80?"text-green-400":x>=60?"text-yellow-400":"text-red-400",j=x=>({high:"text-red-400",medium:"text-yellow-400",low:"text-green-400"})[x]||"text-gray-400",g=x=>{const p=Math.floor((new Date().getTime()-x.getTime())/(1e3*60));return p<1?"Just now":p<60?`${p}m ago`:`${Math.floor(p/60)}h ago`};return n?e.jsxs("div",{className:`glass-card p-6 ${s}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Daily AI Insights"})]}),e.jsx(W,{className:"w-4 h-4 text-white/60 animate-spin"})]}),e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((x,N)=>e.jsxs("div",{className:"animate-pulse p-4 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-white/5 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-white/5 rounded w-1/2"})]},N))})]}):l?e.jsxs("div",{className:`glass-card p-6 ${s}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Daily AI Insights"})]}),e.jsx("button",{onClick:u,className:"p-1 hover:bg-white/10 rounded",children:e.jsx(W,{className:"w-4 h-4 text-white/60"})})]}),e.jsxs("div",{className:"text-red-400 text-sm",children:[e.jsx(Ge,{className:"w-4 h-4 inline mr-2"}),l]})]}):e.jsxs("div",{className:`glass-card p-6 ${s}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Daily AI Insights"}),e.jsx(Dn,{className:"w-4 h-4 text-purple-400 animate-pulse"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-white/60",children:["Updated ",g(h)]}),e.jsx("button",{onClick:u,className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(W,{className:"w-4 h-4 text-white/60"})})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsx(ee,{children:a.map((x,N)=>{const p=m(x.type),b=p.icon;return e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:N*.1},className:`p-4 bg-white/5 rounded-lg border ${p.border} hover:bg-white/10 transition-all duration-300 cursor-pointer group`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${p.bg} flex-shrink-0`,children:e.jsx(b,{className:`w-4 h-4 ${p.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"text-white font-medium text-sm leading-tight group-hover:text-blue-400 transition-colors",children:x.title}),x.actionable&&e.jsx(Rt,{className:"w-3 h-3 text-yellow-400 flex-shrink-0 mt-0.5"})]}),e.jsx("p",{className:"text-white/70 text-xs mb-3 leading-relaxed",children:x.summary}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-white/50",children:x.category}),e.jsx("span",{className:"text-white/30",children:""}),e.jsx("span",{className:"text-white/50",children:x.timeframe}),e.jsx("span",{className:"text-white/30",children:""}),e.jsxs("span",{className:`font-medium ${j(x.impact)}`,children:[x.impact," impact"]})]}),t&&e.jsxs("div",{className:`font-medium ${f(x.confidence)}`,children:[x.confidence,"% confidence"]})]}),e.jsxs("details",{className:"mt-3 group/details",children:[e.jsx("summary",{className:"text-xs text-blue-400 cursor-pointer hover:text-blue-300 transition-colors",children:"View reasoning "}),e.jsx("div",{className:"mt-2 pl-3 border-l-2 border-white/10",children:e.jsx("ul",{className:"space-y-1",children:x.reasoning.map((w,k)=>e.jsxs("li",{className:"text-xs text-white/60 flex items-start gap-2",children:[e.jsx("span",{className:"text-white/40 mt-1",children:""}),e.jsx("span",{children:w})]},k))})})]})]})]})},x.id)})})}),e.jsx("div",{className:"mt-4 pt-3 border-t border-white/10",children:e.jsx("button",{className:"w-full text-center text-purple-400 hover:text-purple-300 text-sm font-medium transition-colors",children:"View Full AI Analysis "})})]})},Ud=({maxEvents:i=5,showPastEvents:t=!1,timeframe:s="week",className:a=""})=>{const[r,n]=y.useState([]),[o,l]=y.useState(!0),[c,h]=y.useState(null),[d,u]=y.useState(s),m=async()=>{try{h(null);let p=[{id:"1",title:"Federal Reserve Interest Rate Decision",description:"FOMC announces federal funds rate decision and monetary policy statement.",date:new Date(Date.now()+2*24*60*60*1e3).toISOString(),time:"14:00 EST",impact:"high",category:"monetary",status:"upcoming",relevantAssets:["BTC","ETH","DXY","SPY"],expectedOutcome:"Rate hold at 5.25-5.50%"},{id:"2",title:"Bitcoin ETF Approval Deadline",description:"SEC deadline for decision on pending Bitcoin ETF applications.",date:new Date(Date.now()+5*24*60*60*1e3).toISOString(),time:"17:00 EST",impact:"high",category:"regulatory",status:"upcoming",relevantAssets:["BTC","GBTC","COIN"],expectedOutcome:"Approval expected"},{id:"3",title:"Ethereum Shanghai Upgrade Anniversary",description:"One year since the Shanghai upgrade enabled ETH staking withdrawals.",date:new Date(Date.now()+1*24*60*60*1e3).toISOString(),time:"12:00 UTC",impact:"medium",category:"technical",status:"upcoming",relevantAssets:["ETH","LDO","RPL"],expectedOutcome:"Staking metrics review"},{id:"4",title:"Coinbase Q4 Earnings Report",description:"Quarterly earnings and trading volume metrics from major crypto exchange.",date:new Date(Date.now()+3*24*60*60*1e3).toISOString(),time:"16:30 EST",impact:"medium",category:"earnings",status:"upcoming",relevantAssets:["COIN","BTC","ETH"],expectedOutcome:"Revenue beat expected"},{id:"5",title:"CPI Inflation Data Release",description:"Consumer Price Index data that could influence Fed policy and crypto markets.",date:new Date(Date.now()+7*24*60*60*1e3).toISOString(),time:"08:30 EST",impact:"high",category:"market",status:"upcoming",relevantAssets:["BTC","ETH","GOLD","DXY"],expectedOutcome:"3.2% YoY expected"},{id:"6",title:"Solana Breakpoint Conference",description:"Annual Solana developer conference with major announcements expected.",date:new Date(Date.now()-1*24*60*60*1e3).toISOString(),time:"09:00 PST",impact:"medium",category:"technical",status:"completed",relevantAssets:["SOL","RAY","SRM"],actualOutcome:"New DeFi partnerships announced"}];t||(p=p.filter(b=>new Date(b.date)>=new Date)),p.sort((b,w)=>new Date(b.date).getTime()-new Date(w.date).getTime()),n(p.slice(0,i)),l(!1)}catch(N){h(N instanceof Error?N.message:"Failed to fetch economic events"),l(!1)}};y.useEffect(()=>{m();const N=setInterval(m,15*60*1e3);return()=>clearInterval(N)},[i,t,d]);const f=N=>{const p=new Date(N),b=new Date,w=Math.floor((p.getTime()-b.getTime())/(1e3*60*60*24));return w===0?"Today":w===1?"Tomorrow":w===-1?"Yesterday":w>0&&w<=7?`In ${w} days`:w<0&&w>=-7?`${Math.abs(w)} days ago`:p.toLocaleDateString("en-US",{month:"short",day:"numeric",year:p.getFullYear()!==b.getFullYear()?"numeric":void 0})},j=N=>{const p={high:{color:"text-red-400",bg:"bg-red-400/20",border:"border-red-400/30",dot:"bg-red-400"},medium:{color:"text-yellow-400",bg:"bg-yellow-400/20",border:"border-yellow-400/30",dot:"bg-yellow-400"},low:{color:"text-green-400",bg:"bg-green-400/20",border:"border-green-400/30",dot:"bg-green-400"}};return p[N]||p.medium},g=N=>({monetary:Ln,regulatory:Rn,earnings:Q,technical:De,market:Tt})[N]||Tt,x=N=>({upcoming:"text-blue-400",live:"text-green-400",completed:"text-gray-400"})[N]||"text-gray-400";return o?e.jsxs("div",{className:`glass-card p-6 ${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5 text-indigo-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Economic Calendar"})]}),e.jsx(W,{className:"w-4 h-4 text-white/60 animate-spin"})]}),e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((N,p)=>e.jsxs("div",{className:"animate-pulse p-3 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-white/5 rounded w-3/4"})]},p))})]}):c?e.jsxs("div",{className:`glass-card p-6 ${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5 text-indigo-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Economic Calendar"})]}),e.jsx("button",{onClick:m,className:"p-1 hover:bg-white/10 rounded",children:e.jsx(W,{className:"w-4 h-4 text-white/60"})})]}),e.jsxs("div",{className:"text-red-400 text-sm",children:[e.jsx(Ge,{className:"w-4 h-4 inline mr-2"}),c]})]}):e.jsxs("div",{className:`glass-card p-6 ${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5 text-indigo-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Economic Calendar"})]}),e.jsx("button",{onClick:m,className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(W,{className:"w-4 h-4 text-white/60"})})]}),e.jsx("div",{className:"space-y-3",children:e.jsx(ee,{children:r.map((N,p)=>{const b=j(N.impact),w=g(N.category);return e.jsx(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:p*.1},className:`p-3 bg-white/5 rounded-lg border ${b.border} hover:bg-white/10 transition-all duration-300 cursor-pointer group`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1 flex-shrink-0",children:[e.jsx("div",{className:`p-2 rounded-lg ${b.bg}`,children:e.jsx(w,{className:`w-4 h-4 ${b.color}`})}),e.jsx("div",{className:`w-2 h-2 rounded-full ${b.dot}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("h4",{className:"text-white font-medium text-sm leading-tight group-hover:text-blue-400 transition-colors",children:N.title}),e.jsx(yr,{className:"w-3 h-3 text-white/40 group-hover:text-white/60 flex-shrink-0 mt-0.5"})]}),e.jsx("p",{className:"text-white/60 text-xs mb-2 leading-relaxed",children:N.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nt,{className:"w-3 h-3 text-white/40"}),e.jsx("span",{className:"text-white/60",children:f(N.date)}),e.jsx("span",{className:"text-white/40",children:""}),e.jsx("span",{className:"text-white/60",children:N.time})]}),e.jsxs("div",{className:`px-2 py-1 rounded-full ${b.bg} ${b.color} text-xs font-medium`,children:[N.impact," impact"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-white/50",children:"Assets:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[N.relevantAssets.slice(0,3).map((k,_)=>e.jsx("span",{className:"text-xs text-blue-400 bg-blue-400/20 px-1.5 py-0.5 rounded",children:k},k)),N.relevantAssets.length>3&&e.jsxs("span",{className:"text-xs text-white/40",children:["+",N.relevantAssets.length-3]})]})]}),e.jsx("span",{className:`text-xs font-medium ${x(N.status)} capitalize`,children:N.status})]}),(N.expectedOutcome||N.actualOutcome)&&e.jsx("div",{className:"mt-2 pt-2 border-t border-white/10",children:e.jsx("div",{className:"text-xs",children:N.actualOutcome?e.jsxs("span",{className:"text-green-400",children:[e.jsx("strong",{children:"Actual:"})," ",N.actualOutcome]}):e.jsxs("span",{className:"text-white/60",children:[e.jsx("strong",{children:"Expected:"})," ",N.expectedOutcome]})})})]})]})},N.id)})})}),e.jsx("div",{className:"mt-4 pt-3 border-t border-white/10",children:e.jsx("button",{className:"w-full text-center text-indigo-400 hover:text-indigo-300 text-sm font-medium transition-colors",children:"View Full Calendar "})})]})},Bd=({category:i,difficulty:t,autoRotate:s=!0,className:a=""})=>{const[r,n]=y.useState([]),[o,l]=y.useState(0),[c,h]=y.useState(!0),[d,u]=y.useState(null),m=async()=>{try{u(null);let k=[{id:"1",title:"Dollar-Cost Averaging (DCA) Strategy",content:"DCA involves investing a fixed amount regularly regardless of price. This strategy helps reduce the impact of volatility and removes the stress of timing the market.",category:"trading",difficulty:"beginner",readTime:2,tags:["strategy","risk-management","investing"],actionable:!0,example:"Invest $100 in Bitcoin every Monday for 6 months, regardless of price.",warning:"DCA works best in long-term uptrends. Consider market conditions."},{id:"2",title:"Understanding Impermanent Loss",content:"Impermanent loss occurs when providing liquidity to AMM pools. The loss happens when token prices diverge from when you deposited them.",category:"defi",difficulty:"intermediate",readTime:3,tags:["liquidity","amm","yield-farming"],actionable:!0,example:"If you deposit ETH/USDC at 1:2000 ratio and ETH doubles, you lose potential gains.",warning:"Always calculate potential impermanent loss before providing liquidity."},{id:"3",title:"Hardware Wallet Security",content:"Hardware wallets store your private keys offline, making them immune to online attacks. They're essential for securing large crypto holdings.",category:"security",difficulty:"beginner",readTime:2,tags:["security","wallet","storage"],actionable:!0,example:"Ledger Nano S/X or Trezor for storing long-term holdings.",warning:"Always buy hardware wallets directly from manufacturers."},{id:"4",title:"Reading Candlestick Patterns",content:"Candlesticks show open, high, low, and close prices. Green/white candles indicate price increases, red/black indicate decreases.",category:"trading",difficulty:"beginner",readTime:4,tags:["technical-analysis","charts","patterns"],actionable:!0,example:"A long green candle with small wicks suggests strong buying pressure.",warning:"Patterns work best when combined with volume and other indicators."},{id:"5",title:"Smart Contract Audits",content:"Before using any DeFi protocol, check if it has been audited by reputable firms. Audits help identify potential vulnerabilities.",category:"security",difficulty:"intermediate",readTime:3,tags:["smart-contracts","audits","due-diligence"],actionable:!0,example:"Look for audits from CertiK, ConsenSys Diligence, or Trail of Bits.",warning:"Audits don't guarantee safety. New vulnerabilities can still be discovered."},{id:"6",title:"Gas Optimization Techniques",content:"Save on transaction fees by timing transactions during low network congestion, batching operations, and using Layer 2 solutions.",category:"advanced",difficulty:"intermediate",readTime:3,tags:["gas","optimization","layer2"],actionable:!0,example:"Use Arbitrum or Optimism for cheaper transactions, or trade on weekends.",warning:"Layer 2 solutions may have different security assumptions."},{id:"7",title:"Yield Farming Risks",content:"High APY often comes with high risk. Consider smart contract risk, impermanent loss, and token emission schedules before farming.",category:"defi",difficulty:"advanced",readTime:4,tags:["yield-farming","risk-assessment","apy"],actionable:!0,example:"A 1000% APY farm likely has unsustainable tokenomics or high risk.",warning:"Many high-yield farms are Ponzi schemes or have exit scam potential."},{id:"8",title:"Portfolio Diversification",content:"Don't put all funds in one asset or sector. Spread risk across different cryptocurrencies, market caps, and use cases.",category:"basics",difficulty:"beginner",readTime:2,tags:["portfolio","diversification","risk-management"],actionable:!0,example:"60% large-cap (BTC, ETH), 30% mid-cap, 10% small-cap/experimental.",warning:"Crypto markets are highly correlated. Traditional diversification may not apply."}];i&&(k=k.filter(_=>_.category===i)),t&&(k=k.filter(_=>_.difficulty===t)),n(k),h(!1)}catch(w){u(w instanceof Error?w.message:"Failed to fetch educational tips"),h(!1)}};y.useEffect(()=>{m()},[i,t]),y.useEffect(()=>{if(s&&r.length>1){const w=setInterval(()=>{l(k=>(k+1)%r.length)},15e3);return()=>clearInterval(w)}},[s,r.length]);const f=()=>{l(w=>(w+1)%r.length)},j=()=>{l(w=>(w-1+r.length)%r.length)},g=w=>{const k={trading:{color:"text-green-400",bg:"bg-green-400/20",icon:Q},defi:{color:"text-blue-400",bg:"bg-blue-400/20",icon:ge},security:{color:"text-red-400",bg:"bg-red-400/20",icon:Ut},basics:{color:"text-yellow-400",bg:"bg-yellow-400/20",icon:On},advanced:{color:"text-purple-400",bg:"bg-purple-400/20",icon:vr}};return k[w]||k.basics},x=w=>({beginner:"text-green-400",intermediate:"text-yellow-400",advanced:"text-red-400"})[w]||"text-gray-400";if(c)return e.jsxs("div",{className:`glass-card p-6 ${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Daily Learning"})]}),e.jsx(W,{className:"w-4 h-4 text-white/60 animate-spin"})]}),e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded mb-3"}),e.jsx("div",{className:"h-3 bg-white/5 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-white/5 rounded w-3/4"})]})]});if(d||r.length===0)return e.jsxs("div",{className:`glass-card p-6 ${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Daily Learning"})]}),e.jsx("button",{onClick:m,className:"p-1 hover:bg-white/10 rounded",children:e.jsx(W,{className:"w-4 h-4 text-white/60"})})]}),e.jsxs("div",{className:"text-red-400 text-sm",children:[e.jsx(ue,{className:"w-4 h-4 inline mr-2"}),d||"No tips available for the selected criteria"]})]});const N=r[o],p=g(N.category),b=p.icon;return e.jsxs("div",{className:`glass-card p-6 ${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Daily Learning"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"})]}),e.jsx("div",{className:"flex items-center gap-2",children:r.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:j,className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(Mn,{className:"w-4 h-4 text-white/60"})}),e.jsxs("span",{className:"text-xs text-white/60",children:[o+1,"/",r.length]}),e.jsx("button",{onClick:f,className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(yr,{className:"w-4 h-4 text-white/60"})})]})})]}),e.jsx(ee,{mode:"wait",children:e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${p.bg} flex-shrink-0`,children:e.jsx(b,{className:`w-4 h-4 ${p.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white font-medium text-sm mb-1",children:N.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:`${x(N.difficulty)} capitalize`,children:N.difficulty}),e.jsx("span",{className:"text-white/40",children:""}),e.jsxs("span",{className:"text-white/60",children:[N.readTime," min read"]}),e.jsx("span",{className:"text-white/40",children:""}),e.jsx("span",{className:`${p.color} capitalize`,children:N.category})]})]})]}),e.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:N.content}),N.example&&e.jsx("div",{className:"p-3 bg-blue-400/10 border border-blue-400/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-blue-400 text-xs font-medium mb-1",children:"Example:"}),e.jsx("div",{className:"text-white/70 text-xs",children:N.example})]})]})}),N.warning&&e.jsx("div",{className:"p-3 bg-yellow-400/10 border border-yellow-400/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-yellow-400 text-xs font-medium mb-1",children:"Important:"}),e.jsx("div",{className:"text-white/70 text-xs",children:N.warning})]})]})}),e.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:N.tags.map(w=>e.jsxs("span",{className:"text-xs text-white/60 bg-white/10 px-2 py-1 rounded-full",children:["#",w]},w))})]},N.id)}),e.jsx("div",{className:"mt-4 pt-3 border-t border-white/10",children:e.jsx("button",{className:"w-full text-center text-yellow-400 hover:text-yellow-300 text-sm font-medium transition-colors",children:"Explore Learning Hub "})})]})},Hd=({symbol:i,data:t=[],isLoading:s=!1,onTimeframeChange:a,onSymbolChange:r})=>{const[n,o]=y.useState(0),[l,c]=y.useState(0),[h,d]=y.useState("1h"),[u,m]=y.useState(i),[f,j]=y.useState(s),[g,x]=y.useState(null),N=[{id:"BTC",name:"Bitcoin"},{id:"ETH",name:"Ethereum"},{id:"BNB",name:"Binance Coin"},{id:"ADA",name:"Cardano"},{id:"SOL",name:"Solana"},{id:"LINK",name:"Chainlink"}],p=[{id:"1h",name:"1H"},{id:"4h",name:"4H"},{id:"1d",name:"1D"},{id:"1w",name:"1W"}],b=async()=>{try{j(!0),x(null),console.log(` CleanAdvancedTradingChartFixed: Fetching data for ${u}...`);const I=await fetch("/.netlify/functions/crypto-prices");if(!I.ok)throw new Error(`HTTP error! status: ${I.status}`);const v=await I.json();if(v.success&&v.data&&Array.isArray(v.data)){const A=u,$=v.data.find(S=>S.symbol===A);if($)o($.price||0),c($.price_change_percentage_24h||0),console.log(` CleanAdvancedTradingChartFixed: Updated ${u}: $${$.price}`);else{const S=v.data[0];o(S.price||0),c(S.price_change_percentage_24h||0),console.log(` CleanAdvancedTradingChartFixed: Symbol ${u} not found, using ${S.symbol}`)}}else throw new Error("Invalid response format from API");j(!1)}catch(I){console.error(" CleanAdvancedTradingChartFixed: Error:",I),x(I instanceof Error?I.message:"Unknown error"),o(45e3),c(2.5),j(!1)}};y.useEffect(()=>{b();const I=setInterval(b,3e4);return()=>clearInterval(I)},[u,h]);const w=I=>I>=1e3?`$${I.toLocaleString(void 0,{maximumFractionDigits:0})}`:I>=1?`$${I.toFixed(2)}`:`$${I.toFixed(6)}`,k=I=>`${I>=0?"+":""}${I.toFixed(2)}%`,_=I=>{m(I),r?.(I)},P=I=>{d(I),a?.(I)},E=()=>{const $=[],S=n||45e3,C=24;for(let O=0;O<C;O++){const H=(Math.random()-.5)*.08,G=S*(1+H),q=G*(1+(Math.random()-.5)*.05),J=Math.max(G,q)*(1+Math.random()*.03),ne=Math.min(G,q)*(1-Math.random()*.03);$.push({open:G,high:J,low:ne,close:q})}const D=$.map(O=>[O.high,O.low,O.open,O.close]).flat(),T=Math.min(...D)*.995,V=Math.max(...D)*1.005-T;return e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 800 400",className:"overflow-visible",children:[[0,.2,.4,.6,.8,1].map(O=>e.jsxs("g",{children:[e.jsx("line",{x1:40,y1:40+O*(400-2*40),x2:760,y2:40+O*(400-2*40),stroke:"rgba(255,255,255,0.1)",strokeDasharray:"2,2"}),e.jsx("text",{x:765,y:40+O*(400-2*40)+4,fill:"rgba(255,255,255,0.6)",fontSize:"12",textAnchor:"start",children:w(T+(1-O)*V)})]},O)),$.map((O,H)=>{const G=40+H/($.length-1)*720,q=40+(1-(O.open-T)/V)*(400-2*40),J=40+(1-(O.close-T)/V)*(400-2*40),ne=40+(1-(O.high-T)/V)*(400-2*40),St=40+(1-(O.low-T)/V)*(400-2*40),lt=O.close>=O.open,_t=lt?"#10B981":"#EF4444",vs=Math.abs(J-q),qt=Math.min(q,J);return e.jsxs("g",{children:[e.jsx("line",{x1:G,y1:ne,x2:G,y2:St,stroke:_t,strokeWidth:"1"}),e.jsx("rect",{x:G-4,y:qt,width:"8",height:Math.max(vs,1),fill:lt?_t:"transparent",stroke:_t,strokeWidth:"1"})]},H)})]})};return g?e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"h-96 bg-gray-900/80 backdrop-blur-sm rounded-xl border border-red-500/20 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-red-500 text-sm",children:"!"})}),e.jsx("p",{className:"text-red-400 mb-2",children:"Chart Error"}),e.jsx("p",{className:"text-white/60 text-sm",children:g}),e.jsx("button",{onClick:b,className:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm transition-colors",children:"Retry"})]})})}):f?e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"h-96 bg-gray-900/80 backdrop-blur-sm rounded-xl border border-white/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Loading advanced chart data..."})]})})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:u}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-white",children:w(n)}),e.jsxs("div",{className:`flex items-center gap-1 ${l>=0?"text-green-400":"text-red-400"}`,children:[l>=0?e.jsx(Q,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:k(l)})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("select",{value:u,onChange:I=>_(I.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:N.map(I=>e.jsx("option",{value:I.id,className:"bg-gray-800",children:I.name},I.id))}),e.jsx("div",{className:"flex bg-white/10 rounded-lg p-1",children:p.map(I=>e.jsx("button",{onClick:()=>P(I.id),className:`px-3 py-1 rounded text-sm transition-colors ${h===I.id?"bg-blue-500 text-white":"text-white/60 hover:text-white hover:bg-white/10"}`,children:I.name},I.id))})]})]}),e.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm rounded-xl border border-white/10 p-6",children:e.jsx("div",{className:"h-96 w-full bg-black/20 rounded-lg overflow-hidden",children:E()})})]})},zd=({symbol:i,priceData:t=[],volumeData:s=[],onIndicatorChange:a})=>{const[r,n]=y.useState([]),[o,l]=y.useState("all"),[c,h]=y.useState(null),[d,u]=y.useState("");y.useEffect(()=>{const v=[{id:"rsi",name:"RSI (Relative Strength Index)",type:"momentum",description:"Measures the speed and change of price movements. Values above 70 indicate overbought, below 30 oversold.",parameters:{period:{value:14,min:2,max:50,step:1}},enabled:!0,color:"#8b5cf6",data:m(t,14),currentValue:0,signal:"neutral",strength:0},{id:"macd",name:"MACD (Moving Average Convergence Divergence)",type:"momentum",description:"Shows the relationship between two moving averages. Crossovers indicate potential buy/sell signals.",parameters:{fast:{value:12,min:5,max:50,step:1},slow:{value:26,min:10,max:100,step:1},signal:{value:9,min:5,max:30,step:1}},enabled:!0,color:"#10b981",data:f(t,12,26,9),currentValue:0,signal:"neutral",strength:0},{id:"bb",name:"Bollinger Bands",type:"volatility",description:"Volatility bands placed above and below a moving average. Price touching bands may indicate reversal.",parameters:{period:{value:20,min:5,max:50,step:1},deviation:{value:2,min:1,max:3,step:.1}},enabled:!1,color:"#f59e0b",data:j(t,20),currentValue:0,signal:"neutral",strength:0},{id:"sma",name:"SMA (Simple Moving Average)",type:"trend",description:"Average price over a specified period. Price above SMA indicates uptrend, below indicates downtrend.",parameters:{period:{value:20,min:5,max:200,step:1}},enabled:!1,color:"#ef4444",data:g(t,20),currentValue:0,signal:"neutral",strength:0},{id:"ema",name:"EMA (Exponential Moving Average)",type:"trend",description:"Weighted average giving more importance to recent prices. More responsive than SMA.",parameters:{period:{value:20,min:5,max:200,step:1}},enabled:!1,color:"#06b6d4",data:x(t,20),currentValue:0,signal:"neutral",strength:0},{id:"stoch",name:"Stochastic Oscillator",type:"momentum",description:"Compares closing price to price range over time. Values above 80 overbought, below 20 oversold.",parameters:{k:{value:14,min:5,max:50,step:1},d:{value:3,min:1,max:10,step:1}},enabled:!1,color:"#ec4899",data:N(t,14),currentValue:0,signal:"neutral",strength:0}];n(v)},[t]),y.useEffect(()=>{const v=r.map(A=>{let $=[],S=0,C="neutral",D=0;switch(A.id){case"rsi":$=m(t,A.parameters.period.value),S=$.length>0?$[$.length-1].value:0,C=S>70?"sell":S<30?"buy":"neutral",D=Math.abs(50-S)*2;break;case"macd":$=f(t,A.parameters.fast.value,A.parameters.slow.value,A.parameters.signal.value),S=$.length>0?$[$.length-1].value:0,C=S>0?"buy":S<0?"sell":"neutral",D=Math.min(Math.abs(S)*10,100);break;case"bb":$=j(t,A.parameters.period.value,A.parameters.deviation.value),S=$.length>0?$[$.length-1].value:0,C="neutral",D=50;break;case"sma":$=g(t,A.parameters.period.value),S=$.length>0?$[$.length-1].value:0;const T=t.length>0?t[t.length-1]:0;C=T>S?"buy":T<S?"sell":"neutral",D=Math.abs((T-S)/S)*100;break;case"ema":$=x(t,A.parameters.period.value),S=$.length>0?$[$.length-1].value:0;const M=t.length>0?t[t.length-1]:0;C=M>S?"buy":M<S?"sell":"neutral",D=Math.abs((M-S)/S)*100;break;case"stoch":$=N(t,A.parameters.k.value,A.parameters.d.value),S=$.length>0?$[$.length-1].value:0,C=S>80?"sell":S<20?"buy":"neutral",D=S>50?(S-50)*2:(50-S)*2;break}return{...A,data:$,currentValue:S,signal:C,strength:Math.min(D,100)}});n(v),a?.(v)},[t,a]);function m(v,A){if(v.length<A+1)return[];const $=[];for(let S=A;S<v.length;S++){const C=[],D=[];for(let H=S-A+1;H<=S;H++){const G=v[H]-v[H-1];G>0?C.push(G):D.push(Math.abs(G))}const T=C.length>0?C.reduce((H,G)=>H+G,0)/A:0,M=D.length>0?D.reduce((H,G)=>H+G,0)/A:0,O=100-100/(1+(M===0?100:T/M));$.push({timestamp:Date.now()-(v.length-S)*6e4,value:O,signal:O>70?"sell":O<30?"buy":"neutral"})}return $}function f(v,A,$,S){if(v.length<$)return[];const C=b(v,A),D=b(v,$),T=C.map((V,O)=>V-D[O]),M=b(T,S);return T.slice(S-1).map((V,O)=>({timestamp:Date.now()-(T.length-O)*6e4,value:V-M[O],signal:V>M[O]?"buy":"sell"}))}function j(v,A,$){if(v.length<A)return[];const S=p(v,A),C=[];for(let D=A-1;D<v.length;D++){const T=v.slice(D-A+1,D+1),M=S[D-A+1];T.reduce((V,O)=>V+Math.pow(O-M,2),0)/A,C.push({timestamp:Date.now()-(v.length-D)*6e4,value:M,signal:"neutral"})}return C}function g(v,A){return p(v,A).map(($,S)=>({timestamp:Date.now()-(v.length-S-A+1)*6e4,value:$,signal:"neutral"}))}function x(v,A){return b(v,A).map(($,S)=>({timestamp:Date.now()-(v.length-S)*6e4,value:$,signal:"neutral"}))}function N(v,A,$){if(v.length<A)return[];const S=[];for(let C=A-1;C<v.length;C++){const D=v.slice(C-A+1,C+1),T=Math.max(...D),M=Math.min(...D),O=(v[C]-M)/(T-M)*100;S.push({timestamp:Date.now()-(v.length-C)*6e4,value:O,signal:O>80?"sell":O<20?"buy":"neutral"})}return S}function p(v,A){const $=[];for(let S=A-1;S<v.length;S++){const C=v.slice(S-A+1,S+1).reduce((D,T)=>D+T,0);$.push(C/A)}return $}function b(v,A){const $=2/(A+1),S=[v[0]];for(let C=1;C<v.length;C++)S.push(v[C]*$+S[C-1]*(1-$));return S}const w=v=>{n(A=>A.map($=>$.id===v?{...$,enabled:!$.enabled}:$))},k=(v,A,$)=>{n(S=>S.map(C=>C.id===v?{...C,parameters:{...C.parameters,[A]:{...C.parameters[A],value:$}}}:C))},_=v=>{switch(v){case"buy":return"text-green-400";case"sell":return"text-red-400";default:return"text-white/60"}},P=v=>{switch(v){case"buy":return e.jsx(Q,{className:"w-4 h-4"});case"sell":return e.jsx(me,{className:"w-4 h-4"});default:return e.jsx(se,{className:"w-4 h-4"})}},E=r.filter(v=>o==="all"||v.type===o),I=[{value:"all",label:"All Indicators"},{value:"momentum",label:"Momentum"},{value:"trend",label:"Trend"},{value:"volatility",label:"Volatility"},{value:"volume",label:"Volume"},{value:"custom",label:"Custom"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Technical Indicators"}),e.jsxs("p",{className:"text-white/60",children:["Advanced technical analysis tools for ",i]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("select",{value:o,onChange:v=>l(v.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-400",children:I.map(v=>e.jsx("option",{value:v.value,className:"bg-gray-800",children:v.label},v.value))})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map((v,A)=>e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:A*.1},className:`glass-card p-6 ${v.enabled?"border border-purple-400/30":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:v.name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${v.type==="momentum"?"bg-blue-500/20 text-blue-400":v.type==="trend"?"bg-green-500/20 text-green-400":v.type==="volatility"?"bg-yellow-500/20 text-yellow-400":"bg-purple-500/20 text-purple-400"}`,children:v.type})]}),e.jsx("p",{className:"text-white/60 text-sm line-clamp-2",children:v.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(c===v.id?null:v.id),className:"p-1 hover:bg-white/10 rounded text-white/60 transition-colors",children:e.jsx(ps,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(v.id),className:`p-2 rounded transition-colors ${v.enabled?"bg-purple-600 text-white":"bg-white/10 text-white/60 hover:bg-white/20"}`,children:v.enabled?e.jsx(cs,{className:"w-4 h-4"}):e.jsx(da,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Current Value:"}),e.jsx("span",{className:"text-white font-bold",children:v.currentValue.toFixed(2)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Signal:"}),e.jsxs("div",{className:`flex items-center gap-1 ${_(v.signal)}`,children:[P(v.signal),e.jsx("span",{className:"font-medium capitalize",children:v.signal})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Strength:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-white/10 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v.strength>70?"bg-red-400":v.strength>30?"bg-yellow-400":"bg-green-400"}`,style:{width:`${v.strength}%`}})}),e.jsxs("span",{className:"text-white/80 text-sm",children:[v.strength.toFixed(0),"%"]})]})]})]}),e.jsx(ee,{children:c===v.id&&e.jsxs(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-white/10 pt-4 mt-4",children:[e.jsx("h4",{className:"text-white font-medium mb-3",children:"Parameters"}),e.jsx("div",{className:"space-y-3",children:Object.entries(v.parameters).map(([$,S])=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-1 capitalize",children:$}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"range",min:S.min,max:S.max,step:S.step,value:S.value,onChange:C=>k(v.id,$,Number(C.target.value)),className:"flex-1"}),e.jsx("span",{className:"text-white/80 text-sm w-12 text-right",children:S.value})]})]},$))})]})})]},v.id))}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Market Signals Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.filter(v=>v.enabled&&v.signal==="buy").length}),e.jsx("div",{className:"text-white/60",children:"Buy Signals"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:r.filter(v=>v.enabled&&v.signal==="sell").length}),e.jsx("div",{className:"text-white/60",children:"Sell Signals"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white/60",children:r.filter(v=>v.enabled&&v.signal==="neutral").length}),e.jsx("div",{className:"text-white/60",children:"Neutral"})]})]})]})]})},Vd=({symbol:i,historicalData:t=[],onStrategyChange:s})=>{const[a,r]=y.useState(!1),[n,o]=y.useState(0),[l,c]=y.useState(null),[h,d]=y.useState(null),[u,m]=y.useState([]),[f,j]=y.useState([]),[g,x]=y.useState(""),[N,p]=y.useState("1d"),[b,w]=y.useState("2023-01-01"),[k,_]=y.useState("2024-01-01"),[P,E]=y.useState(1e4),[I,v]=y.useState(.1);y.useEffect(()=>{const T=[{id:"sma-crossover",name:"SMA Crossover",description:"Buy when fast SMA crosses above slow SMA, sell when it crosses below",parameters:{fastPeriod:10,slowPeriod:30,stopLoss:5,takeProfit:10},rules:{entry:["Fast SMA > Slow SMA","Volume > Average Volume"],exit:["Fast SMA < Slow SMA","Stop Loss: -5%","Take Profit: +10%"],riskManagement:["Max position size: 10%","Max daily loss: 2%"]},isActive:!0},{id:"rsi-mean-reversion",name:"RSI Mean Reversion",description:"Buy when RSI is oversold, sell when overbought",parameters:{rsiPeriod:14,oversoldLevel:30,overboughtLevel:70,stopLoss:3,takeProfit:6},rules:{entry:["RSI < 30 (Oversold)","Price near support level"],exit:["RSI > 70 (Overbought)","Stop Loss: -3%","Take Profit: +6%"],riskManagement:["Max position size: 15%","Max concurrent trades: 3"]},isActive:!1},{id:"macd-momentum",name:"MACD Momentum",description:"Trade based on MACD signal line crossovers and histogram",parameters:{fastEMA:12,slowEMA:26,signalLine:9,stopLoss:4,takeProfit:8},rules:{entry:["MACD > Signal Line","MACD Histogram increasing","Price above 50 EMA"],exit:["MACD < Signal Line","Stop Loss: -4%","Take Profit: +8%"],riskManagement:["Position sizing based on volatility","Max risk per trade: 1%"]},isActive:!1}];j(T),c(T[0])},[]);const A=async()=>{if(!l)return;r(!0),o(0),m([]);const T=100;for(let O=0;O<=T;O++)await new Promise(H=>setTimeout(H,50)),o(O/T*100);const M={totalReturn:15.5+Math.random()*20,annualizedReturn:12.3+Math.random()*15,sharpeRatio:1.2+Math.random()*.8,maxDrawdown:-(5+Math.random()*10),winRate:55+Math.random()*20,totalTrades:45+Math.floor(Math.random()*50),profitFactor:1.1+Math.random()*.5,avgWin:2.5+Math.random()*2,avgLoss:-(1.5+Math.random()),largestWin:8+Math.random()*5,largestLoss:-(6+Math.random()*4),consecutiveWins:3+Math.floor(Math.random()*5),consecutiveLosses:2+Math.floor(Math.random()*3),volatility:15+Math.random()*10,calmarRatio:.8+Math.random()*.4},V=Array.from({length:M.totalTrades},(O,H)=>({id:`trade-${H}`,timestamp:Date.now()-(M.totalTrades-H)*24*60*60*1e3,type:Math.random()>.5?"buy":"sell",price:4e4+Math.random()*2e4,quantity:.1+Math.random()*.5,pnl:(Math.random()-.4)*1e3,reason:l.name,duration:Math.floor(Math.random()*72)+1}));d(M),m(V),r(!1)},$=()=>{r(!1),o(0)},S=T=>`$${T.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,C=T=>`${T>=0?"+":""}${T.toFixed(2)}%`,D=T=>T>0?"text-green-400":T<0?"text-red-400":"text-white/60";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Backtesting Engine"}),e.jsx("p",{className:"text-white/60",children:"Test your trading strategies with historical data"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:a?$:A,disabled:!l,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-colors ${a?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white disabled:bg-gray-600 disabled:cursor-not-allowed"}`,children:a?e.jsxs(e.Fragment,{children:[e.jsx(jr,{className:"w-4 h-4"}),"Stop Backtest"]}):e.jsxs(e.Fragment,{children:[e.jsx(Fn,{className:"w-4 h-4"}),"Run Backtest"]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Strategy Selection"}),e.jsx("div",{className:"space-y-3",children:f.map(T=>e.jsxs("div",{onClick:()=>c(T),className:`p-4 rounded-lg cursor-pointer transition-colors ${l?.id===T.id?"bg-purple-600/20 border border-purple-400":"bg-white/5 hover:bg-white/10 border border-white/10"}`,children:[e.jsx("h4",{className:"text-white font-medium mb-1",children:T.name}),e.jsx("p",{className:"text-white/60 text-sm",children:T.description})]},T.id))})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Symbol"}),e.jsx("input",{type:"text",value:i,readOnly:!0,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:b,onChange:T=>w(T.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:k,onChange:T=>_(T.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Initial Capital"}),e.jsx("input",{type:"number",value:P,onChange:T=>E(Number(T.target.value)),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Commission (%)"}),e.jsx("input",{type:"number",step:"0.01",value:I,onChange:T=>v(Number(T.target.value)),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Timeframe"}),e.jsxs("select",{value:N,onChange:T=>p(T.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[e.jsx("option",{value:"1m",className:"bg-gray-800",children:"1 Minute"}),e.jsx("option",{value:"5m",className:"bg-gray-800",children:"5 Minutes"}),e.jsx("option",{value:"15m",className:"bg-gray-800",children:"15 Minutes"}),e.jsx("option",{value:"1h",className:"bg-gray-800",children:"1 Hour"}),e.jsx("option",{value:"4h",className:"bg-gray-800",children:"4 Hours"}),e.jsx("option",{value:"1d",className:"bg-gray-800",children:"1 Day"})]})]})]})]}),l&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Strategy Rules"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-green-400"}),"Entry Conditions"]}),e.jsx("ul",{className:"space-y-1",children:l.rules.entry.map((T,M)=>e.jsxs("li",{className:"text-white/60 text-sm",children:[" ",T]},M))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-yellow-400"}),"Exit Conditions"]}),e.jsx("ul",{className:"space-y-1",children:l.rules.exit.map((T,M)=>e.jsxs("li",{className:"text-white/60 text-sm",children:[" ",T]},M))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 text-blue-400"}),"Risk Management"]}),e.jsx("ul",{className:"space-y-1",children:l.rules.riskManagement.map((T,M)=>e.jsxs("li",{className:"text-white/60 text-sm",children:[" ",T]},M))})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-white font-medium",children:"Running Backtest..."}),e.jsxs("span",{className:"text-white/60",children:[n.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${n}%`}})})]}),h&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${D(h.totalReturn)}`,children:C(h.totalReturn)}),e.jsx("div",{className:"text-white/60 text-sm",children:"Total Return"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${D(h.annualizedReturn)}`,children:C(h.annualizedReturn)}),e.jsx("div",{className:"text-white/60 text-sm",children:"Annualized Return"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:h.sharpeRatio.toFixed(2)}),e.jsx("div",{className:"text-white/60 text-sm",children:"Sharpe Ratio"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:C(h.maxDrawdown)}),e.jsx("div",{className:"text-white/60 text-sm",children:"Max Drawdown"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:C(h.winRate)}),e.jsx("div",{className:"text-white/60 text-sm",children:"Win Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:h.totalTrades}),e.jsx("div",{className:"text-white/60 text-sm",children:"Total Trades"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Profit Factor:"}),e.jsx("span",{className:"text-white",children:h.profitFactor.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Average Win:"}),e.jsx("span",{className:"text-green-400",children:C(h.avgWin)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Average Loss:"}),e.jsx("span",{className:"text-red-400",children:C(h.avgLoss)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Largest Win:"}),e.jsx("span",{className:"text-green-400",children:C(h.largestWin)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Largest Loss:"}),e.jsx("span",{className:"text-red-400",children:C(h.largestLoss)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Consecutive Wins:"}),e.jsx("span",{className:"text-white",children:h.consecutiveWins})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Consecutive Losses:"}),e.jsx("span",{className:"text-white",children:h.consecutiveLosses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Volatility:"}),e.jsx("span",{className:"text-white",children:C(h.volatility)})]})]})]})]}),u.length>0&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Trade History"}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:u.slice(0,20).map((T,M)=>e.jsxs(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:M*.05},className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${T.type==="buy"?"bg-green-400":"bg-red-400"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-white font-medium",children:[T.type.toUpperCase()," ",T.quantity.toFixed(4)," ",i]}),e.jsxs("div",{className:"text-white/60 text-sm",children:[S(T.price),"  ",new Date(T.timestamp).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-medium ${D(T.pnl)}`,children:[T.pnl>=0?"+":"",S(T.pnl)]}),T.duration&&e.jsxs("div",{className:"text-white/60 text-sm",children:[T.duration,"h"]})]})]},T.id))})})]}),!h&&!a&&e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(Ne,{className:"w-16 h-16 text-white/20 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Ready to Backtest"}),e.jsx("p",{className:"text-white/60",children:'Select a strategy and click "Run Backtest" to analyze performance'})]})]})]})]})},Gd=({symbols:i=[],onSignalAction:t})=>{const[s,a]=y.useState([]),[r,n]=y.useState([]),[o,l]=y.useState([]),[c,h]=y.useState("all"),[d,u]=y.useState("all"),[m,f]=y.useState("all"),[j,g]=y.useState(!1),[x,N]=y.useState(!0);y.useEffect(()=>{const v=[{id:"neural-net-v1",name:"Neural Network V1",type:"neural_network",accuracy:78.5,description:"Deep learning model trained on price patterns and volume data",isActive:!0,lastTrained:"2024-01-15",signals:156,successRate:76.2},{id:"lstm-sentiment",name:"LSTM Sentiment Model",type:"lstm",accuracy:82.1,description:"Long Short-Term Memory model incorporating sentiment analysis",isActive:!0,lastTrained:"2024-01-14",signals:89,successRate:81.5},{id:"transformer-multi",name:"Transformer Multi-Asset",type:"transformer",accuracy:85.3,description:"Transformer model analyzing cross-asset correlations",isActive:!1,lastTrained:"2024-01-12",signals:234,successRate:84.7}],A=[{id:"signal-1",symbol:"BTC",type:"buy",confidence:87,strength:"strong",timeframe:"4h",targetPrice:48500,stopLoss:42e3,riskReward:2.8,reasoning:["Strong bullish divergence detected on RSI","Volume surge indicates institutional accumulation","Breaking above key resistance at $45,000"],technicalFactors:["RSI Divergence","Volume Breakout","Support/Resistance"],fundamentalFactors:["ETF Inflows","Institutional Adoption"],sentimentScore:75,timestamp:Date.now()-30*60*1e3,expiresAt:Date.now()+4*60*60*1e3,accuracy:78.5,isActive:!0},{id:"signal-2",symbol:"ETH",type:"sell",confidence:72,strength:"moderate",timeframe:"1d",targetPrice:2200,stopLoss:2650,riskReward:1.9,reasoning:["Bearish head and shoulders pattern forming","Declining network activity","Overbought conditions on multiple timeframes"],technicalFactors:["Chart Pattern","Momentum Indicators","Overbought"],fundamentalFactors:["Network Activity","Gas Fees"],sentimentScore:35,timestamp:Date.now()-45*60*1e3,expiresAt:Date.now()+24*60*60*1e3,accuracy:82.1,isActive:!0},{id:"signal-3",symbol:"SOL",type:"buy",confidence:91,strength:"strong",timeframe:"1h",targetPrice:125,stopLoss:95,riskReward:3.2,reasoning:["Golden cross formation on moving averages","Ecosystem growth accelerating","Strong relative strength vs Bitcoin"],technicalFactors:["Moving Average Cross","Relative Strength","Volume"],fundamentalFactors:["Ecosystem Growth","Developer Activity"],sentimentScore:82,timestamp:Date.now()-15*60*1e3,expiresAt:Date.now()+1*60*60*1e3,accuracy:85.3,isActive:!0}],$=[{symbol:"BTC",direction:"bullish",probability:78,timeframe:"7 days",priceTarget:52e3,confidence:82,factors:["Technical breakout","Institutional demand","Macro environment"],riskLevel:"medium"},{symbol:"ETH",direction:"bearish",probability:65,timeframe:"3 days",priceTarget:2100,confidence:71,factors:["Overbought conditions","Profit taking","Gas fee concerns"],riskLevel:"high"}];l(v),a(A),n($)},[]);const p=s.filter(v=>{const A=c==="all"||v.timeframe===c,$=d==="all"||v.strength===d,S=m==="all"||v.symbol===m;return A&&$&&S&&v.isActive}),b=()=>{g(!0),setTimeout(()=>{g(!1)},2e3)},w=v=>{switch(v){case"buy":return"text-green-400";case"sell":return"text-red-400";case"hold":return"text-yellow-400";default:return"text-white/60"}},k=v=>{switch(v){case"buy":return e.jsx(Q,{className:"w-5 h-5"});case"sell":return e.jsx(me,{className:"w-5 h-5"});case"hold":return e.jsx(se,{className:"w-5 h-5"});default:return e.jsx(se,{className:"w-5 h-5"})}},_=v=>{switch(v){case"strong":return"text-green-400";case"moderate":return"text-yellow-400";case"weak":return"text-red-400";default:return"text-white/60"}},P=v=>v>=80?"text-green-400":v>=60?"text-yellow-400":"text-red-400",E=v=>{const A=v-Date.now();if(A<=0)return"Expired";const $=Math.floor(A/(1e3*60*60)),S=Math.floor(A%(1e3*60*60)/(1e3*60));return $>0?`${$}h ${S}m`:`${S}m`},I=v=>`$${v.toLocaleString()}`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"AI Trading Signals"}),e.jsx("p",{className:"text-white/60",children:"Machine learning-powered trading recommendations"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>N(!x),className:`p-2 rounded-lg transition-colors ${x?"bg-purple-600 text-white":"bg-white/10 text-white/60 hover:bg-white/20"}`,title:x?"Disable Notifications":"Enable Notifications",children:x?e.jsx(He,{className:"w-4 h-4"}):e.jsx(Nr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:b,disabled:j,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Refresh Signals",children:e.jsx(W,{className:`w-4 h-4 ${j?"animate-spin":""}`})})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"AI Models Status"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.map(v=>e.jsxs("div",{className:`p-4 rounded-lg border ${v.isActive?"border-green-400/30 bg-green-400/5":"border-white/10 bg-white/5"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-white font-medium",children:v.name}),e.jsx("div",{className:`w-2 h-2 rounded-full ${v.isActive?"bg-green-400":"bg-gray-400"}`})]}),e.jsx("p",{className:"text-white/60 text-sm mb-3",children:v.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-white/60",children:"Accuracy:"}),e.jsxs("span",{className:"text-white",children:[v.accuracy.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-white/60",children:"Success Rate:"}),e.jsxs("span",{className:"text-green-400",children:[v.successRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-white/60",children:"Signals:"}),e.jsx("span",{className:"text-white",children:v.signals})]})]})]},v.id))})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("select",{value:m,onChange:v=>f(v.target.value),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-400",children:[e.jsx("option",{value:"all",className:"bg-gray-800",children:"All Symbols"}),i.map(v=>e.jsx("option",{value:v,className:"bg-gray-800",children:v},v))]}),e.jsxs("select",{value:c,onChange:v=>h(v.target.value),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-400",children:[e.jsx("option",{value:"all",className:"bg-gray-800",children:"All Timeframes"}),e.jsx("option",{value:"1h",className:"bg-gray-800",children:"1 Hour"}),e.jsx("option",{value:"4h",className:"bg-gray-800",children:"4 Hours"}),e.jsx("option",{value:"1d",className:"bg-gray-800",children:"1 Day"}),e.jsx("option",{value:"1w",className:"bg-gray-800",children:"1 Week"})]}),e.jsxs("select",{value:d,onChange:v=>u(v.target.value),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-400",children:[e.jsx("option",{value:"all",className:"bg-gray-800",children:"All Strengths"}),e.jsx("option",{value:"strong",className:"bg-gray-800",children:"Strong"}),e.jsx("option",{value:"moderate",className:"bg-gray-800",children:"Moderate"}),e.jsx("option",{value:"weak",className:"bg-gray-800",children:"Weak"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Active Signals"}),p.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:p.map((v,A)=>e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:A*.1},className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${w(v.type).replace("text-","bg-").replace("-400","-400/20")}`,children:k(v.type)}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-white",children:v.symbol}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-medium capitalize ${w(v.type)}`,children:v.type}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${_(v.strength)} bg-current/20`,children:v.strength})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-lg font-bold ${P(v.confidence)}`,children:[v.confidence,"%"]}),e.jsx("div",{className:"text-white/60 text-sm",children:"Confidence"})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Target Price:"}),e.jsx("div",{className:"text-white font-medium",children:I(v.targetPrice)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Stop Loss:"}),e.jsx("div",{className:"text-white font-medium",children:I(v.stopLoss)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Risk/Reward:"}),e.jsxs("div",{className:"text-green-400 font-medium",children:[v.riskReward.toFixed(1),":1"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Timeframe:"}),e.jsx("div",{className:"text-white font-medium",children:v.timeframe})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Expires in:"}),e.jsx("div",{className:"text-yellow-400 font-medium",children:E(v.expiresAt)})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx("h5",{className:"text-white font-medium",children:"AI Reasoning:"}),e.jsx("ul",{className:"space-y-1",children:v.reasoning.map(($,S)=>e.jsxs("li",{className:"flex items-start gap-2 text-white/80 text-sm",children:[e.jsx(Le,{className:"w-3 h-3 text-green-400 mt-1 flex-shrink-0"}),$]},S))})]}),e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.technicalFactors.map($=>e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-xs",children:$},$)),v.fundamentalFactors.map($=>e.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded text-xs",children:$},$))]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>t?.(v,"follow"),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"Follow Signal"}),e.jsx("button",{onClick:()=>t?.(v,"ignore"),className:"flex-1 bg-white/10 hover:bg-white/20 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"Ignore"})]})]},v.id))}):e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(Ae,{className:"w-16 h-16 text-white/20 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Active Signals"}),e.jsx("p",{className:"text-white/60",children:"AI models are analyzing the market. New signals will appear here."})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Market Predictions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map((v,A)=>e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:A*.1},className:"p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:v.symbol}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${v.direction==="bullish"?"bg-green-500/20 text-green-400":v.direction==="bearish"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:v.direction})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Probability:"}),e.jsxs("span",{className:"text-white",children:[v.probability,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Target:"}),e.jsx("span",{className:"text-white",children:I(v.priceTarget)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Timeframe:"}),e.jsx("span",{className:"text-white",children:v.timeframe})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Risk Level:"}),e.jsx("span",{className:`capitalize ${v.riskLevel==="low"?"text-green-400":v.riskLevel==="medium"?"text-yellow-400":"text-red-400"}`,children:v.riskLevel})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-white/60 text-sm mb-1",children:"Key Factors:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:v.factors.map($=>e.jsx("span",{className:"px-2 py-1 bg-white/10 text-white/80 rounded text-xs",children:$},$))})]})]},`${v.symbol}-${A}`))})]})]})},Wd=({symbol:i,priceData:t=[],volumeData:s=[],onPatternDetected:a})=>{const[r,n]=y.useState([]),[o,l]=y.useState([]),[c,h]=y.useState("all"),[d,u]=y.useState("all"),[m,f]=y.useState(!1),[j,g]=y.useState(!1),[x,N]=y.useState(75),[p,b]=y.useState(60);y.useEffect(()=>{const C=[{id:"head-shoulders-1",name:"Head and Shoulders",type:"bearish",category:"reversal",confidence:87,reliability:82,timeframe:"4h",detectedAt:Date.now()-72e5,priceLevel:45200,targetPrice:41800,stopLoss:46500,riskReward:2.6,description:"Classic bearish reversal pattern with three peaks, middle peak being the highest",characteristics:["Left shoulder at $44,800","Head at $45,200","Right shoulder at $44,900","Neckline at $43,500"],tradingStrategy:"Sell on neckline break with target at $41,800",historicalAccuracy:78,isActive:!0,volume:"high",strength:"strong"},{id:"double-bottom-1",name:"Double Bottom",type:"bullish",category:"reversal",confidence:92,reliability:85,timeframe:"1d",detectedAt:Date.now()-216e5,priceLevel:42800,targetPrice:48200,stopLoss:42e3,riskReward:6.8,description:"Strong bullish reversal pattern with two equal lows and resistance break",characteristics:["First bottom at $42,800","Second bottom at $42,750","Resistance at $45,500","Volume confirmation on breakout"],tradingStrategy:"Buy on resistance break with target at $48,200",historicalAccuracy:83,isActive:!0,volume:"high",strength:"strong"},{id:"ascending-triangle-1",name:"Ascending Triangle",type:"bullish",category:"continuation",confidence:76,reliability:71,timeframe:"2h",detectedAt:Date.now()-36e5,priceLevel:44500,targetPrice:46800,stopLoss:43200,riskReward:1.8,description:"Bullish continuation pattern with horizontal resistance and rising support",characteristics:["Horizontal resistance at $44,500","Rising support line","Decreasing volume during formation","Breakout volume surge expected"],tradingStrategy:"Buy on resistance breakout with volume confirmation",historicalAccuracy:69,isActive:!0,volume:"medium",strength:"moderate"},{id:"flag-pattern-1",name:"Bull Flag",type:"bullish",category:"continuation",confidence:84,reliability:79,timeframe:"1h",detectedAt:Date.now()-18e5,priceLevel:44200,targetPrice:45600,stopLoss:43800,riskReward:3.5,description:"Short-term bullish continuation pattern after strong upward move",characteristics:["Strong upward move (flagpole)","Slight downward consolidation","Parallel trend lines","Low volume during consolidation"],tradingStrategy:"Buy on upper trend line break",historicalAccuracy:74,isActive:!0,volume:"low",strength:"moderate"},{id:"wedge-pattern-1",name:"Rising Wedge",type:"bearish",category:"reversal",confidence:71,reliability:68,timeframe:"6h",detectedAt:Date.now()-144e5,priceLevel:44800,targetPrice:42200,stopLoss:45200,riskReward:6.5,description:"Bearish reversal pattern with converging trend lines sloping upward",characteristics:["Both trend lines slope upward","Lines converge to form wedge","Decreasing volume","Bearish divergence on RSI"],tradingStrategy:"Sell on lower trend line break",historicalAccuracy:65,isActive:!0,volume:"low",strength:"weak"}],D=[{id:"alert-1",patternId:"double-bottom-1",symbol:i,message:"Double Bottom pattern breakout confirmed with high volume",type:"breakout",timestamp:Date.now()-15*60*1e3,isRead:!1},{id:"alert-2",patternId:"head-shoulders-1",symbol:i,message:"Head and Shoulders pattern formation detected",type:"formation",timestamp:Date.now()-2*60*60*1e3,isRead:!0}];n(C),l(D)},[i]);const w=()=>{f(!0),setTimeout(()=>{f(!1)},3e3)},k=r.filter(C=>{const D=c==="all"||C.category===c,T=d==="all"||C.type===d,M=C.confidence>=p;return D&&T&&M&&C.isActive}),_=C=>{switch(C){case"bullish":return"text-green-400";case"bearish":return"text-red-400";case"neutral":return"text-yellow-400";default:return"text-white/60"}},P=C=>C.includes("Triangle")?e.jsx(Un,{className:"w-5 h-5"}):C.includes("Rectangle")||C.includes("Flag")?e.jsx(jr,{className:"w-5 h-5"}):C.includes("Head")||C.includes("Double")?e.jsx(Ne,{className:"w-5 h-5"}):e.jsx(Bn,{className:"w-5 h-5"}),E=C=>C>=80?"text-green-400":C>=60?"text-yellow-400":"text-red-400",I=C=>{switch(C){case"strong":return"text-green-400";case"moderate":return"text-yellow-400";case"weak":return"text-red-400";default:return"text-white/60"}},v=C=>`$${C.toLocaleString()}`,A=C=>{const T=Date.now()-C,M=Math.floor(T/(1e3*60*60)),V=Math.floor(T%(1e3*60*60)/(1e3*60));return M>0?`${M}h ${V}m ago`:`${V}m ago`},$=[{value:"all",label:"All Categories"},{value:"reversal",label:"Reversal"},{value:"continuation",label:"Continuation"},{value:"bilateral",label:"Bilateral"}],S=[{value:"all",label:"All Types"},{value:"bullish",label:"Bullish"},{value:"bearish",label:"Bearish"},{value:"neutral",label:"Neutral"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Pattern Recognition"}),e.jsxs("p",{className:"text-white/60",children:["Automated chart pattern detection for ",i]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>g(!j),className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Settings",children:e.jsx(ps,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:w,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg text-white font-medium transition-colors disabled:opacity-50",children:[e.jsx(W,{className:`w-4 h-4 ${m?"animate-spin":""}`}),m?"Scanning...":"Scan Patterns"]})]})]}),e.jsx(ee,{children:j&&e.jsxs(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Detection Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white/80 text-sm font-medium mb-2",children:["Sensitivity: ",x,"%"]}),e.jsx("input",{type:"range",min:"50",max:"100",value:x,onChange:C=>N(Number(C.target.value)),className:"w-full"}),e.jsx("p",{className:"text-white/60 text-xs mt-1",children:"Higher values detect more patterns but may include false positives"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white/80 text-sm font-medium mb-2",children:["Minimum Confidence: ",p,"%"]}),e.jsx("input",{type:"range",min:"30",max:"90",value:p,onChange:C=>b(Number(C.target.value)),className:"w-full"}),e.jsx("p",{className:"text-white/60 text-xs mt-1",children:"Only show patterns above this confidence threshold"})]})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("select",{value:c,onChange:C=>h(C.target.value),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-400",children:$.map(C=>e.jsx("option",{value:C.value,className:"bg-gray-800",children:C.label},C.value))}),e.jsx("select",{value:d,onChange:C=>u(C.target.value),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-400",children:S.map(C=>e.jsx("option",{value:C.value,className:"bg-gray-800",children:C.label},C.value))})]}),o.filter(C=>!C.isRead).length>0&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Recent Alerts"}),e.jsx("div",{className:"space-y-3",children:o.filter(C=>!C.isRead).map(C=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[e.jsx(ue,{className:"w-5 h-5 text-yellow-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white",children:C.message}),e.jsx("p",{className:"text-white/60 text-sm",children:A(C.timestamp)})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${C.type==="breakout"?"bg-green-500/20 text-green-400":C.type==="formation"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:C.type})]},C.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:["Detected Patterns (",k.length,")"]}),k.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:k.map((C,D)=>e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:D*.1},className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${_(C.type).replace("text-","bg-").replace("-400","-400/20")}`,children:P(C.name)}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:C.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-medium capitalize ${_(C.type)}`,children:C.type}),e.jsx("span",{className:"text-white/60",children:""}),e.jsx("span",{className:"text-white/60 capitalize",children:C.category})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-lg font-bold ${E(C.confidence)}`,children:[C.confidence,"%"]}),e.jsx("div",{className:"text-white/60 text-sm",children:"Confidence"})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx("p",{className:"text-white/80 text-sm",children:C.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Timeframe:"}),e.jsx("div",{className:"text-white font-medium",children:C.timeframe})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Detected:"}),e.jsx("div",{className:"text-white font-medium",children:A(C.detectedAt)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Reliability:"}),e.jsxs("div",{className:"text-white font-medium",children:[C.reliability,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Strength:"}),e.jsx("div",{className:`font-medium capitalize ${I(C.strength)}`,children:C.strength})]})]}),C.targetPrice&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Target Price:"}),e.jsx("div",{className:"text-green-400 font-medium",children:v(C.targetPrice)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Stop Loss:"}),e.jsx("div",{className:"text-red-400 font-medium",children:v(C.stopLoss)})]})]}),C.riskReward&&e.jsxs("div",{children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Risk/Reward Ratio:"}),e.jsxs("div",{className:"text-blue-400 font-medium",children:[C.riskReward.toFixed(1),":1"]})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx("h5",{className:"text-white font-medium",children:"Key Characteristics:"}),e.jsx("ul",{className:"space-y-1",children:C.characteristics.map((T,M)=>e.jsxs("li",{className:"flex items-start gap-2 text-white/80 text-sm",children:[e.jsx(Le,{className:"w-3 h-3 text-green-400 mt-1 flex-shrink-0"}),T]},M))})]}),e.jsxs("div",{className:"p-3 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:[e.jsx("h5",{className:"text-purple-400 font-medium mb-1",children:"Trading Strategy:"}),e.jsx("p",{className:"text-white/80 text-sm",children:C.tradingStrategy})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vr,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("span",{className:"text-white/60 text-sm",children:[C.historicalAccuracy,"% accuracy"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{className:"text-white/60 text-sm capitalize",children:[C.volume," volume"]})]})]}),e.jsx("button",{onClick:()=>a?.(C),className:"text-purple-400 hover:text-purple-300 transition-colors",children:e.jsx(ge,{className:"w-4 h-4"})})]})]},C.id))}):e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(ca,{className:"w-16 h-16 text-white/20 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Patterns Detected"}),e.jsx("p",{className:"text-white/60",children:m?"Scanning for chart patterns...":"Try adjusting the sensitivity or confidence threshold to detect more patterns"})]})]})]})},qd=({walletAddress:i,holdings:t=[],isLoading:s=!1,onRebalance:a})=>{const[r,n]=y.useState("overview"),[o,l]=y.useState("1M"),[c,h]=y.useState(!0),[d,u]=y.useState(null),[m,f]=y.useState(null);y.useEffect(()=>{if(t.length===0)return;const b=t.reduce((A,$)=>A+$.value,0),w=t.reduce((A,$)=>A+$.pnl,0),k=b>0?w/(b-w)*100:0,_=t.reduce((A,$)=>A+$.dayChange,0),P=b>0?_/b*100:0,E={totalValue:b,totalPnL:w,totalPnLPercent:k,dayChange:_,dayChangePercent:P,weekChange:_*1.5,weekChangePercent:P*1.5,monthChange:_*4.2,monthChangePercent:P*4.2,yearChange:_*52,yearChangePercent:P*52,sharpeRatio:1.2+Math.random()*.8,maxDrawdown:-(5+Math.random()*15),volatility:15+Math.random()*20,beta:.8+Math.random()*.6,alpha:-2+Math.random()*8,winRate:55+Math.random()*25,avgWin:3+Math.random()*4,avgLoss:-(2+Math.random()*2),profitFactor:1.1+Math.random()*.8},I=Math.max(...t.map(A=>A.allocation)),v={portfolioRisk:I>40?"high":I>20?"medium":"low",concentrationRisk:I,correlationRisk:30+Math.random()*40,liquidityRisk:20+Math.random()*30,volatilityRisk:E.volatility,var95:b*.05,var99:b*.01,expectedShortfall:b*.08,riskScore:40+Math.random()*40};u(E),f(v)},[t]);const j=b=>`$${Math.abs(b).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,g=b=>`${b>=0?"+":""}${b.toFixed(2)}%`,x=b=>b>0?"text-green-400":b<0?"text-red-400":"text-white/60",N=b=>{switch(b){case"low":return"text-green-400";case"medium":return"text-yellow-400";case"high":return"text-red-400";default:return"text-white/60"}},p=b=>{const w=["#8b5cf6","#10b981","#f59e0b","#ef4444","#06b6d4","#ec4899","#84cc16","#f97316"];return w[b%w.length]};return s?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(W,{className:"w-16 h-16 text-white/20 mx-auto mb-4 animate-spin"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Loading Portfolio Analytics"}),e.jsx("p",{className:"text-white/60",children:"Analyzing your portfolio performance and risk metrics..."})]})}):t.length===0?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(Dt,{className:"w-16 h-16 text-white/20 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Portfolio Data"}),e.jsx("p",{className:"text-white/60",children:"Connect your wallet or add holdings to view analytics"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Portfolio Analytics"}),e.jsx("p",{className:"text-white/60",children:i?`Analyzing wallet: ${i.slice(0,6)}...${i.slice(-4)}`:"Advanced portfolio performance and risk analysis"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:o,onChange:b=>l(b.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-400",children:[e.jsx("option",{value:"1D",className:"bg-gray-800",children:"1 Day"}),e.jsx("option",{value:"1W",className:"bg-gray-800",children:"1 Week"}),e.jsx("option",{value:"1M",className:"bg-gray-800",children:"1 Month"}),e.jsx("option",{value:"3M",className:"bg-gray-800",children:"3 Months"}),e.jsx("option",{value:"1Y",className:"bg-gray-800",children:"1 Year"})]}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg text-white font-medium transition-colors",children:"Rebalance"})]})]}),e.jsx("div",{className:"flex space-x-1 bg-white/5 p-1 rounded-lg",children:[{id:"overview",label:"Overview",icon:e.jsx(Ne,{className:"w-4 h-4"})},{id:"performance",label:"Performance",icon:e.jsx(Q,{className:"w-4 h-4"})},{id:"risk",label:"Risk Analysis",icon:e.jsx(Ut,{className:"w-4 h-4"})},{id:"allocation",label:"Allocation",icon:e.jsx(Dt,{className:"w-4 h-4"})}].map(b=>e.jsxs("button",{onClick:()=>n(b.id),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition-colors ${r===b.id?"bg-purple-600 text-white":"text-white/60 hover:text-white hover:bg-white/10"}`,children:[b.icon,b.label]},b.id))}),e.jsx(ee,{mode:"wait",children:e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[r==="overview"&&d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(Ve,{className:"w-12 h-12 text-green-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Total Value"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:j(d.totalValue)})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(Q,{className:"w-12 h-12 text-blue-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Total P&L"}),e.jsxs("p",{className:`text-3xl font-bold ${x(d.totalPnL)}`,children:[d.totalPnL>=0?"+":"",j(d.totalPnL)]}),e.jsx("p",{className:`text-sm ${x(d.totalPnLPercent)}`,children:g(d.totalPnLPercent)})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(se,{className:"w-12 h-12 text-yellow-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"24h Change"}),e.jsxs("p",{className:`text-3xl font-bold ${x(d.dayChange)}`,children:[d.dayChange>=0?"+":"",j(d.dayChange)]}),e.jsx("p",{className:`text-sm ${x(d.dayChangePercent)}`,children:g(d.dayChangePercent)})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(ge,{className:"w-12 h-12 text-purple-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Holdings"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:t.length}),e.jsx("p",{className:"text-sm text-white/60",children:"Assets"})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Top Holdings"}),e.jsx("div",{className:"space-y-3",children:t.slice(0,5).map((b,w)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:p(w)}}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:b.symbol}),e.jsx("p",{className:"text-white/60 text-sm",children:b.name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white font-medium",children:j(b.value)}),e.jsxs("div",{className:"text-white/60 text-sm",children:[b.allocation.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-medium ${x(b.pnl)}`,children:[b.pnl>=0?"+":"",j(b.pnl)]}),e.jsx("div",{className:`text-sm ${x(b.pnlPercent)}`,children:g(b.pnlPercent)})]})]},b.symbol))})]})]}),r==="performance"&&d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Returns"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"1 Day:"}),e.jsx("span",{className:x(d.dayChangePercent),children:g(d.dayChangePercent)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"1 Week:"}),e.jsx("span",{className:x(d.weekChangePercent),children:g(d.weekChangePercent)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"1 Month:"}),e.jsx("span",{className:x(d.monthChangePercent),children:g(d.monthChangePercent)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"1 Year:"}),e.jsx("span",{className:x(d.yearChangePercent),children:g(d.yearChangePercent)})]})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Risk Metrics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Sharpe Ratio:"}),e.jsx("span",{className:"text-white",children:d.sharpeRatio.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Max Drawdown:"}),e.jsx("span",{className:"text-red-400",children:g(d.maxDrawdown)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Volatility:"}),e.jsx("span",{className:"text-white",children:g(d.volatility)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Beta:"}),e.jsx("span",{className:"text-white",children:d.beta.toFixed(2)})]})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Trading Stats"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Win Rate:"}),e.jsx("span",{className:"text-green-400",children:g(d.winRate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Avg Win:"}),e.jsx("span",{className:"text-green-400",children:g(d.avgWin)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Avg Loss:"}),e.jsx("span",{className:"text-red-400",children:g(d.avgLoss)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Profit Factor:"}),e.jsx("span",{className:"text-white",children:d.profitFactor.toFixed(2)})]})]})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Performance Chart"}),e.jsx("div",{className:"h-64 bg-gray-800/50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ne,{className:"w-16 h-16 text-white/20 mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Portfolio performance chart"})]})})]})]}),r==="risk"&&m&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(Ut,{className:"w-12 h-12 text-blue-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Portfolio Risk"}),e.jsx("p",{className:`text-2xl font-bold capitalize ${N(m.portfolioRisk)}`,children:m.portfolioRisk})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(ue,{className:"w-12 h-12 text-yellow-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Risk Score"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:m.riskScore.toFixed(0)}),e.jsx("p",{className:"text-sm text-white/60",children:"out of 100"})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(ge,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"VaR (95%)"}),e.jsx("p",{className:"text-2xl font-bold text-red-400",children:j(m.var95)})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(se,{className:"w-12 h-12 text-purple-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Max Concentration"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[m.concentrationRisk.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Risk Factors"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-white/60",children:"Concentration Risk"}),e.jsxs("span",{className:"text-white",children:[m.concentrationRisk.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-red-400 h-2 rounded-full",style:{width:`${Math.min(m.concentrationRisk,100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-white/60",children:"Correlation Risk"}),e.jsxs("span",{className:"text-white",children:[m.correlationRisk.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${m.correlationRisk}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-white/60",children:"Liquidity Risk"}),e.jsxs("span",{className:"text-white",children:[m.liquidityRisk.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:`${m.liquidityRisk}%`}})})]})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Value at Risk"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"VaR 95% (1 day):"}),e.jsx("span",{className:"text-red-400",children:j(m.var95)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"VaR 99% (1 day):"}),e.jsx("span",{className:"text-red-400",children:j(m.var99)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Expected Shortfall:"}),e.jsx("span",{className:"text-red-400",children:j(m.expectedShortfall)})]})]})]})]})]}),r==="allocation"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Asset Allocation"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-64 bg-gray-800/50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Dt,{className:"w-16 h-16 text-white/20 mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Allocation pie chart"})]})}),e.jsx("div",{className:"space-y-3",children:t.map((b,w)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:p(w)}}),e.jsx("span",{className:"text-white",children:b.symbol})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-white font-medium",children:[b.allocation.toFixed(1),"%"]}),e.jsx("div",{className:"text-white/60 text-sm",children:j(b.value)})]})]},b.symbol))})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Rebalancing Suggestions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ue,{className:"w-5 h-5 text-yellow-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-yellow-400 font-medium",children:"High Concentration Risk"}),e.jsxs("p",{className:"text-white/80 text-sm",children:["Consider reducing ",t[0]?.symbol," allocation from ",t[0]?.allocation.toFixed(1),"% to below 25%"]})]})]})}),e.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ge,{className:"w-5 h-5 text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-400 font-medium",children:"Diversification Opportunity"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Consider adding exposure to DeFi tokens or stablecoins for better risk-adjusted returns"})]})]})})]})]})]})]},r)})]})},Kd=({symbols:i=[],onAlertTriggered:t})=>{const[s,a]=y.useState([]),[r,n]=y.useState([]),[o,l]=y.useState(!1),[c,h]=y.useState(null),[d,u]=y.useState("all"),[m,f]=y.useState(""),[j,g]=y.useState(!0),[x,N]=y.useState(!0),[p,b]=y.useState({name:"",symbol:i[0]||"BTC",type:"price",condition:"above",value:0,notifications:{push:!0,email:!1,sms:!1,sound:!0},frequency:"once",description:"",priority:"medium"});y.useEffect(()=>{const S=[{id:"alert-1",name:"BTC Price Alert",symbol:"BTC",type:"price",condition:"above",value:5e4,currentValue:45200,isActive:!0,isTriggered:!1,createdAt:Date.now()-1728e5,notifications:{push:!0,email:!0,sms:!1,sound:!0},frequency:"once",description:"Alert when Bitcoin breaks above $50,000",priority:"high"},{id:"alert-2",name:"ETH RSI Oversold",symbol:"ETH",type:"indicator",condition:"below",value:30,currentValue:45,isActive:!0,isTriggered:!1,createdAt:Date.now()-864e5,notifications:{push:!0,email:!1,sms:!1,sound:!0},frequency:"repeated",description:"Alert when ETH RSI drops below 30 (oversold)",priority:"medium"},{id:"alert-3",name:"SOL Volume Spike",symbol:"SOL",type:"volume",condition:"above",value:1e6,currentValue:75e4,isActive:!0,isTriggered:!0,triggeredAt:Date.now()-72e5,createdAt:Date.now()-2592e5,notifications:{push:!0,email:!0,sms:!0,sound:!0},frequency:"daily",description:"Alert when SOL volume exceeds 1M",priority:"low"}],C=[{id:"history-1",alertId:"alert-3",alertName:"SOL Volume Spike",symbol:"SOL",message:"SOL volume exceeded 1,000,000 - Current: 1,250,000",triggeredAt:Date.now()-2*60*60*1e3,value:125e4,isRead:!1},{id:"history-2",alertId:"alert-1",alertName:"BTC Price Alert",symbol:"BTC",message:"BTC price reached $48,500",triggeredAt:Date.now()-6*60*60*1e3,value:48500,isRead:!0}];a(S),n(C)},[]);const w=()=>{const S={id:`alert-${Date.now()}`,...p,currentValue:0,isActive:!0,isTriggered:!1,createdAt:Date.now()};a(C=>[...C,S]),l(!1),b({name:"",symbol:i[0]||"BTC",type:"price",condition:"above",value:0,notifications:{push:!0,email:!1,sms:!1,sound:!0},frequency:"once",description:"",priority:"medium"})},k=S=>{a(C=>C.map(D=>D.id===S?{...D,isActive:!D.isActive}:D))},_=S=>{a(C=>C.filter(D=>D.id!==S))},P=s.filter(S=>{const C=d==="all"||d==="active"&&S.isActive||d==="triggered"&&S.isTriggered||d===S.type,D=S.name.toLowerCase().includes(m.toLowerCase())||S.symbol.toLowerCase().includes(m.toLowerCase());return C&&D}),E=S=>{switch(S){case"price":return e.jsx(Q,{className:"w-4 h-4"});case"indicator":return e.jsx(se,{className:"w-4 h-4"});case"volume":return e.jsx(ge,{className:"w-4 h-4"});case"pattern":return e.jsx(cs,{className:"w-4 h-4"});case"news":return e.jsx(br,{className:"w-4 h-4"});default:return e.jsx(He,{className:"w-4 h-4"})}},I=S=>{switch(S){case"high":return"text-red-400";case"medium":return"text-yellow-400";case"low":return"text-green-400";default:return"text-white/60"}},v=S=>{const D=Date.now()-S,T=Math.floor(D/(1e3*60*60)),M=Math.floor(D%(1e3*60*60)/(1e3*60));return T>24?`${Math.floor(T/24)}d ago`:T>0?`${T}h ago`:`${M}m ago`},A=(S,C)=>{switch(C){case"price":return`$${S.toLocaleString()}`;case"volume":return S.toLocaleString();case"indicator":return S.toFixed(2);default:return S.toString()}},$=r.filter(S=>!S.isRead).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Alert System"}),e.jsx("p",{className:"text-white/60",children:"Custom price and indicator-based alerts with notifications"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>N(!x),className:`p-2 rounded-lg transition-colors ${x?"bg-purple-600 text-white":"bg-white/10 text-white/60 hover:bg-white/20"}`,title:x?"Disable Sound":"Enable Sound",children:x?e.jsx(Ht,{className:"w-4 h-4"}):e.jsx(kr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(!j),className:`p-2 rounded-lg transition-colors ${j?"bg-purple-600 text-white":"bg-white/10 text-white/60 hover:bg-white/20"}`,title:j?"Disable Notifications":"Enable Notifications",children:j?e.jsx(He,{className:"w-4 h-4"}):e.jsx(Nr,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg text-white font-medium transition-colors",children:[e.jsx(ls,{className:"w-4 h-4"}),"Create Alert"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(He,{className:"w-12 h-12 text-blue-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Total Alerts"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:s.length})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(Le,{className:"w-12 h-12 text-green-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-green-400",children:s.filter(S=>S.isActive).length})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(ue,{className:"w-12 h-12 text-yellow-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Triggered"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-400",children:s.filter(S=>S.isTriggered).length})]}),e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(nt,{className:"w-12 h-12 text-purple-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Unread"}),e.jsx("p",{className:"text-3xl font-bold text-purple-400",children:$})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"text",placeholder:"Search alerts...",value:m,onChange:S=>f(S.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-purple-400"})]}),e.jsxs("select",{value:d,onChange:S=>u(S.target.value),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-400",children:[e.jsx("option",{value:"all",className:"bg-gray-800",children:"All Alerts"}),e.jsx("option",{value:"active",className:"bg-gray-800",children:"Active"}),e.jsx("option",{value:"triggered",className:"bg-gray-800",children:"Triggered"}),e.jsx("option",{value:"price",className:"bg-gray-800",children:"Price Alerts"}),e.jsx("option",{value:"indicator",className:"bg-gray-800",children:"Indicator Alerts"}),e.jsx("option",{value:"volume",className:"bg-gray-800",children:"Volume Alerts"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:["Your Alerts (",P.length,")"]}),P.length>0?e.jsx("div",{className:"space-y-3",children:P.map((S,C)=>e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:C*.05},className:`glass-card p-6 ${S.isTriggered?"border border-yellow-400/30":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${S.isTriggered?"bg-yellow-400/20":S.isActive?"bg-green-400/20":"bg-gray-400/20"}`,children:E(S.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:S.name}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-xs font-medium",children:S.symbol}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${I(S.priority)} bg-current/20`,children:S.priority})]}),e.jsx("p",{className:"text-white/80 mb-2",children:S.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-white/60",children:[S.condition.replace("_"," ")," ",A(S.value,S.type)]}),e.jsxs("span",{className:"text-white/60",children:["Current: ",A(S.currentValue,S.type)]}),e.jsxs("span",{className:"text-white/60",children:["Created: ",v(S.createdAt)]}),S.triggeredAt&&e.jsxs("span",{className:"text-yellow-400",children:["Triggered: ",v(S.triggeredAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[S.notifications.push&&e.jsx(Hn,{className:"w-4 h-4 text-blue-400"}),S.notifications.email&&e.jsx(Sr,{className:"w-4 h-4 text-green-400"}),S.notifications.sms&&e.jsx(_r,{className:"w-4 h-4 text-purple-400"}),S.notifications.sound&&e.jsx(Ht,{className:"w-4 h-4 text-yellow-400"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>k(S.id),className:`p-2 rounded-lg transition-colors ${S.isActive?"bg-green-600 text-white":"bg-white/10 text-white/60 hover:bg-white/20"}`,title:S.isActive?"Disable Alert":"Enable Alert",children:S.isActive?e.jsx(cs,{className:"w-4 h-4"}):e.jsx(da,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(S),className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Edit Alert",children:e.jsx(zn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(S.id),className:"p-2 bg-red-600/20 hover:bg-red-600/30 rounded-lg text-red-400 transition-colors",title:"Delete Alert",children:e.jsx(wr,{className:"w-4 h-4"})})]})]})},S.id))}):e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(He,{className:"w-16 h-16 text-white/20 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Alerts Found"}),e.jsx("p",{className:"text-white/60",children:"Create your first alert to get notified about market movements"})]})]}),r.length>0&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Recent Alerts"}),e.jsx("div",{className:"space-y-3",children:r.slice(0,5).map(S=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${S.isRead?"bg-white/5":"bg-yellow-500/10 border border-yellow-500/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${S.isRead?"bg-gray-400":"bg-yellow-400"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:S.alertName}),e.jsx("p",{className:"text-white/60 text-sm",children:S.message})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white/60 text-sm",children:v(S.triggeredAt)}),e.jsx("div",{className:"text-blue-400 text-sm",children:S.symbol})]})]},S.id))})]}),e.jsx(ee,{children:o&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>l(!1),children:e.jsxs(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-card p-6 max-w-md w-full",onClick:S=>S.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create New Alert"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Alert Name"}),e.jsx("input",{type:"text",value:p.name,onChange:S=>b(C=>({...C,name:S.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",placeholder:"My Price Alert"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Symbol"}),e.jsx("select",{value:p.symbol,onChange:S=>b(C=>({...C,symbol:S.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:i.map(S=>e.jsx("option",{value:S,className:"bg-gray-800",children:S},S))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Type"}),e.jsxs("select",{value:p.type,onChange:S=>b(C=>({...C,type:S.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[e.jsx("option",{value:"price",className:"bg-gray-800",children:"Price"}),e.jsx("option",{value:"indicator",className:"bg-gray-800",children:"Indicator"}),e.jsx("option",{value:"volume",className:"bg-gray-800",children:"Volume"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Condition"}),e.jsxs("select",{value:p.condition,onChange:S=>b(C=>({...C,condition:S.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[e.jsx("option",{value:"above",className:"bg-gray-800",children:"Above"}),e.jsx("option",{value:"below",className:"bg-gray-800",children:"Below"}),e.jsx("option",{value:"crosses_above",className:"bg-gray-800",children:"Crosses Above"}),e.jsx("option",{value:"crosses_below",className:"bg-gray-800",children:"Crosses Below"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Value"}),e.jsx("input",{type:"number",value:p.value,onChange:S=>b(C=>({...C,value:Number(S.target.value)})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",placeholder:"50000"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:p.description,onChange:S=>b(C=>({...C,description:S.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",rows:2,placeholder:"Alert description..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:w,disabled:!p.name||!p.value,className:"flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg text-white transition-colors disabled:opacity-50",children:"Create Alert"})]})]})]})})})]})},Jd={},ir=i=>{let t;const s=new Set,a=(d,u)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const f=t;t=u??(typeof m!="object"||m===null)?m:Object.assign({},t,m),s.forEach(j=>j(t,f))}},r=()=>t,c={setState:a,getState:r,getInitialState:()=>h,subscribe:d=>(s.add(d),()=>s.delete(d)),destroy:()=>{(Jd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},h=t=i(a,r,c);return c},Yd=i=>i?ir(i):ir;var Us={exports:{}},Bs={},Hs={exports:{}},zs={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var or;function Xd(){if(or)return zs;or=1;var i=Er();function t(u,m){return u===m&&(u!==0||1/u===1/m)||u!==u&&m!==m}var s=typeof Object.is=="function"?Object.is:t,a=i.useState,r=i.useEffect,n=i.useLayoutEffect,o=i.useDebugValue;function l(u,m){var f=m(),j=a({inst:{value:f,getSnapshot:m}}),g=j[0].inst,x=j[1];return n(function(){g.value=f,g.getSnapshot=m,c(g)&&x({inst:g})},[u,f,m]),r(function(){return c(g)&&x({inst:g}),u(function(){c(g)&&x({inst:g})})},[u]),o(f),f}function c(u){var m=u.getSnapshot;u=u.value;try{var f=m();return!s(u,f)}catch{return!0}}function h(u,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return zs.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:d,zs}var lr;function Qd(){return lr||(lr=1,Hs.exports=Xd()),Hs.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cr;function Zd(){if(cr)return Bs;cr=1;var i=Er(),t=Qd();function s(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var a=typeof Object.is=="function"?Object.is:s,r=t.useSyncExternalStore,n=i.useRef,o=i.useEffect,l=i.useMemo,c=i.useDebugValue;return Bs.useSyncExternalStoreWithSelector=function(h,d,u,m,f){var j=n(null);if(j.current===null){var g={hasValue:!1,value:null};j.current=g}else g=j.current;j=l(function(){function N(_){if(!p){if(p=!0,b=_,_=m(_),f!==void 0&&g.hasValue){var P=g.value;if(f(P,_))return w=P}return w=_}if(P=w,a(b,_))return P;var E=m(_);return f!==void 0&&f(P,E)?(b=_,P):(b=_,w=E)}var p=!1,b,w,k=u===void 0?null:u;return[function(){return N(d())},k===null?void 0:function(){return N(k())}]},[d,u,m,f]);var x=r(h,j[0],j[1]);return o(function(){g.hasValue=!0,g.value=x},[x]),c(x),x},Bs}var dr;function eh(){return dr||(dr=1,Us.exports=Zd()),Us.exports}var th=eh();const sh=ha(th),hn={},{useDebugValue:ah}=pe,{useSyncExternalStoreWithSelector:rh}=sh;let hr=!1;const nh=i=>i;function ih(i,t=nh,s){(hn?"production":void 0)!=="production"&&s&&!hr&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),hr=!0);const a=rh(i.subscribe,i.getState,i.getServerState||i.getInitialState,t,s);return ah(a),a}const oh=i=>{(hn?"production":void 0)!=="production"&&typeof i!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof i=="function"?Yd(i):i,s=(a,r)=>ih(t,a,r);return Object.assign(s,t),s},lh=i=>oh,os={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_AI_BASE_URL:"https://api.openai.com/v1",VITE_ALCHEMY_API_KEY:"alcht_4VtVtdF68sMtNaLupR7oPQ1wDSFNc4",VITE_ANALYTICS_ID:"",VITE_API_BASE_URL:"https://aompecyfgnakkmldhidg.supabase.co/functions/v1",VITE_API_CACHE_TTL:"300",VITE_APP_DESCRIPTION:"Comprehensive Blockchain AI Platform",VITE_APP_NAME:"Connectouch Blockchain AI Platform",VITE_APP_VERSION:"2.0.0",VITE_ASSET_COMPRESSION:"true",VITE_BACKEND_URL:"https://aompecyfgnakkmldhidg.supabase.co",VITE_BUILD_TARGET:"full",VITE_BUNDLE_ANALYZER:"false",VITE_BURST_LIMIT:"10",VITE_CACHE_TTL:"3600",VITE_CODE_SPLITTING:"true",VITE_COINMARKETCAP_API_KEY:"d714f7e6-91a5-47ac-866e-f28f26eee302",VITE_CSP_ENABLED:"true",VITE_DEBUG:"false",VITE_DEFAULT_CHAIN:"ethereum",VITE_ENABLE_ADVANCED_CHARTS:"true",VITE_ENABLE_AI_ASSISTANT:"true",VITE_ENABLE_AI_CHAT:"true",VITE_ENABLE_ANALYTICS:"true",VITE_ENABLE_CACHING:"true",VITE_ENABLE_CDN:"true",VITE_ENABLE_COMPRESSION:"true",VITE_ENABLE_DAO_FEATURES:"true",VITE_ENABLE_GAMEFI:"true",VITE_ENABLE_HTTPS:"true",VITE_ENABLE_INFRASTRUCTURE_MONITORING:"true",VITE_ENABLE_LAZY_LOADING:"true",VITE_ENABLE_MULTI_CHAIN:"true",VITE_ENABLE_NOTIFICATIONS:"true",VITE_ENABLE_PORTFOLIO_ANALYTICS:"true",VITE_ENABLE_PORTFOLIO_TRACKING:"true",VITE_ENABLE_REAL_TIME_DATA:"true",VITE_ENABLE_REAL_TIME_UPDATES:"true",VITE_ENABLE_TRADING:"true",VITE_ENABLE_VOICE_COMMANDS:"true",VITE_ENABLE_WALLET_CONNECT:"true",VITE_ERROR_REPORTING:"true",VITE_FALLBACK_API_URL:"https://api.coingecko.com/api/v3",VITE_FULL_FEATURES:"true",VITE_HOSTING_PLATFORM:"vercel",VITE_HOSTING_STRATEGY:"vercel",VITE_IMAGE_OPTIMIZATION:"true",VITE_MAX_REQUESTS_PER_MINUTE:"60",VITE_MINIFY_CSS:"true",VITE_MINIFY_JS:"true",VITE_NODE_ENV:"production",VITE_OPENAI_API_KEY:"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",VITE_PERFORMANCE_MONITORING:"true",VITE_PRELOAD_CRITICAL:"true",VITE_RATE_LIMIT_ENABLED:"true",VITE_REAL_TIME_MONITORING:"true",VITE_SECURE_COOKIES:"true",VITE_STATIC_CACHE_TTL:"86400",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFvbXBlY3lmZ25ha2ttbGRoaWRnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3MzMwODYsImV4cCI6MjA2OTMwOTA4Nn0.SSbGerxCplUZd_ZJDCK3HrfHM_m0it2lExgKBv3bt9A",VITE_SUPABASE_URL:"https://aompecyfgnakkmldhidg.supabase.co",VITE_SUPPORTED_CHAINS:"ethereum,polygon,arbitrum,optimism",VITE_SYSTEM_HEALTH_CHECKS:"true",VITE_TREE_SHAKING:"true",VITE_USAGE_ANALYTICS:"true",VITE_VERCEL_BACKUP_URL:"https://connectouch-blockchain-ai.vercel.app",VITE_WS_URL:"wss://ws.coincap.io/prices"},oa=new Map,as=i=>{const t=oa.get(i);return t?Object.fromEntries(Object.entries(t.stores).map(([s,a])=>[s,a.getState()])):{}},ch=(i,t,s)=>{if(i===void 0)return{type:"untracked",connection:t.connect(s)};const a=oa.get(s.name);if(a)return{type:"tracked",store:i,...a};const r={connection:t.connect(s),stores:{}};return oa.set(s.name,r),{type:"tracked",store:i,...r}},dh=(i,t={})=>(s,a,r)=>{const{enabled:n,anonymousActionType:o,store:l,...c}=t;let h;try{h=(n??(os?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!h)return(os?"production":void 0)!=="production"&&n&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),i(s,a,r);const{connection:d,...u}=ch(l,h,c);let m=!0;r.setState=(g,x,N)=>{const p=s(g,x);if(!m)return p;const b=N===void 0?{type:o||"anonymous"}:typeof N=="string"?{type:N}:N;return l===void 0?(d?.send(b,a()),p):(d?.send({...b,type:`${l}/${b.type}`},{...as(c.name),[l]:r.getState()}),p)};const f=(...g)=>{const x=m;m=!1,s(...g),m=x},j=i(r.setState,a,r);if(u.type==="untracked"?d?.init(j):(u.stores[u.store]=r,d?.init(Object.fromEntries(Object.entries(u.stores).map(([g,x])=>[g,g===u.store?j:x.getState()])))),r.dispatchFromDevtools&&typeof r.dispatch=="function"){let g=!1;const x=r.dispatch;r.dispatch=(...N)=>{(os?"production":void 0)!=="production"&&N[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),x(...N)}}return d.subscribe(g=>{var x;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Vs(g.payload,N=>{if(N.type==="__setState"){if(l===void 0){f(N.state);return}Object.keys(N.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const p=N.state[l];if(p==null)return;JSON.stringify(r.getState())!==JSON.stringify(p)&&f(p);return}r.dispatchFromDevtools&&typeof r.dispatch=="function"&&r.dispatch(N)});case"DISPATCH":switch(g.payload.type){case"RESET":return f(j),l===void 0?d?.init(r.getState()):d?.init(as(c.name));case"COMMIT":if(l===void 0){d?.init(r.getState());return}return d?.init(as(c.name));case"ROLLBACK":return Vs(g.state,N=>{if(l===void 0){f(N),d?.init(r.getState());return}f(N[l]),d?.init(as(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Vs(g.state,N=>{if(l===void 0){f(N);return}JSON.stringify(r.getState())!==JSON.stringify(N[l])&&f(N[l])});case"IMPORT_STATE":{const{nextLiftedState:N}=g.payload,p=(x=N.computedStates.slice(-1)[0])==null?void 0:x.state;if(!p)return;f(l===void 0?p:p[l]),d?.send(null,N);return}case"PAUSE_RECORDING":return m=!m}return}}),j},hh=dh,Vs=(i,t)=>{let s;try{s=JSON.parse(i)}catch(a){console.error("[zustand devtools middleware] Could not parse the received json",a)}s!==void 0&&t(s)};function uh(i,t){let s;try{s=i()}catch{return}return{getItem:r=>{var n;const o=c=>c===null?null:JSON.parse(c,void 0),l=(n=s.getItem(r))!=null?n:null;return l instanceof Promise?l.then(o):o(l)},setItem:(r,n)=>s.setItem(r,JSON.stringify(n,void 0)),removeItem:r=>s.removeItem(r)}}const Vt=i=>t=>{try{const s=i(t);return s instanceof Promise?s:{then(a){return Vt(a)(s)},catch(a){return this}}}catch(s){return{then(a){return this},catch(a){return Vt(a)(s)}}}},mh=(i,t)=>(s,a,r)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,N)=>({...N,...x}),...t},o=!1;const l=new Set,c=new Set;let h;try{h=n.getStorage()}catch{}if(!h)return i((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),s(...x)},a,r);const d=Vt(n.serialize),u=()=>{const x=n.partialize({...a()});let N;const p=d({state:x,version:n.version}).then(b=>h.setItem(n.name,b)).catch(b=>{N=b});if(N)throw N;return p},m=r.setState;r.setState=(x,N)=>{m(x,N),u()};const f=i((...x)=>{s(...x),u()},a,r);let j;const g=()=>{var x;if(!h)return;o=!1,l.forEach(p=>p(a()));const N=((x=n.onRehydrateStorage)==null?void 0:x.call(n,a()))||void 0;return Vt(h.getItem.bind(h))(n.name).then(p=>{if(p)return n.deserialize(p)}).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==n.version){if(n.migrate)return n.migrate(p.state,p.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return p.state}).then(p=>{var b;return j=n.merge(p,(b=a())!=null?b:f),s(j,!0),u()}).then(()=>{N?.(j,void 0),o=!0,c.forEach(p=>p(j))}).catch(p=>{N?.(void 0,p)})};return r.persist={setOptions:x=>{n={...n,...x},x.getStorage&&(h=x.getStorage())},clearStorage:()=>{h?.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:x=>(l.add(x),()=>{l.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},g(),j||f},gh=(i,t)=>(s,a,r)=>{let n={storage:uh(()=>localStorage),partialize:g=>g,version:0,merge:(g,x)=>({...x,...g}),...t},o=!1;const l=new Set,c=new Set;let h=n.storage;if(!h)return i((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),s(...g)},a,r);const d=()=>{const g=n.partialize({...a()});return h.setItem(n.name,{state:g,version:n.version})},u=r.setState;r.setState=(g,x)=>{u(g,x),d()};const m=i((...g)=>{s(...g),d()},a,r);r.getInitialState=()=>m;let f;const j=()=>{var g,x;if(!h)return;o=!1,l.forEach(p=>{var b;return p((b=a())!=null?b:m)});const N=((x=n.onRehydrateStorage)==null?void 0:x.call(n,(g=a())!=null?g:m))||void 0;return Vt(h.getItem.bind(h))(n.name).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==n.version){if(n.migrate)return[!0,n.migrate(p.state,p.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,p.state];return[!1,void 0]}).then(p=>{var b;const[w,k]=p;if(f=n.merge(k,(b=a())!=null?b:m),s(f,!0),w)return d()}).then(()=>{N?.(f,void 0),f=a(),o=!0,c.forEach(p=>p(f))}).catch(p=>{N?.(void 0,p)})};return r.persist={setOptions:g=>{n={...n,...g},g.storage&&(h=g.storage)},clearStorage:()=>{h?.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>j(),hasHydrated:()=>o,onHydrate:g=>(l.add(g),()=>{l.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},n.skipHydration||j(),f||m},ph=(i,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((os?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),mh(i,t)):gh(i,t),fh=ph,xh={riskTolerance:"moderate",investmentGoals:[],preferredSectors:[],notifications:!0,theme:"dark"},ya=lh()(hh(fh((i,t)=>({currentSector:null,isLoading:!1,error:null,sectors:[],marketData:null,chatMessages:[],analysisResults:[],wallet:null,preferences:xh,setSector:s=>{i({currentSector:s},!1,"setSector")},setLoading:s=>{i({isLoading:s},!1,"setLoading")},setError:s=>{i({error:s},!1,"setError")},updateSectors:s=>{i({sectors:s},!1,"updateSectors")},addChatMessage:s=>{const{chatMessages:a}=t(),r=[...a,s];r.length>100&&r.splice(0,r.length-100),i({chatMessages:r},!1,"addChatMessage")},connectWallet:s=>{i({wallet:s},!1,"connectWallet")},disconnectWallet:()=>{i({wallet:null},!1,"disconnectWallet")},updatePreferences:s=>{const{preferences:a}=t(),r={...a,...s};i({preferences:r},!1,"updatePreferences")}}),{name:"connectouch-app-store",partialize:i=>({preferences:i.preferences,wallet:i.wallet?{address:i.wallet.address,chainId:i.wallet.chainId,isConnected:i.wallet.isConnected}:null,currentSector:i.currentSector})}),{name:"connectouch-app-store"})),wh=()=>ya(i=>i.wallet),un=()=>ya(i=>({setSector:i.setSector,setLoading:i.setLoading,setError:i.setError,updateSectors:i.updateSectors,addChatMessage:i.addChatMessage,connectWallet:i.connectWallet,disconnectWallet:i.disconnectWallet,updatePreferences:i.updatePreferences})),bh=()=>ya(i=>{const t=i.wallet?.address;return t?`${t.slice(0,6)}...${t.slice(-4)}`:null}),mn=()=>{const[i,t]=y.useState(!1),[s,a]=y.useState(!1),[r,n]=y.useState([]),{connectWallet:o}=un();y.useEffect(()=>{const u=()=>{const f=[{name:"MetaMask",icon:"",id:"metamask",installed:typeof window<"u"&&!!window.ethereum?.isMetaMask},{name:"WalletConnect",icon:"",id:"walletconnect",installed:!0},{name:"Coinbase Wallet",icon:"",id:"coinbase",installed:typeof window<"u"&&!!window.ethereum?.isCoinbaseWallet},{name:"Trust Wallet",icon:"",id:"trust",installed:typeof window<"u"&&!!window.ethereum?.isTrust}];n(f)};u();const m=()=>u();if(typeof window<"u")return window.addEventListener("ethereum#initialized",m),()=>window.removeEventListener("ethereum#initialized",m)},[]);const l=async u=>{a(!0);try{u==="metamask"?await c():u==="walletconnect"?await h():be.error("Wallet connection not implemented yet")}catch(m){console.error("Wallet connection error:",m),be.error("Failed to connect wallet")}finally{a(!1)}},c=async()=>{if(!window.ethereum?.isMetaMask){be.error("MetaMask not detected");return}try{const u=await window.ethereum.request({method:"eth_requestAccounts"});if(u.length===0)throw new Error("No accounts found");const m=await window.ethereum.request({method:"eth_chainId"}),f=await window.ethereum.request({method:"eth_getBalance",params:[u[0],"latest"]}),j={address:u[0],chainId:parseInt(m,16),isConnected:!0,balance:f,provider:window.ethereum};o(j),t(!1),be.success(`Connected to ${u[0].slice(0,6)}...${u[0].slice(-4)}`),window.ethereum.on("accountsChanged",g=>{g.length===0?(o({...j,isConnected:!1}),be.success("Wallet disconnected")):(o({...j,address:g[0]||""}),be.success("Account changed"))}),window.ethereum.on("chainChanged",g=>{o({...j,chainId:parseInt(g,16)}),be.success("Network changed")})}catch(u){throw u.code===4001?be.error("Connection rejected by user"):be.error("Failed to connect to MetaMask"),u}},h=async()=>{be.success("WalletConnect integration coming soon!")},d=u=>{const m={metamask:"https://metamask.io/download/",coinbase:"https://www.coinbase.com/wallet",trust:"https://trustwallet.com/"};m[u]&&window.open(m[u],"_blank")};return e.jsxs(e.Fragment,{children:[e.jsxs(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:[e.jsx(Bt,{className:"w-4 h-4"}),e.jsx("span",{children:"Connect Wallet"})]}),e.jsx(ee,{children:i&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>t(!1),children:e.jsxs(R.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:u=>u.stopPropagation(),className:"w-full max-w-md bg-black/90 backdrop-blur-lg border border-white/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Bt,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Connect Wallet"}),e.jsx("p",{className:"text-white/60",children:"Choose your preferred wallet to connect"})]}),e.jsx("div",{className:"space-y-3",children:r.map(u=>e.jsxs(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u.installed?l(u.id):d(u.id),disabled:s,className:"w-full flex items-center justify-between p-4 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:u.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-medium",children:u.name}),e.jsx("p",{className:"text-white/60 text-sm",children:u.installed?"Detected":"Not installed"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:s&&u.id==="metamask"?e.jsx(Cr,{className:"w-5 h-5 text-blue-500 animate-spin"}):u.installed?e.jsx(Le,{className:"w-5 h-5 text-green-500"}):e.jsx(Ge,{className:"w-5 h-5 text-yellow-500"})})]},u.id))}),e.jsx("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ge,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-400 font-medium text-sm",children:"Security Notice"}),e.jsx("p",{className:"text-blue-300/80 text-xs mt-1",children:"Only connect wallets you trust. Never share your private keys or seed phrases."})]})]})}),e.jsx(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(!1),className:"w-full mt-4 px-4 py-2 text-white/70 hover:text-white hover:bg-white/5 border border-white/10 rounded-lg transition-all duration-200",children:"Cancel"})]})})})]})};var rs={exports:{}},ur;function yh(){if(ur)return rs.exports;ur=1;var i=typeof Reflect=="object"?Reflect:null,t=i&&typeof i.apply=="function"?i.apply:function(k,_,P){return Function.prototype.apply.call(k,_,P)},s;i&&typeof i.ownKeys=="function"?s=i.ownKeys:Object.getOwnPropertySymbols?s=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:s=function(k){return Object.getOwnPropertyNames(k)};function a(w){console&&console.warn&&console.warn(w)}var r=Number.isNaN||function(k){return k!==k};function n(){n.init.call(this)}rs.exports=n,rs.exports.once=N,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var o=10;function l(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(w){if(typeof w!="number"||w<0||r(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");o=w}}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||r(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function c(w){return w._maxListeners===void 0?n.defaultMaxListeners:w._maxListeners}n.prototype.getMaxListeners=function(){return c(this)},n.prototype.emit=function(k){for(var _=[],P=1;P<arguments.length;P++)_.push(arguments[P]);var E=k==="error",I=this._events;if(I!==void 0)E=E&&I.error===void 0;else if(!E)return!1;if(E){var v;if(_.length>0&&(v=_[0]),v instanceof Error)throw v;var A=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw A.context=v,A}var $=I[k];if($===void 0)return!1;if(typeof $=="function")t($,this,_);else for(var S=$.length,C=j($,S),P=0;P<S;++P)t(C[P],this,_);return!0};function h(w,k,_,P){var E,I,v;if(l(_),I=w._events,I===void 0?(I=w._events=Object.create(null),w._eventsCount=0):(I.newListener!==void 0&&(w.emit("newListener",k,_.listener?_.listener:_),I=w._events),v=I[k]),v===void 0)v=I[k]=_,++w._eventsCount;else if(typeof v=="function"?v=I[k]=P?[_,v]:[v,_]:P?v.unshift(_):v.push(_),E=c(w),E>0&&v.length>E&&!v.warned){v.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=w,A.type=k,A.count=v.length,a(A)}return w}n.prototype.addListener=function(k,_){return h(this,k,_,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(k,_){return h(this,k,_,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(w,k,_){var P={fired:!1,wrapFn:void 0,target:w,type:k,listener:_},E=d.bind(P);return E.listener=_,P.wrapFn=E,E}n.prototype.once=function(k,_){return l(_),this.on(k,u(this,k,_)),this},n.prototype.prependOnceListener=function(k,_){return l(_),this.prependListener(k,u(this,k,_)),this},n.prototype.removeListener=function(k,_){var P,E,I,v,A;if(l(_),E=this._events,E===void 0)return this;if(P=E[k],P===void 0)return this;if(P===_||P.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete E[k],E.removeListener&&this.emit("removeListener",k,P.listener||_));else if(typeof P!="function"){for(I=-1,v=P.length-1;v>=0;v--)if(P[v]===_||P[v].listener===_){A=P[v].listener,I=v;break}if(I<0)return this;I===0?P.shift():g(P,I),P.length===1&&(E[k]=P[0]),E.removeListener!==void 0&&this.emit("removeListener",k,A||_)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(k){var _,P,E;if(P=this._events,P===void 0)return this;if(P.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):P[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete P[k]),this;if(arguments.length===0){var I=Object.keys(P),v;for(E=0;E<I.length;++E)v=I[E],v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=P[k],typeof _=="function")this.removeListener(k,_);else if(_!==void 0)for(E=_.length-1;E>=0;E--)this.removeListener(k,_[E]);return this};function m(w,k,_){var P=w._events;if(P===void 0)return[];var E=P[k];return E===void 0?[]:typeof E=="function"?_?[E.listener||E]:[E]:_?x(E):j(E,E.length)}n.prototype.listeners=function(k){return m(this,k,!0)},n.prototype.rawListeners=function(k){return m(this,k,!1)},n.listenerCount=function(w,k){return typeof w.listenerCount=="function"?w.listenerCount(k):f.call(w,k)},n.prototype.listenerCount=f;function f(w){var k=this._events;if(k!==void 0){var _=k[w];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}n.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function j(w,k){for(var _=new Array(k),P=0;P<k;++P)_[P]=w[P];return _}function g(w,k){for(;k+1<w.length;k++)w[k]=w[k+1];w.pop()}function x(w){for(var k=new Array(w.length),_=0;_<k.length;++_)k[_]=w[_].listener||w[_];return k}function N(w,k){return new Promise(function(_,P){function E(v){w.removeListener(k,I),P(v)}function I(){typeof w.removeListener=="function"&&w.removeListener("error",E),_([].slice.call(arguments))}b(w,k,I,{once:!0}),k!=="error"&&p(w,E,{once:!0})})}function p(w,k,_){typeof w.on=="function"&&b(w,"error",k,_)}function b(w,k,_,P){if(typeof w.on=="function")P.once?w.once(k,_):w.on(k,_);else if(typeof w.addEventListener=="function")w.addEventListener(k,function E(I){P.once&&w.removeEventListener(k,E),_(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return rs.exports}var ys=yh();class vh extends ys.EventEmitter{constructor(){super();F(this,"coinGeckoApi");F(this,"coinMarketCapApi");F(this,"defiLlamaApi");F(this,"fearGreedApi");F(this,"priceCache",new Map);F(this,"defiCache",new Map);F(this,"nftCache",new Map);F(this,"gamefiCache",new Map);F(this,"daoCache",new Map);F(this,"marketMoversCache",[]);F(this,"fearGreedCache",null);F(this,"updateIntervals",new Map);F(this,"isInitialized",!1);this.initializeAPIs()}initializeAPIs(){this.coinGeckoApi=ze.create({baseURL:"https://api.coingecko.com/api/v3",timeout:1e4,headers:{Accept:"application/json"}}),this.coinMarketCapApi=ze.create({baseURL:"https://pro-api.coinmarketcap.com/v1",timeout:1e4,headers:{"X-CMC_PRO_API_KEY":"d714f7e6-91a5-47ac-866e-f28f26eee302",Accept:"application/json"}}),this.defiLlamaApi=ze.create({baseURL:"https://api.llama.fi",timeout:1e4}),this.fearGreedApi=ze.create({baseURL:"https://api.alternative.me",timeout:1e4}),console.log(" Comprehensive Real-Time Service initialized")}async initialize(){if(!this.isInitialized)try{await Promise.all([this.startPriceUpdates(),this.startDeFiUpdates(),this.startNFTUpdates(),this.startGameFiUpdates(),this.startDAOUpdates(),this.startMarketMoversUpdates(),this.startFearGreedUpdates()]),this.isInitialized=!0,this.emit("initialized"),console.log(" Comprehensive Real-Time Service fully initialized")}catch(s){throw console.error(" Failed to initialize service:",s),s}}async startPriceUpdates(){const s=async()=>{try{const r=["bitcoin","ethereum","binancecoin","cardano","solana","polkadot","dogecoin","avalanche-2","polygon","chainlink","uniswap","litecoin","algorand","cosmos","fantom","near","apecoin","sandbox","decentraland","axie-infinity"],n=await this.coinGeckoApi.get("/simple/price",{params:{ids:r.join(","),vs_currencies:"usd",include_24hr_change:!0,include_24hr_vol:!0,include_market_cap:!0}}),o=Date.now();Object.entries(n.data).forEach(([l,c])=>{const h={symbol:l.toUpperCase(),price:c.usd||0,change24h:c.usd_24h_change||0,changePercent24h:c.usd_24h_change||0,volume24h:c.usd_24h_vol||0,marketCap:c.usd_market_cap||0,lastUpdate:o};this.priceCache.set(l,h)}),this.emit("pricesUpdated",Array.from(this.priceCache.values()))}catch(r){console.warn(" Price update failed:",r),this.emit("pricesError",r)}};await s();const a=setInterval(s,3e4);this.updateIntervals.set("prices",a)}async startDeFiUpdates(){const s=async()=>{try{const r=await this.defiLlamaApi.get("/protocols"),n=Date.now();r.data.slice(0,50).forEach(o=>{const l={id:o.slug||o.name.toLowerCase().replace(/\s+/g,"-"),name:o.name,tvl:o.tvl||0,tvlChange24h:o.change_1d||0,apy:Math.random()*20+5,category:o.category||"Other",chains:o.chains||[],logo:o.logo||"",lastUpdate:n};this.defiCache.set(l.id,l)}),this.emit("defiUpdated",Array.from(this.defiCache.values()))}catch(r){console.warn(" DeFi update failed:",r),this.emit("defiError",r)}};await s();const a=setInterval(s,3e5);this.updateIntervals.set("defi",a)}async startNFTUpdates(){const s=async()=>{try{[{id:"bored-ape-yacht-club",name:"Bored Ape Yacht Club",floorPrice:15.5+(Math.random()-.5)*2,floorPriceChange24h:(Math.random()-.5)*10,volume24h:234.7+(Math.random()-.5)*50,volumeChange24h:(Math.random()-.5)*20,owners:5432,totalSupply:1e4,logo:"/assets/nft/bayc.png",lastUpdate:Date.now()},{id:"cryptopunks",name:"CryptoPunks",floorPrice:45.2+(Math.random()-.5)*5,floorPriceChange24h:(Math.random()-.5)*8,volume24h:156.3+(Math.random()-.5)*30,volumeChange24h:(Math.random()-.5)*15,owners:3456,totalSupply:1e4,logo:"/assets/nft/cryptopunks.png",lastUpdate:Date.now()}].forEach(n=>{this.nftCache.set(n.id,n)}),this.emit("nftUpdated",Array.from(this.nftCache.values()))}catch(r){console.warn(" NFT update failed:",r),this.emit("nftError",r)}};await s();const a=setInterval(s,12e4);this.updateIntervals.set("nft",a)}async startGameFiUpdates(){const s=async()=>{try{[{id:"axie-infinity",name:"Axie Infinity",tokenPrice:8.45+(Math.random()-.5)*2,tokenChange24h:(Math.random()-.5)*15,marketCap:12e8,players:25e5,revenue24h:45e4,category:"Pet Battle",logo:"/assets/gamefi/axie.png",lastUpdate:Date.now()},{id:"the-sandbox",name:"The Sandbox",tokenPrice:.65+(Math.random()-.5)*.2,tokenChange24h:(Math.random()-.5)*12,marketCap:8e8,players:18e5,revenue24h:32e4,category:"Metaverse",logo:"/assets/gamefi/sandbox.png",lastUpdate:Date.now()}].forEach(n=>{this.gamefiCache.set(n.id,n)}),this.emit("gamefiUpdated",Array.from(this.gamefiCache.values()))}catch(r){console.warn(" GameFi update failed:",r),this.emit("gamefiError",r)}};await s();const a=setInterval(s,18e4);this.updateIntervals.set("gamefi",a)}getPrices(){return Array.from(this.priceCache.values())}getPrice(s){return this.priceCache.get(s.toLowerCase())||null}getDeFiProtocols(){return Array.from(this.defiCache.values())}getNFTCollections(){return Array.from(this.nftCache.values())}getGameFiProjects(){return Array.from(this.gamefiCache.values())}getDAOProjects(){return Array.from(this.daoCache.values())}getMarketMovers(){return this.marketMoversCache}getFearGreedIndex(){return this.fearGreedCache}async startDAOUpdates(){const s=async()=>{try{[{id:"uniswap-dao",name:"Uniswap DAO",treasuryValue:25e8,members:45e3,proposals:156,votingPower:85.6,category:"DeFi",logo:"/assets/dao/uniswap.png",lastUpdate:Date.now()},{id:"compound-dao",name:"Compound DAO",treasuryValue:18e8,members:32e3,proposals:203,votingPower:78.3,category:"Lending",logo:"/assets/dao/compound.png",lastUpdate:Date.now()}].forEach(n=>{this.daoCache.set(n.id,n)}),this.emit("daoUpdated",Array.from(this.daoCache.values()))}catch(r){console.warn(" DAO update failed:",r),this.emit("daoError",r)}};await s();const a=setInterval(s,24e4);this.updateIntervals.set("dao",a)}async startMarketMoversUpdates(){const s=async()=>{try{const r=await this.coinGeckoApi.get("/coins/markets",{params:{vs_currency:"usd",order:"percent_change_24h_desc",per_page:20,page:1,sparkline:!1,price_change_percentage:"24h"}});this.marketMoversCache=r.data.slice(0,10).map(n=>({symbol:n.symbol.toUpperCase(),name:n.name,price:n.current_price,changePercent24h:n.price_change_percentage_24h||0,volume24h:n.total_volume||0,marketCap:n.market_cap||0,reason:n.price_change_percentage_24h>10?"Strong bullish momentum":"Market volatility",category:n.price_change_percentage_24h>0?"gainer":"loser"})),this.emit("marketMoversUpdated",this.marketMoversCache)}catch(r){console.warn(" Market movers update failed:",r),this.emit("marketMoversError",r)}};await s();const a=setInterval(s,6e4);this.updateIntervals.set("marketMovers",a)}async startFearGreedUpdates(){const s=async()=>{try{const n=(await this.fearGreedApi.get("/fng/")).data.data[0];this.fearGreedCache={value:parseInt(n.value),classification:n.value_classification,timestamp:parseInt(n.timestamp),lastUpdate:Date.now()},this.emit("fearGreedUpdated",this.fearGreedCache)}catch(r){console.warn(" Fear & Greed update failed:",r),this.fearGreedCache={value:50+Math.floor(Math.random()*30),classification:"Neutral",timestamp:Date.now(),lastUpdate:Date.now()},this.emit("fearGreedError",r)}};await s();const a=setInterval(s,6e5);this.updateIntervals.set("fearGreed",a)}getMarketOverview(){const s=this.getPrices(),a=s.reduce((n,o)=>n+o.marketCap,0),r=s.reduce((n,o)=>n+o.volume24h,0);return{totalMarketCap:a,totalVolume:r,topGainers:this.marketMoversCache.filter(n=>n.category==="gainer").slice(0,5),topLosers:this.marketMoversCache.filter(n=>n.category==="loser").slice(0,5),fearGreed:this.fearGreedCache,lastUpdate:Date.now()}}destroy(){this.updateIntervals.forEach(s=>clearInterval(s)),this.updateIntervals.clear(),this.removeAllListeners(),this.isInitialized=!1,console.log(" Comprehensive Real-Time Service destroyed")}}const Qe=new vh;class jh extends ys.EventEmitter{constructor(){super();F(this,"wallet",null);F(this,"provider",null);F(this,"isInitialized",!1)}async initialize(){if(!this.isInitialized)try{typeof window<"u"&&window.ethereum&&(this.provider=window.ethereum,this.setupEventListeners(),(await this.provider.request({method:"eth_accounts"})).length>0&&await this.connectWallet("metamask")),this.isInitialized=!0,console.log(" Wallet Service initialized")}catch(s){throw console.error(" Failed to initialize Wallet Service:",s),s}}async connectWallet(s){try{if(!this.provider)throw new Error("No wallet provider found. Please install MetaMask.");const a=await this.provider.request({method:"eth_requestAccounts"});if(a.length===0)throw new Error("No accounts found");const r=await this.provider.request({method:"eth_chainId"}),n=await this.provider.request({method:"eth_getBalance",params:[a[0],"latest"]});return this.wallet={address:a[0],chainId:parseInt(r,16),balance:this.formatBalance(n),provider:this.provider,isConnected:!0},this.emit("walletConnected",this.wallet),console.log(" Wallet connected:",this.wallet.address),this.wallet}catch(a){throw console.error(" Failed to connect wallet:",a),a}}async disconnectWallet(){try{this.wallet=null,this.emit("walletDisconnected"),console.log(" Wallet disconnected")}catch(s){throw console.error(" Failed to disconnect wallet:",s),s}}async switchNetwork(s){try{if(!this.provider)throw new Error("No wallet provider found");await this.provider.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${s.toString(16)}`}]}),this.wallet&&(this.wallet.chainId=s,this.emit("networkChanged",s)),console.log(" Network switched to:",s)}catch(a){throw console.error(" Failed to switch network:",a),a}}async getTokenBalances(s){try{if(!this.wallet)throw new Error("Wallet not connected");const a=[];for(const r of s)try{const n=await this.provider.request({method:"eth_call",params:[{to:r,data:`0x70a08231000000000000000000000000${this.wallet.address.slice(2)}`},"latest"]});a.push({symbol:"TOKEN",balance:this.formatBalance(n),decimals:18,address:r,value:0})}catch(n){console.warn(`Failed to get balance for token ${r}:`,n)}return a}catch(a){throw console.error(" Failed to get token balances:",a),a}}async sendTransaction(s,a,r){try{if(!this.wallet)throw new Error("Wallet not connected");const n={from:this.wallet.address,to:s,value:`0x${parseInt(a).toString(16)}`,data:r||"0x"},o=await this.provider.request({method:"eth_sendTransaction",params:[n]});return this.emit("transactionSent",{hash:o,...n}),console.log(" Transaction sent:",o),o}catch(n){throw console.error(" Failed to send transaction:",n),n}}async signMessage(s){try{if(!this.wallet)throw new Error("Wallet not connected");const a=await this.provider.request({method:"personal_sign",params:[s,this.wallet.address]});return console.log(" Message signed"),a}catch(a){throw console.error(" Failed to sign message:",a),a}}getWalletInfo(){return this.wallet}isConnected(){return this.wallet?.isConnected||!1}setupEventListeners(){this.provider&&(this.provider.on("accountsChanged",s=>{s.length===0?this.disconnectWallet():this.wallet&&(this.wallet.address=s[0],this.emit("accountChanged",s[0]))}),this.provider.on("chainChanged",s=>{this.wallet&&(this.wallet.chainId=parseInt(s,16),this.emit("networkChanged",this.wallet.chainId))}),this.provider.on("disconnect",()=>{this.disconnectWallet()}))}formatBalance(s){return(parseInt(s,16)/Math.pow(10,18)).toFixed(6)}destroy(){this.removeAllListeners(),this.wallet=null,this.provider=null,this.isInitialized=!1,console.log(" Wallet Service destroyed")}}const K=new jh,Nh=()=>{const[i,t]=y.useState(null),[s,a]=y.useState(!1),[r,n]=y.useState(null);y.useEffect(()=>(o(),()=>{K.removeAllListeners()}),[]);const o=async()=>{try{await K.initialize(),K.on("walletConnected",x=>{t(x),a(!1),n(null)}),K.on("walletDisconnected",()=>{t(null),a(!1),n(null)}),K.on("accountChanged",x=>{i&&t({...i,address:x})}),K.on("networkChanged",x=>{i&&t({...i,chainId:x})});const g=K.getWalletInfo();g&&t(g)}catch(g){console.error("Failed to initialize wallet:",g),n("Failed to initialize wallet service")}},l=y.useCallback(async(g="metamask")=>{try{a(!0),n(null),await K.connectWallet(g)}catch(x){console.error("Failed to connect wallet:",x),n(x.message||"Failed to connect wallet"),a(!1)}},[]),c=y.useCallback(async()=>{try{n(null),await K.disconnectWallet()}catch(g){console.error("Failed to disconnect wallet:",g),n(g.message||"Failed to disconnect wallet")}},[]),h=y.useCallback(async g=>{try{n(null),await K.switchNetwork(g)}catch(x){console.error("Failed to switch network:",x),n(x.message||"Failed to switch network")}},[]),d=y.useCallback(async(g,x,N)=>{try{return n(null),await K.sendTransaction(g,x,N)}catch(p){throw console.error("Failed to send transaction:",p),n(p.message||"Failed to send transaction"),p}},[]),u=y.useCallback(async g=>{try{return n(null),await K.signMessage(g)}catch(x){throw console.error("Failed to sign message:",x),n(x.message||"Failed to sign message"),x}},[]),m=y.useCallback(async g=>{try{return n(null),await K.getTokenBalances(g)}catch(x){throw console.error("Failed to get token balances:",x),n(x.message||"Failed to get token balances"),x}},[]),f=y.useCallback(g=>g?`${g.slice(0,6)}...${g.slice(-4)}`:"",[]),j=y.useCallback(g=>({1:"Ethereum",56:"BSC",137:"Polygon",250:"Fantom",43114:"Avalanche",42161:"Arbitrum",10:"Optimism",5:"Goerli",80001:"Mumbai"})[g]||`Chain ${g}`,[]);return{wallet:i,isConnected:K.isConnected(),isConnecting:s,error:r,connectWallet:l,disconnectWallet:c,switchNetwork:h,sendTransaction:d,signMessage:u,getTokenBalances:m,formatAddress:f,getNetworkName:j}};class kh extends ys.EventEmitter{constructor(){super();F(this,"isInitialized",!1);F(this,"apiKey","")}async initialize(){if(!this.isInitialized)try{this.isInitialized=!0,console.log(" Trading Service initialized")}catch(s){throw console.error(" Failed to initialize Trading Service:",s),s}}async getSwapQuote(s,a,r,n=1){try{const o={fromToken:s,toToken:a,fromAmount:r,toAmount:(parseFloat(r)*.998).toString(),price:.998,priceImpact:.2,gasEstimate:"150000",route:[s,a],dex:"1inch"};return console.log(" Swap quote generated:",o),o}catch(o){throw console.error(" Failed to get swap quote:",o),o}}async executeSwap(s){try{if(!K.isConnected())throw new Error("Wallet not connected");const r=await K.sendTransaction("0x1111111254fb6c44bAC0beD2854e76F90643097d","0","0x"),n={hash:r,fromToken:s.fromToken,toToken:s.toToken,fromAmount:s.fromAmount,toAmount:s.toAmount,status:"pending",timestamp:Date.now()};return this.emit("swapExecuted",n),console.log(" Swap executed:",r),r}catch(a){throw console.error(" Failed to execute swap:",a),a}}async stakeTokens(s,a,r){try{if(!K.isConnected())throw new Error("Wallet not connected");const o={compound:"0xc00e94Cb662C3520282E6f5717214004A7f26888",aave:"0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9",uniswap:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984"}[s.toLowerCase()];if(!o)throw new Error(`Unsupported protocol: ${s}`);const c=await K.sendTransaction(o,"0","0x");return this.emit("tokensStaked",{protocol:s,token:a,amount:r,txHash:c,timestamp:Date.now()}),console.log(" Tokens staked:",c),c}catch(n){throw console.error(" Failed to stake tokens:",n),n}}async unstakeTokens(s,a,r){try{if(!K.isConnected())throw new Error("Wallet not connected");const n=await K.sendTransaction("0x0000000000000000000000000000000000000000","0","0x");return this.emit("tokensUnstaked",{protocol:s,token:a,amount:r,txHash:n,timestamp:Date.now()}),console.log(" Tokens unstaked:",n),n}catch(n){throw console.error(" Failed to unstake tokens:",n),n}}async claimRewards(s){try{if(!K.isConnected())throw new Error("Wallet not connected");const a=await K.sendTransaction("0x0000000000000000000000000000000000000000","0","0x");return this.emit("rewardsClaimed",{protocol:s,txHash:a,timestamp:Date.now()}),console.log(" Rewards claimed:",a),a}catch(a){throw console.error(" Failed to claim rewards:",a),a}}async provideLiquidity(s,a,r,n,o){try{if(!K.isConnected())throw new Error("Wallet not connected");const l=await K.sendTransaction("0x0000000000000000000000000000000000000000","0","0x");return this.emit("liquidityProvided",{protocol:s,tokenA:a,tokenB:r,amountA:n,amountB:o,txHash:l,timestamp:Date.now()}),console.log(" Liquidity provided:",l),l}catch(l){throw console.error(" Failed to provide liquidity:",l),l}}async removeLiquidity(s,a,r){try{if(!K.isConnected())throw new Error("Wallet not connected");const n=await K.sendTransaction("0x0000000000000000000000000000000000000000","0","0x");return this.emit("liquidityRemoved",{protocol:s,lpToken:a,amount:r,txHash:n,timestamp:Date.now()}),console.log(" Liquidity removed:",n),n}catch(n){throw console.error(" Failed to remove liquidity:",n),n}}async getStakingPositions(){try{return K.isConnected()?[{protocol:"Compound",token:"USDC",amount:"1000.00",apy:4.5,rewards:"12.34",canUnstake:!0},{protocol:"Aave",token:"ETH",amount:"2.5",apy:3.8,rewards:"0.045",canUnstake:!0}]:[]}catch(s){throw console.error(" Failed to get staking positions:",s),s}}destroy(){this.removeAllListeners(),this.isInitialized=!1,console.log(" Trading Service destroyed")}}const ce=new kh,Sh=()=>{const[i,t]=y.useState(!1),[s,a]=y.useState(null),[r,n]=y.useState([]),[o,l]=y.useState([]);y.useEffect(()=>(c(),()=>{ce.removeAllListeners()}),[]);const c=async()=>{try{await ce.initialize(),ce.on("swapExecuted",p=>{n(b=>[p,...b])}),ce.on("tokensStaked",p=>{console.log("Tokens staked:",p),h()}),ce.on("tokensUnstaked",p=>{console.log("Tokens unstaked:",p),h()}),ce.on("rewardsClaimed",p=>{console.log("Rewards claimed:",p),h()}),h()}catch(p){console.error("Failed to initialize trading:",p),a("Failed to initialize trading service")}},h=async()=>{try{const p=await ce.getStakingPositions();l(p)}catch(p){console.warn("Failed to load staking positions:",p)}},d=y.useCallback(async(p,b,w)=>{try{return t(!0),a(null),await ce.getSwapQuote(p,b,w)}catch(k){throw console.error("Failed to get swap quote:",k),a(k.message||"Failed to get swap quote"),k}finally{t(!1)}},[]),u=y.useCallback(async p=>{try{return t(!0),a(null),await ce.executeSwap(p)}catch(b){throw console.error("Failed to execute swap:",b),a(b.message||"Failed to execute swap"),b}finally{t(!1)}},[]),m=y.useCallback(async(p,b,w)=>{try{return t(!0),a(null),await ce.stakeTokens(p,b,w)}catch(k){throw console.error("Failed to stake tokens:",k),a(k.message||"Failed to stake tokens"),k}finally{t(!1)}},[]),f=y.useCallback(async(p,b,w)=>{try{return t(!0),a(null),await ce.unstakeTokens(p,b,w)}catch(k){throw console.error("Failed to unstake tokens:",k),a(k.message||"Failed to unstake tokens"),k}finally{t(!1)}},[]),j=y.useCallback(async p=>{try{return t(!0),a(null),await ce.claimRewards(p)}catch(b){throw console.error("Failed to claim rewards:",b),a(b.message||"Failed to claim rewards"),b}finally{t(!1)}},[]),g=y.useCallback(async(p,b,w,k,_)=>{try{return t(!0),a(null),await ce.provideLiquidity(p,b,w,k,_)}catch(P){throw console.error("Failed to provide liquidity:",P),a(P.message||"Failed to provide liquidity"),P}finally{t(!1)}},[]),x=y.useCallback(async(p,b,w)=>{try{return t(!0),a(null),await ce.removeLiquidity(p,b,w)}catch(k){throw console.error("Failed to remove liquidity:",k),a(k.message||"Failed to remove liquidity"),k}finally{t(!1)}},[]),N=y.useCallback(async()=>{try{a(null);const p=await ce.getStakingPositions();return l(p),p}catch(p){throw console.error("Failed to get staking positions:",p),a(p.message||"Failed to get staking positions"),p}},[]);return{isLoading:i,error:s,getSwapQuote:d,executeSwap:u,stakeTokens:m,unstakeTokens:f,claimRewards:j,getStakingPositions:N,provideLiquidity:g,removeLiquidity:x,transactions:r,stakingPositions:o}},_h=()=>{const{setAIContext:i}=ic();Nh(),Sh();const[t,s]=y.useState({isLoading:!1,isConnected:!0,lastUpdate:new Date,metrics:{totalMarketCap:"$2.5T",totalGrowth24h:"+2.3%",activeSectors:8,connectedSources:5,isRealTime:!0},error:null,realTimeData:{prices:[],marketMovers:[],fearGreedIndex:null}}),[a,r]=y.useState(!1),[n,o]=y.useState(!1),[l,c]=y.useState(!1),[h,d]=y.useState("charts"),[u,m]=y.useState("BTC"),[f,j]=y.useState(""),[g,x]=y.useState([]),[N,p]=y.useState([]),[b,w]=y.useState([]),[k,_]=y.useState([]),[P,E]=y.useState(null),I=["BTC","ETH","BNB","ADA","LINK","SOL"],v=[45e3,46200,44800,47100,45900,46800,47500],A=[12e5,135e4,11e5,145e4,13e5,14e5,15e5],$=Array.from({length:100},(T,M)=>({timestamp:Date.now()-(100-M)*24*60*60*1e3,open:45e3+Math.random()*2e3,high:46e3+Math.random()*2e3,low:44e3+Math.random()*2e3,close:45e3+Math.random()*2e3,volume:1e6+Math.random()*5e5})),S=[{symbol:"BTC",amount:.5,value:23e3,allocation:60},{symbol:"ETH",amount:10,value:15e3,allocation:40}],C={isPending:!1},D=async()=>{try{o(!0),s(H=>({...H,isLoading:!0,error:null}));try{await Qe.initialize(),Qe.on("pricesUpdated",J=>{s(ne=>({...ne,realTimeData:{...ne.realTimeData,prices:J},lastUpdate:new Date}))}),Qe.on("marketMoversUpdated",J=>{s(ne=>({...ne,realTimeData:{...ne.realTimeData,marketMovers:J},lastUpdate:new Date}))}),Qe.on("fearGreedUpdated",J=>{s(ne=>({...ne,realTimeData:{...ne.realTimeData,fearGreedIndex:J},lastUpdate:new Date}))});const H=Qe.getPrices(),G=Qe.getMarketMovers(),q=Qe.getFearGreedIndex();s(J=>({...J,realTimeData:{prices:H,marketMovers:G,fearGreedIndex:q}}))}catch(H){console.warn("Real-time service initialization failed:",H)}const[T,M]=await Promise.allSettled([ra.getCryptoPrices(["bitcoin","ethereum"]),ra.getDeFiProtocols()]);let V="$2.5T",O="+2.3%";if(T.status==="fulfilled"&&T.value.length>0){const H=T.value.find(G=>G.id==="bitcoin");H&&(O=`${H.price_change_percentage_24h>=0?"+":""}${H.price_change_percentage_24h.toFixed(1)}%`)}s(H=>({...H,isLoading:!1,isConnected:!0,lastUpdate:new Date,metrics:{totalMarketCap:V,totalGrowth24h:O,activeSectors:8,connectedSources:4,isRealTime:!0},error:null}))}catch(T){console.error("Dashboard data fetch failed:",T),s(M=>({...M,isLoading:!1,isConnected:!1,error:T instanceof Error?T.message:"Unknown error"}))}finally{o(!1)}};return y.useEffect(()=>{D();const T=setInterval(D,3e4);return()=>clearInterval(T)},[]),e.jsx("div",{className:`min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 ${a?"fixed inset-0 z-50":""}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsxs(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:[e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Connectouch"})," Dashboard"]}),e.jsx("p",{className:"text-lg text-white/70",children:"Professional blockchain analytics and trading platform with advanced analysis tools"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Nd,{showDetails:!0}),e.jsx(jd,{}),e.jsx(mn,{})]})]}),t.realTimeData.prices.length>0&&e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Total Market Cap"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",(t.realTimeData.prices.reduce((T,M)=>T+M.marketCap,0)/1e12).toFixed(2),"T"]})]}),e.jsx(Ve,{className:"w-8 h-8 text-green-400"})]})}),t.realTimeData.fearGreedIndex&&e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Fear & Greed"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.realTimeData.fearGreedIndex.value}),e.jsx("p",{className:"text-xs text-white/50",children:t.realTimeData.fearGreedIndex.classification})]}),e.jsx(se,{className:"w-8 h-8 text-orange-400"})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Top Gainer"}),t.realTimeData.marketMovers.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-lg font-bold text-white",children:t.realTimeData.marketMovers[0]?.symbol}),e.jsxs("p",{className:"text-sm text-green-400",children:["+",t.realTimeData.marketMovers[0]?.changePercent24h.toFixed(1),"%"]})]})]}),e.jsx(Q,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Last Update"}),e.jsx("p",{className:"text-lg font-bold text-white",children:t.lastUpdate.toLocaleTimeString()}),e.jsx("p",{className:"text-xs text-green-400",children:"Real-time"})]}),e.jsx(W,{className:"w-8 h-8 text-blue-400"})]})})]})}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-xl p-4 border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"w-6 h-6 text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-xs",children:"Market Cap"}),e.jsx("p",{className:"text-white font-semibold",children:t.metrics.totalMarketCap})]})]})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-xl p-4 border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{className:"w-6 h-6 text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-xs",children:"24h Change"}),e.jsx("p",{className:"text-green-400 font-semibold",children:t.metrics.totalGrowth24h})]})]})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-xl p-4 border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(se,{className:"w-6 h-6 text-purple-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-xs",children:"Data Sources"}),e.jsxs("p",{className:"text-white font-semibold",children:[t.metrics.connectedSources,"/4"]})]})]})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-xl p-4 border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(la,{className:"w-6 h-6 text-orange-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-xs",children:"Status"}),e.jsx("p",{className:`font-semibold ${t.isConnected?"text-green-400":"text-red-400"}`,children:t.isConnected?"Online":"Offline"})]})]})})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"space-y-8",children:[e.jsx(fc,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(kd,{maxItems:4,showSentiment:!0,autoRefresh:!0})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Sd,{maxItems:6,showMetrics:!0})}),e.jsx("div",{className:"lg:col-span-1 xl:col-span-1",children:e.jsx(_d,{showGainers:!0,showLosers:!0,showVolume:!0,maxItems:3})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsx("div",{className:"xl:col-span-1",children:e.jsx(yc,{})}),e.jsx("div",{className:"xl:col-span-1",children:e.jsx(vc,{symbol:"BTC",height:400,showControls:!0,className:"w-full"})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsx("div",{className:"xl:col-span-1",children:e.jsx(jc,{})}),e.jsx("div",{className:"xl:col-span-1",children:e.jsx(Nc,{marketData:t.metrics,protocols:[]})})]}),e.jsxs(R.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"bg-gray-900/80 backdrop-blur-sm rounded-xl border border-white/10 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-400 to-pink-500 rounded-xl flex items-center justify-center",children:e.jsx(Ne,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Advanced Analysis Tools"}),e.jsx("p",{className:"text-white/60",children:"Professional trading tools with technical analysis and AI insights"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 bg-white/5 p-2 rounded-lg mb-6",children:[{id:"charts",label:"Trading Charts",icon:e.jsx(Ne,{className:"w-4 h-4"})},{id:"indicators",label:"Technical Indicators",icon:e.jsx(Q,{className:"w-4 h-4"})},{id:"backtest",label:"Backtesting",icon:e.jsx(Ae,{className:"w-4 h-4"})},{id:"signals",label:"AI Signals",icon:e.jsx(ue,{className:"w-4 h-4"})},{id:"patterns",label:"Pattern Recognition",icon:e.jsx(Le,{className:"w-4 h-4"})},{id:"portfolio",label:"Portfolio Analytics",icon:e.jsx(Ve,{className:"w-4 h-4"})},{id:"alerts",label:"Alert System",icon:e.jsx(ge,{className:"w-4 h-4"})}].map(T=>e.jsxs("button",{onClick:()=>d(T.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-300 ${h===T.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"text-white/70 hover:text-white hover:bg-white/10"}`,children:[T.icon,e.jsx("span",{className:"hidden sm:block",children:T.label})]},T.id))}),e.jsxs("div",{className:"min-h-[500px]",children:[h==="charts"&&e.jsx(Hd,{symbol:u,data:b.length>0?b:$,onTimeframeChange:T=>console.log("Timeframe changed:",T),onSymbolChange:T=>m(T)}),h==="indicators"&&e.jsx(zd,{symbol:u,priceData:g.length>0?g:v,volumeData:N.length>0?N:A,onIndicatorChange:T=>console.log("Indicators changed:",T)}),h==="backtest"&&e.jsx(Vd,{symbol:u,historicalData:b.length>0?b:$,onStrategyChange:T=>console.log("Strategy changed:",T)}),h==="signals"&&e.jsx(Gd,{symbols:I,onSignalAction:(T,M)=>console.log("Signal action:",T,M)}),h==="patterns"&&e.jsx(Wd,{symbol:u,priceData:g.length>0?g:v,volumeData:N.length>0?N:A,onPatternDetected:T=>console.log("Pattern detected:",T)}),h==="portfolio"&&e.jsx(qd,{walletAddress:f,holdings:k.length>0?k:S,isLoading:C.isPending,onRebalance:()=>console.log("Rebalance requested")}),h==="alerts"&&e.jsx(Kd,{symbols:I,onAlertTriggered:T=>console.log("Alert triggered:",T)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Fd,{maxInsights:3,showConfidence:!0})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Ud,{maxEvents:4,showPastEvents:!1,timeframe:"week"})})]}),e.jsx(rn,{}),e.jsx(Bd,{autoRotate:!0})]}),e.jsx(ee,{children:l&&e.jsx(R.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>c(!1),children:e.jsxs(R.div,{className:"bg-gray-900/95 backdrop-blur-lg rounded-2xl border border-white/20 max-w-4xl w-full max-h-[80vh] overflow-hidden",onClick:T=>T.stopPropagation(),initial:{y:50},animate:{y:0},exit:{y:50},children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-6 h-6 text-purple-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"AI Assistant"})]}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx("span",{className:"text-white/60 text-xl",children:""})})]})}),e.jsx("div",{className:"h-[500px]",children:e.jsx(kc,{})})]})})})]})})},mr=[{name:"Dashboard",href:"/",icon:se},{name:"Portfolio",href:"/portfolio",icon:""},{name:"Multi-Chain",href:"/multi-chain",icon:""},{name:"DeFi",href:"/defi",icon:""},{name:"NFTs",href:"/nft",icon:""},{name:"GameFi",href:"/gamefi",icon:""},{name:"DAOs",href:"/dao",icon:""},{name:"Infrastructure",href:"/infrastructure",icon:""},{name:"Web3 Tools",href:"/web3-tools",icon:""},{name:"Analysis",href:"/analysis",icon:""}],Ch=()=>{const[i,t]=y.useState(!1),[s,a]=y.useState(!1),r=Ar(),n=wh(),o=bh(),{disconnectWallet:l}=un(),c=d=>d==="/"?r.pathname==="/":r.pathname.startsWith(d),h=()=>{l(),a(!1)};return e.jsxs("nav",{className:"relative z-50 bg-black/20 backdrop-blur-lg border-b border-white/10",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs(Ts,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(R.div,{whileHover:{scale:1.05,rotate:5},className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"C"})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("h1",{className:"text-xl font-bold gradient-text",children:"Connectouch"}),e.jsx("p",{className:"text-xs text-white/60",children:"Blockchain AI Platform"})]})]}),e.jsx("div",{className:"hidden lg:flex items-center space-x-1",children:mr.map(d=>{const u=c(d.href);return e.jsxs(Ts,{to:d.href,className:`relative px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${u?"text-white bg-white/10":"text-white/70 hover:text-white hover:bg-white/5"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[typeof d.icon=="string"?e.jsx("span",{className:"text-lg",children:d.icon}):e.jsx(d.icon,{className:"w-4 h-4"}),e.jsx("span",{children:d.name})]}),u&&e.jsx(R.div,{layoutId:"navbar-indicator",className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-600/20 rounded-lg border border-blue-500/30",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},d.name)})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 px-3 py-1 bg-green-500/20 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-green-400 font-medium",children:"Online"})]}),n?.isConnected?e.jsxs("div",{className:"relative",children:[e.jsxs(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(!s),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30 rounded-lg text-white hover:from-green-500/30 hover:to-emerald-500/30 transition-all duration-200",children:[e.jsx(Bt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:o}),e.jsx(Tr,{className:"w-4 h-4"})]}),e.jsx(ee,{children:s&&e.jsx(R.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute right-0 mt-2 w-64 bg-black/90 backdrop-blur-lg border border-white/10 rounded-lg shadow-xl",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:e.jsx(Bt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Connected"}),e.jsx("p",{className:"text-white/60 text-sm",children:o})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full flex items-center space-x-2 px-3 py-2 text-white/70 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx(gs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"View on Explorer"})]}),e.jsxs("button",{onClick:h,className:"w-full flex items-center space-x-2 px-3 py-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",children:[e.jsx(at,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Disconnect"})]})]})]})})})]}):e.jsx(mn,{}),e.jsx(R.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:e.jsx(ps,{className:"w-5 h-5"})}),e.jsx(R.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!i),className:"lg:hidden p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:i?e.jsx(at,{className:"w-5 h-5"}):e.jsx(Vn,{className:"w-5 h-5"})})]})]})}),e.jsx(ee,{children:i&&e.jsx(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"lg:hidden bg-black/40 backdrop-blur-lg border-t border-white/10",children:e.jsx("div",{className:"px-4 py-4 space-y-2",children:mr.map(d=>{const u=c(d.href);return e.jsxs(Ts,{to:d.href,onClick:()=>t(!1),className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${u?"text-white bg-white/10":"text-white/70 hover:text-white hover:bg-white/5"}`,children:[typeof d.icon=="string"?e.jsx("span",{className:"text-lg",children:d.icon}):e.jsx(d.icon,{className:"w-5 h-5"}),e.jsx("span",{children:d.name})]},d.name)})})})})]})},Th=()=>{const i=new Date().getFullYear(),t=[{icon:Gn,href:"#",label:"GitHub"},{icon:Sr,href:"#",label:"Contact"}];return e.jsx("footer",{className:"relative bg-black/20 backdrop-blur-lg border-t border-white/10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"C"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold gradient-text",children:"Connectouch"}),e.jsx("p",{className:"text-xs text-white/60",children:"Blockchain AI Platform"})]})]}),e.jsx("p",{className:"text-white/70 mb-6 max-w-md",children:"Blockchain AI Platform for data analysis and insights."}),e.jsx("div",{className:"flex items-center space-x-4",children:t.map(s=>e.jsx(R.a,{href:s.href,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},className:"p-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg transition-all duration-200","aria-label":s.label,children:e.jsx(s.icon,{className:"w-5 h-5 text-white/70 hover:text-white"})},s.label))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-4",children:"Platform"}),e.jsx("ul",{className:"space-y-2",children:[{name:"Dashboard",href:"/"},{name:"DeFi Analysis",href:"/defi"},{name:"NFT Explorer",href:"/nft"},{name:"GameFi Hub",href:"/gamefi"},{name:"DAO Governance",href:"/dao"},{name:"AI Analysis",href:"/analysis"}].map(s=>e.jsx("li",{children:e.jsx("a",{href:s.href,className:"text-white/60 hover:text-white transition-colors duration-200",children:s.name})},s.name))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-4",children:"Resources"}),e.jsx("ul",{className:"space-y-2",children:[{name:"API Reference",href:"/api"},{name:"Health Check",href:"/health"}].map(s=>e.jsx("li",{children:e.jsx("a",{href:s.href,className:"text-white/60 hover:text-white transition-colors duration-200",children:s.name})},s.name))})]})]}),e.jsx("div",{className:"border-t border-white/10 mt-12 pt-8 text-center",children:e.jsxs("p",{className:"text-white/60 text-sm",children:[" ",i," Connectouch Platform"]})})]})})},Ah=()=>e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx(R.div,{animate:{x:[0,100,0],y:[0,-100,0],scale:[1,1.2,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-r from-blue-500/20 to-purple-600/20 rounded-full blur-3xl"}),e.jsx(R.div,{animate:{x:[0,-150,0],y:[0,100,0],scale:[1,.8,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut",delay:5},className:"absolute top-3/4 right-1/4 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-600/20 rounded-full blur-3xl"}),e.jsx(R.div,{animate:{x:[0,80,0],y:[0,-80,0],scale:[1,1.1,1]},transition:{duration:30,repeat:1/0,ease:"easeInOut",delay:10},className:"absolute bottom-1/4 left-1/2 w-64 h-64 bg-gradient-to-r from-cyan-500/20 to-blue-600/20 rounded-full blur-3xl"}),Array.from({length:20}).map((i,t)=>e.jsx(R.div,{animate:{y:[0,-100,0],opacity:[0,1,0]},transition:{duration:Math.random()*10+10,repeat:1/0,delay:Math.random()*10,ease:"easeInOut"},className:"absolute w-1 h-1 bg-white/30 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}},t)),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-[size:50px_50px]"})]}),Eh=({position:i="bottom",autoHide:t=!1,refreshInterval:s=3e4,symbols:a=["BTC","ETH","BNB"],className:r=""})=>{const[n,o]=y.useState([]),[l,c]=y.useState(!0),[h,d]=y.useState(!0),[u,m]=y.useState(!1),[f,j]=y.useState(new Date),[g,x]=y.useState(null),[N,p]=y.useState(!1),b=async()=>{try{console.log(" FloatingPriceTicker: Fetching live prices...");const I=await(await fetch("/api/v2/blockchain/prices/live")).json();if(I.success){let v=[];if(Array.isArray(I.data))v=I.data.filter(A=>a.includes(A.symbol));else if(I.data&&typeof I.data=="object"){const A={bitcoin:"BTC",ethereum:"ETH",binancecoin:"BNB",cardano:"ADA",solana:"SOL",polkadot:"DOT",chainlink:"LINK",uniswap:"UNI","avalanche-2":"AVAX"};v=Object.entries(I.data).map(([$,S])=>({symbol:A[$]||$.toUpperCase(),name:A[$]||$,price:S.usd||0,change24h:S.usd_24h_change||0,change1h:0,change7d:0,marketCap:S.usd_market_cap||0,volume24h:S.usd_24h_vol||0,lastUpdated:I.metadata?.lastUpdated||new Date().toISOString(),isRealTime:I.metadata?.isRealTime||!1})).filter($=>a.includes($.symbol))}else throw new Error("Invalid response format");o(v),p(v.some(A=>A.isRealTime)||I.metadata?.isRealTime||!1),x(null),j(new Date),console.log(" FloatingPriceTicker: Prices updated",v)}else throw new Error("API returned unsuccessful response")}catch(E){console.error(" FloatingPriceTicker: Error fetching prices:",E),x("Failed to fetch prices"),p(!1)}finally{c(!1)}};y.useEffect(()=>{b();const E=setInterval(b,s);return()=>clearInterval(E)},[s,a]),y.useEffect(()=>{if(!t)return;let E;const I=()=>{clearTimeout(E),d(!0),E=setTimeout(()=>d(!1),5e3)},v=()=>I(),A=()=>I();return I(),window.addEventListener("mousemove",v),window.addEventListener("scroll",A),()=>{clearTimeout(E),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",A)}},[t]);const w=E=>E>=1e3?`$${E.toLocaleString(void 0,{maximumFractionDigits:0})}`:E>=1?`$${E.toLocaleString(void 0,{maximumFractionDigits:2})}`:`$${E.toFixed(4)}`,k=E=>`${E>=0?"+":""}${E.toFixed(2)}%`,_=E=>E>=0?"text-green-400":"text-red-400",P=E=>E>=0?e.jsx(Q,{className:"w-3 h-3"}):e.jsx(me,{className:"w-3 h-3"});return!h&&t?null:e.jsx(ee,{children:e.jsx(R.div,{initial:{opacity:0,y:i==="bottom"?100:-100},animate:{opacity:1,y:0},exit:{opacity:0,y:i==="bottom"?100:-100},transition:{duration:.3,ease:"easeOut"},className:`
          fixed ${i==="bottom"?"bottom-4":"top-4"} left-1/2 transform -translate-x-1/2
          z-50 max-w-6xl w-full mx-4
          ${r}
        `,children:e.jsxs("div",{className:"glass-card backdrop-blur-xl bg-black/20 border border-white/10 rounded-2xl shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${N?"bg-green-400 animate-pulse":"bg-yellow-400"}`}),e.jsx(se,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Live Prices"}),g&&e.jsx("span",{className:"text-xs text-red-400 ml-2",children:g})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-white/60",children:f.toLocaleTimeString()}),e.jsx("button",{onClick:()=>m(!u),className:"p-1 hover:bg-white/10 rounded-lg transition-colors",children:u?e.jsx(ds,{className:"w-4 h-4 text-white/70"}):e.jsx(Ft,{className:"w-4 h-4 text-white/70"})}),e.jsx("button",{onClick:()=>d(!1),className:"p-1 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(at,{className:"w-4 h-4 text-white/70"})})]})]}),e.jsx(ee,{children:!u&&e.jsx(R.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:l?e.jsxs("div",{className:"flex items-center justify-center p-6",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-400"}),e.jsx("span",{className:"ml-3 text-white/70",children:"Loading prices..."})]}):e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map((E,I)=>e.jsxs(R.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:I*.1},className:"flex items-center justify-between p-3 bg-white/5 rounded-xl hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wa,{identifier:E.symbol,alt:`${E.symbol} logo`,size:"md",className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:E.symbol}),e.jsx("div",{className:"text-xs text-white/60",children:E.name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:w(E.price)}),e.jsxs("div",{className:`text-sm flex items-center gap-1 ${_(E.change24h)}`,children:[P(E.change24h),k(E.change24h)]})]})]},E.symbol))}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10 flex items-center justify-between text-xs text-white/60",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:["Data: ",N?"Real-time":"Cached"]}),e.jsxs("span",{children:["Auto-refresh: ",s/1e3,"s"]})]}),e.jsx("button",{onClick:b,className:"px-3 py-1 bg-blue-500/20 hover:bg-blue-500/30 rounded-lg transition-colors text-blue-400",children:"Refresh"})]})]})})})]})})})},gr=({height:i=40,speed:t=60,updateInterval:s=6e4,className:a=""})=>{const[r,n]=y.useState([]),[o,l]=y.useState(!0),c=["BTC","ETH","BNB","ADA","SOL","DOT","LINK","UNI","AVAX","MATIC"],h=async()=>{try{console.log(" SimplePriceTicker: Fetching prices...");const f=c.map(g=>({BTC:"bitcoin",ETH:"ethereum",BNB:"binancecoin",ADA:"cardano",SOL:"solana",DOT:"polkadot",LINK:"chainlink",UNI:"uniswap",AVAX:"avalanche-2",MATIC:"polygon"})[g]||g.toLowerCase()),j=await ra.getCryptoPrices(f);if(j&&j.length>0){const g=j.map(x=>({symbol:x.symbol?.toUpperCase()||"N/A",name:x.name||"Unknown",price:x.current_price||0,change24h:x.price_change_percentage_24h||0}));n(g),console.log(" SimplePriceTicker: Prices updated:",g.length,"coins")}else n([{symbol:"BTC",name:"Bitcoin",price:45e3,change24h:2.5},{symbol:"ETH",name:"Ethereum",price:3200,change24h:1.8},{symbol:"BNB",name:"BNB",price:320,change24h:-.5},{symbol:"ADA",name:"Cardano",price:.85,change24h:3.2},{symbol:"SOL",name:"Solana",price:125,change24h:4.1}]);l(!1)}catch(f){console.error(" SimplePriceTicker: Error fetching prices:",f),n([{symbol:"BTC",name:"Bitcoin",price:45e3,change24h:2.5},{symbol:"ETH",name:"Ethereum",price:3200,change24h:1.8},{symbol:"BNB",name:"BNB",price:320,change24h:-.5},{symbol:"ADA",name:"Cardano",price:.85,change24h:3.2},{symbol:"SOL",name:"Solana",price:125,change24h:4.1}]),l(!1)}};y.useEffect(()=>{h();const f=setInterval(h,s);return()=>clearInterval(f)},[s]);const d=f=>f>=1e3?`$${f.toLocaleString(void 0,{maximumFractionDigits:0})}`:f>=1?`$${f.toFixed(2)}`:`$${f.toFixed(4)}`,u=f=>`${f>=0?"+":""}${f.toFixed(2)}%`;if(o)return e.jsx("div",{className:`bg-gray-900/80 backdrop-blur-sm border-b border-white/10 overflow-hidden ${a}`,style:{height:`${i}px`},children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-white/50 text-sm",children:"Loading prices..."})})});const m=[...r,...r,...r];return e.jsxs("div",{className:`bg-gray-900/80 backdrop-blur-sm border-b border-white/10 overflow-hidden relative ${a}`,style:{height:`${i}px`},children:[e.jsx(R.div,{className:"flex items-center h-full whitespace-nowrap",animate:{x:[0,-100*r.length*12]},transition:{duration:t,repeat:1/0,ease:"linear"},children:m.map((f,j)=>e.jsxs("div",{className:"flex items-center gap-3 px-8 py-2",children:[e.jsx("span",{className:"text-white font-semibold text-sm",children:f.symbol}),e.jsx("span",{className:"text-white/90 text-sm font-mono",children:d(f.price)}),e.jsxs("div",{className:"flex items-center gap-1",children:[f.change24h>=0?e.jsx(Q,{className:"w-3 h-3 text-green-400"}):e.jsx(me,{className:"w-3 h-3 text-red-400"}),e.jsx("span",{className:`text-xs font-medium ${f.change24h>=0?"text-green-400":"text-red-400"}`,children:u(f.change24h)})]}),e.jsx("span",{className:"text-white/30 text-lg",children:""})]},`${f.symbol}-${j}`))}),e.jsx("div",{className:"absolute top-0 left-0 w-8 h-full bg-gradient-to-r from-gray-900/80 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute top-0 right-0 w-8 h-full bg-gradient-to-l from-gray-900/80 to-transparent pointer-events-none"}),e.jsxs("div",{className:"absolute top-1 right-2 flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-white/60",children:"LIVE"})]})]})};class Ih extends ys.EventEmitter{constructor(s={}){super();F(this,"services",new Map);F(this,"config");F(this,"healthCheckInterval",null);F(this,"isMonitoring",!1);this.config={checkInterval:6e4,timeout:1e4,maxRetries:3,retryDelay:5e3,exponentialBackoff:!0,...s},this.initializeServices()}initializeServices(){this.addService("system-health","/api/health-check"),this.addService("price-data-api","/api/crypto-prices"),this.addService("ai-services","/api/nft-collections")}addService(s,a){this.services.set(s,{name:s,url:a,status:"checking",lastCheck:null,lastSuccess:null,errorCount:0,responseTime:0,retryCount:0,maxRetries:this.config.maxRetries})}startMonitoring(){this.isMonitoring||(console.log(" Starting connection health monitoring..."),this.isMonitoring=!0,this.performHealthChecks(),this.healthCheckInterval=setInterval(()=>{this.performHealthChecks()},this.config.checkInterval),this.emit("monitoring-started"))}stopMonitoring(){this.isMonitoring&&(console.log(" Stopping connection health monitoring..."),this.isMonitoring=!1,this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null),this.emit("monitoring-stopped"))}async performHealthChecks(){console.log(" Performing health checks for all services...");const s=Array.from(this.services.entries()).map(([a,r])=>this.checkServiceHealth(a,r));await Promise.allSettled(s),this.emitHealthReport()}async checkServiceHealth(s,a){const r=Date.now();a.status="checking",a.lastCheck=new Date;try{const n=new AbortController,o=setTimeout(()=>n.abort(),this.config.timeout),l=await fetch(a.url,{method:"GET",headers:{Accept:"application/json","Cache-Control":"no-cache"},signal:n.signal});clearTimeout(o);const c=Date.now()-r;if(a.responseTime=c,l.ok)a.status="healthy",a.lastSuccess=new Date,a.errorCount=0,a.retryCount=0,console.log(` ${s}: Healthy (${c}ms)`),this.emit("service-healthy",{name:s,service:a});else if(l.status===404&&a.url.includes("supabase.co"))a.status="degraded",console.log(` ${s}: Degraded - Function not deployed yet`),this.emit("service-degraded",{name:s,service:a});else throw new Error(`HTTP ${l.status}: ${l.statusText}`)}catch(n){if(a.url.includes("supabase.co"))a.status="degraded",a.errorCount++,console.log(` ${s}: Degraded - Function not deployed yet`),this.emit("service-degraded",{name:s,service:a});else{a.status="unhealthy",a.errorCount++;const o=n instanceof Error?n.message:"Unknown error";console.warn(` ${s}: Unhealthy - ${o}`)}this.emit("service-unhealthy",{name:s,service:a,error:errorMessage}),a.retryCount<a.maxRetries&&await this.attemptReconnection(s,a)}}async attemptReconnection(s,a){a.status="reconnecting",a.retryCount++;const r=this.config.exponentialBackoff?this.config.retryDelay*Math.pow(2,a.retryCount-1):this.config.retryDelay;console.log(` ${s}: Attempting reconnection (${a.retryCount}/${a.maxRetries}) in ${r}ms...`),this.emit("service-reconnecting",{name:s,service:a,delay:r}),await new Promise(n=>setTimeout(n,r)),await this.checkServiceHealth(s,a)}emitHealthReport(){const s={timestamp:new Date,services:Array.from(this.services.entries()).map(([a,r])=>({name:a,status:r.status,responseTime:r.responseTime,errorCount:r.errorCount,lastSuccess:r.lastSuccess})),overallHealth:this.getOverallHealth()};this.emit("health-report",s)}getOverallHealth(){const s=Array.from(this.services.values()),a=s.filter(n=>n.status==="healthy").length,r=s.length;return a===r?"healthy":a>=r*.7?"degraded":"unhealthy"}getServiceStatus(s){return this.services.get(s)||null}getAllServices(){return Array.from(this.services.values())}forceReconnectAll(){console.log(" Force reconnecting all services..."),this.services.forEach(s=>{s.retryCount=0,s.errorCount=0}),this.performHealthChecks()}forceReconnectService(s){const a=this.services.get(s);a&&(console.log(` Force reconnecting ${s}...`),a.retryCount=0,a.errorCount=0,this.checkServiceHealth(s,a))}}const we=new Ih({checkInterval:6e4,timeout:1e4,maxRetries:3,retryDelay:5e3,exponentialBackoff:!0}),Ph=()=>{const[i,t]=y.useState(null),[s,a]=y.useState(!1),[r,n]=y.useState(!0),[o,l]=y.useState(!1);y.useEffect(()=>{we.startMonitoring();const g=b=>{t(b)},x=()=>{l(!0),setTimeout(()=>l(!1),3e3)},N=({name:b})=>{console.log(` Service ${b} is now healthy`)},p=({name:b,error:w})=>{console.warn(` Service ${b} is unhealthy: ${w}`)};return we.on("health-report",g),we.on("service-reconnecting",x),we.on("service-healthy",N),we.on("service-unhealthy",p),()=>{we.off("health-report",g),we.off("service-reconnecting",x),we.off("service-healthy",N),we.off("service-unhealthy",p),we.stopMonitoring()}},[]);const c=g=>{switch(g){case"healthy":return e.jsx(Le,{className:"w-4 h-4 text-green-400"});case"unhealthy":return e.jsx(rt,{className:"w-4 h-4 text-red-400"});case"checking":return e.jsx(W,{className:"w-4 h-4 text-blue-400 animate-spin"});case"reconnecting":return e.jsx(W,{className:"w-4 h-4 text-yellow-400 animate-spin"});default:return e.jsx(ue,{className:"w-4 h-4 text-gray-400"})}},h=g=>{switch(g){case"healthy":return e.jsx(Nt,{className:"w-5 h-5 text-green-400"});case"degraded":return e.jsx(ue,{className:"w-5 h-5 text-yellow-400"});case"unhealthy":return e.jsx(rt,{className:"w-5 h-5 text-red-400"});default:return e.jsx(se,{className:"w-5 h-5 text-gray-400"})}},d=g=>{switch(g){case"healthy":return"text-green-400";case"unhealthy":return"text-red-400";case"checking":return"text-blue-400";case"reconnecting":return"text-yellow-400";default:return"text-gray-400"}},u=g=>({"backend-health":"Backend Server","backend-prices":"Price Data API","backend-overview":"Market Overview","backend-defi":"DeFi Protocols","backend-ai":"AI Services",coinmarketcap:"CoinMarketCap API",alchemy:"Alchemy Blockchain",openai:"OpenAI GPT-4"})[g]||g.split("-").map(N=>N.charAt(0).toUpperCase()+N.slice(1)).join(" "),m=()=>{l(!0),we.forceReconnectAll(),setTimeout(()=>l(!1),5e3)};if(!r)return null;if(!i)return e.jsx(R.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"fixed top-16 right-4 z-40",children:e.jsx("div",{className:"bg-black/90 backdrop-blur-md border border-white/10 rounded-lg p-3 shadow-2xl",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"w-4 h-4 text-blue-400 animate-spin"}),e.jsx("span",{className:"text-white text-sm",children:"Initializing connection monitoring..."})]})})});const f=i.services.filter(g=>g.status==="healthy").length,j=i.services.length;return e.jsx(R.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-16 right-4 z-40 max-w-sm",children:e.jsxs("div",{className:"bg-black/90 backdrop-blur-md border border-white/10 rounded-lg shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>a(!s),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[h(i.overallHealth),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:"System Health"}),e.jsxs("div",{className:"text-xs text-gray-400",children:[f,"/",j," services online"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[o&&e.jsx(De,{className:"w-4 h-4 text-blue-400 animate-pulse"}),e.jsx("button",{onClick:g=>{g.stopPropagation(),a(!s)},className:"p-1 hover:bg-white/10 rounded",children:s?e.jsx(Wn,{className:"w-4 h-4 text-gray-400"}):e.jsx(Tr,{className:"w-4 h-4 text-gray-400"})}),e.jsx("button",{onClick:g=>{g.stopPropagation(),n(!1)},className:"p-1 hover:bg-white/10 rounded",children:e.jsx(at,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsx(ee,{children:s&&e.jsx(R.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"border-t border-white/10 p-3 space-y-2",children:[i.services.map(g=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[c(g.status),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-white",children:u(g.name)}),e.jsxs("div",{className:`text-xs ${d(g.status)}`,children:[g.status,g.responseTime>0&&` (${g.responseTime}ms)`]})]})]}),g.errorCount>0&&e.jsxs("div",{className:"text-xs text-red-400",children:[g.errorCount," errors"]})]},g.name)),e.jsxs("div",{className:"pt-2 border-t border-white/10 flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Last check: ",i.timestamp.toLocaleTimeString()]}),e.jsxs("button",{onClick:m,disabled:o,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 text-white text-xs rounded transition-colors flex items-center space-x-1",children:[e.jsx(W,{className:`w-3 h-3 ${o?"animate-spin":""}`}),e.jsx("span",{children:"Reconnect All"})]})]})]})})})]})})},$h=({isProduction:i=!1,showDetails:t=!1})=>{const[s,a]=y.useState({status:"healthy",services:{backend:!0,database:!0,apis:!0,websocket:!0},metrics:{responseTime:0,uptime:0,errorRate:0,activeUsers:0},lastCheck:new Date().toISOString()}),[r,n]=y.useState(navigator.onLine),[o,l]=y.useState(!1);y.useEffect(()=>{const d=async()=>{try{const j=Date.now(),g=await fetch("/health"),x=Date.now()-j;if(g.ok){const N=await g.json();a(p=>({...p,status:"healthy",metrics:{...p.metrics,responseTime:x},lastCheck:new Date().toISOString()}))}else a(N=>({...N,status:"degraded",lastCheck:new Date().toISOString()}))}catch{a(g=>({...g,status:"down",lastCheck:new Date().toISOString()}))}};d();const u=setInterval(d,3e4),m=()=>n(!0),f=()=>n(!1);return window.addEventListener("online",m),window.addEventListener("offline",f),()=>{clearInterval(u),window.removeEventListener("online",m),window.removeEventListener("offline",f)}},[]);const c=d=>{switch(d){case"healthy":return"text-green-400";case"degraded":return"text-yellow-400";case"down":return"text-red-400";default:return"text-gray-400"}},h=d=>{switch(d){case"healthy":return e.jsx(Le,{className:"w-4 h-4"});case"degraded":return e.jsx(ue,{className:"w-4 h-4"});case"down":return e.jsx(qn,{className:"w-4 h-4"});default:return e.jsx(se,{className:"w-4 h-4"})}};return!i&&!t?null:e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 cursor-pointer",onClick:()=>l(!o),children:[e.jsxs("div",{className:`flex items-center gap-2 ${c(s.status)}`,children:[h(s.status),e.jsx("span",{className:"text-sm font-medium",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsx("div",{className:"flex items-center gap-1 text-gray-400",children:r?e.jsx(Nt,{className:"w-4 h-4 text-green-400"}):e.jsx(rt,{className:"w-4 h-4 text-red-400"})})]}),o&&e.jsxs("div",{className:"border-t border-gray-700 p-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-300 mb-2",children:"Services"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(s.services).map(([d,u])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${u?"bg-green-400":"bg-red-400"}`}),e.jsx("span",{className:"text-gray-300 capitalize",children:d})]},d))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-300 mb-2",children:"Metrics"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Response Time"}),e.jsxs("span",{className:"text-white",children:[s.metrics.responseTime,"ms"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Error Rate"}),e.jsxs("span",{className:"text-white",children:[s.metrics.errorRate.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Network"}),e.jsx("span",{className:r?"text-green-400":"text-red-400",children:r?"Online":"Offline"})]})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Last check: ",new Date(s.lastCheck).toLocaleTimeString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"text-xs bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded transition-colors",children:"Refresh"}),e.jsx("button",{onClick:()=>l(!1),className:"text-xs bg-gray-600 hover:bg-gray-700 px-2 py-1 rounded transition-colors",children:"Close"})]})]})]})})},gn=y.createContext(void 0),Dh=({children:i})=>{const t=Ar(),[s,a]=y.useState({currentFeature:"dashboard",contextData:null,portfolioData:null,userPreferences:{theme:"dark",currency:"USD",language:"en",notifications:!0,autoTrading:!1,riskTolerance:"moderate"},isAIEnabled:!0,aiCapabilities:{naturalLanguageTrading:!0,portfolioAnalysis:!0,marketInsights:!0,voiceCommands:!0,contextAwareness:!0,multiLanguage:!0,realTimeData:!0,predictiveAnalytics:!0,riskAssessment:!0,educationalContent:!0}});y.useEffect(()=>{const u=t.pathname;let m="dashboard";u.includes("/portfolio")?m="portfolio":u.includes("/defi")?m="defi":u.includes("/nft")?m="nft":u.includes("/dao")?m="dao":u.includes("/infrastructure")?m="infrastructure":u.includes("/multi-chain")?m="multi-chain":u.includes("/gamefi")?m="gamefi":u.includes("/web3-tools")?m="web3-tools":u.includes("/analysis")?m="analysis":u.includes("/settings")&&(m="settings"),r(m)},[t.pathname]),y.useEffect(()=>{const u=localStorage.getItem("connectouch-ai-preferences");if(u)try{const m=JSON.parse(u);a(f=>({...f,userPreferences:{...f.userPreferences,...m}}))}catch(m){console.error("Error loading AI preferences:",m)}},[]),y.useEffect(()=>{localStorage.setItem("connectouch-ai-preferences",JSON.stringify(s.userPreferences))},[s.userPreferences]);const r=(u,m)=>{a(f=>({...f,currentFeature:u,contextData:m||h(u)}))},n=u=>{a(m=>({...m,portfolioData:u}))},o=u=>{a(m=>({...m,userPreferences:{...m.userPreferences,...u}}))},l=()=>{a(u=>({...u,isAIEnabled:!u.isAIEnabled}))},c=u=>{a(m=>({...m,aiCapabilities:{...m.aiCapabilities,...u}}))},h=u=>{switch(u){case"portfolio":return{totalValue:"$125,000",change24h:"+2.5%",topHoldings:["BTC","ETH","MATIC"],riskScore:"Moderate"};case"defi":return{totalStaked:"$45,000",avgAPY:"8.5%",protocols:["Aave","Compound","Uniswap"],impermanentLoss:"-0.2%"};case"nft":return{collections:5,totalValue:"$12,000",floorPrices:{BAYC:"25 ETH",CryptoPunks:"45 ETH"},trending:["Azuki","Doodles"]};case"dao":return{activeDAOs:3,votingPower:"2.5M tokens",proposalsVoted:47,participationRate:"78%"};case"infrastructure":return{networksTracked:6,avgTPS:"15,000",totalValidators:"900K",avgUptime:"99.5%"};case"multi-chain":return{chainsConnected:5,bridgeVolume:"$8.5B",crossChainTxs:"2.5M",avgBridgeTime:"6.5 min"};default:return{totalMarketCap:"$1.2T",btcDominance:"42%",fearGreedIndex:65,activeUsers:"125M"}}},d={aiContext:s,updateContext:r,updatePortfolio:n,updatePreferences:o,toggleAI:l,updateCapabilities:c};return e.jsx(gn.Provider,{value:d,children:i})},Rh=()=>{const i=y.useContext(gn);return i||(console.warn("useFloatingAI: FloatingAIProvider not found, using fallback"),{aiContext:{currentFeature:"dashboard",contextData:null,isAIEnabled:!1,aiCapabilities:{canAnalyze:!1,canTrade:!1,canPredict:!1,canOptimize:!1},portfolio:null,preferences:{riskTolerance:"medium",investmentGoals:[],preferredAssets:[],notifications:!0}},updateContext:()=>{},updatePortfolio:()=>{},updatePreferences:()=>{},toggleAI:()=>{},updateCapabilities:()=>{}})},Lh=({currentFeature:i="dashboard",contextData:t,portfolioData:s,userPreferences:a,onTradeAction:r,onPortfolioAction:n,onNavigationAction:o,onSettingsChange:l})=>{const[c,h]=y.useState(!1),[d,u]=y.useState(!1),[m,f]=y.useState(!1),[j,g]=y.useState([]),[x,N]=y.useState(""),[p,b]=y.useState(!1),[w,k]=y.useState(""),[_,P]=y.useState(!1),[E,I]=y.useState(!1),[v,A]=y.useState(!1),[$,S]=y.useState(!1),[C,D]=y.useState("chat"),[T,M]=y.useState({enabled:!0,autoSpeak:!1,language:"en-US",voice:"default",rate:1,pitch:1,volume:.8}),[V,O]=y.useState({naturalLanguageTrading:!0,portfolioAnalysis:!0,marketInsights:!0,voiceCommands:!0,contextAwareness:!0,multiLanguage:!0,realTimeData:!0,predictiveAnalytics:!0,riskAssessment:!0,educationalContent:!0}),H=y.useRef(null),G=y.useRef(null),q=y.useRef(null),J=y.useRef(null);y.useEffect(()=>(ne(),St(),lt(),()=>{_t()}),[]),y.useEffect(()=>{vs()},[j]),y.useEffect(()=>{pn()},[i,t]);const ne=()=>{const L={id:"1",type:"ai",content:qt(),timestamp:new Date,suggestions:Kt(),context:i,confidence:100,voiceEnabled:!0};g([L])},St=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const L=window.webkitSpeechRecognition||window.SpeechRecognition;q.current=new L,q.current.continuous=!1,q.current.interimResults=!1,q.current.lang=T.language,q.current.onstart=()=>{I(!0)},q.current.onresult=B=>{const te=B.results[0][0].transcript;N(te),I(!1)},q.current.onerror=B=>{console.error("Speech recognition error:",B.error),I(!1)},q.current.onend=()=>{I(!1)}}},lt=()=>{"speechSynthesis"in window&&(J.current=window.speechSynthesis)},_t=()=>{q.current&&q.current.stop(),J.current&&J.current.cancel()},vs=()=>{H.current?.scrollIntoView({behavior:"smooth"})},qt=()=>{const L={dashboard:" Welcome to your AI-powered dashboard! I can help you analyze your portfolio, execute trades, and provide market insights. What would you like to explore?",portfolio:" I'm here to help optimize your portfolio! I can analyze your holdings, suggest rebalancing strategies, and identify new opportunities.",defi:" Ready to explore DeFi? I can explain protocols, help you find yield opportunities, and guide you through complex strategies safely.",nft:" Let's dive into the NFT world! I can help you discover collections, analyze floor prices, and understand market trends.",dao:" Welcome to DAO governance! I can help you understand proposals, analyze voting patterns, and participate in community decisions.",infrastructure:" Exploring blockchain infrastructure? I can compare networks, analyze performance metrics, and explain technical concepts.","multi-chain":" Multi-chain analysis at your service! I can help you bridge assets, compare networks, and optimize cross-chain strategies.",trading:" Ready to trade? I can execute orders through natural language, provide market analysis, and help manage risk.",analytics:" Let's analyze the markets! I can provide insights, identify trends, and help you make data-driven decisions."};return L[i]||L.dashboard},Kt=()=>{const L={dashboard:["Show me my portfolio performance","What's happening in crypto today?","Analyze market trends","Find trading opportunities"],portfolio:["Analyze my portfolio risk","Suggest rebalancing strategies","Find yield opportunities","Compare my performance to market"],defi:["Explain yield farming","Find best staking rewards","Compare lending protocols","Analyze liquidity pools"],nft:["Show trending NFT collections","Analyze floor price trends","Find undervalued NFTs","Explain NFT utility"],dao:["Show active proposals","Analyze voting patterns","Explain governance tokens","Find DAO opportunities"],infrastructure:["Compare blockchain performance","Explain consensus mechanisms","Analyze network security","Show scaling solutions"],"multi-chain":["Compare chain fees","Find bridge opportunities","Analyze cross-chain protocols","Show chain ecosystems"],trading:["Buy 1 ETH","Set stop loss at $1800","Show order book for BTC","Analyze trading volume"],analytics:["Show market correlation","Analyze price patterns","Find arbitrage opportunities","Predict market movements"]};return L[i]||L.dashboard},pn=()=>{if(j.length===1&&j[0].type==="ai"){const L={...j[0],content:qt(),suggestions:Kt(),context:i};g([L])}},fn=()=>{q.current&&T.enabled&&q.current.start()},xn=()=>{q.current&&q.current.stop()},js=L=>{if(J.current&&T.enabled&&!v){const B=new SpeechSynthesisUtterance(L);B.lang=T.language,B.rate=T.rate,B.pitch=T.pitch,B.volume=T.volume,B.onstart=()=>A(!0),B.onend=()=>A(!1),B.onerror=()=>A(!1),J.current.speak(B)}},wn=()=>{J.current&&(J.current.cancel(),A(!1))},bn=L=>{const B=[],te=L.toLowerCase();if(te.includes("buy")||te.includes("purchase")){const Y=te.match(/buy\s+(\d+\.?\d*)\s+(\w+)|buy\s+(\w+)/i);Y&&B.push({type:"trade",action:"buy",amount:Y[1]||"1",asset:Y[2]||Y[3]||"BTC"})}if(te.includes("sell")){const Y=te.match(/sell\s+(\d+\.?\d*)\s+(\w+)|sell\s+(\w+)/i);Y&&B.push({type:"trade",action:"sell",amount:Y[1]||"1",asset:Y[2]||Y[3]||"BTC"})}if((te.includes("portfolio")||te.includes("balance"))&&B.push({type:"portfolio",action:"view"}),(te.includes("analyze")||te.includes("analysis"))&&B.push({type:"analysis",action:"analyze",target:te.includes("portfolio")?"portfolio":"market"}),te.includes("go to")||te.includes("navigate")){const Y=te.match(/(?:go to|navigate to)\s+(\w+)/i);Y&&B.push({type:"navigation",action:"navigate",page:Y[1]})}return B},va=async()=>{if(!x.trim())return;const L={id:Date.now().toString(),type:"user",content:x,timestamp:new Date,context:i},B=bn(x);g(Y=>[...Y,L]);const te=x;N(""),b(!0);try{const{AIService:Y}=await de(async()=>{const{AIService:Se}=await import("./AIService-Olhhhq9P.js");return{AIService:Se}},[]),Ns=Y.getInstance(),ct=(Date.now()+1).toString(),kn={id:ct,type:"ai",content:"",timestamp:new Date,suggestions:[],context:i,actionable:!1,actions:[],confidence:0,voiceEnabled:!0,metadata:{streaming:!0}};g(Se=>[...Se,kn]),P(!0),k("");const Ct=await Ns.enhancedChat(te,j.slice(-10).map(Se=>({role:Se.type==="user"?"user":"assistant",content:Se.content})),{feature:i,portfolioData:s,userPreferences:a,contextData:t},B,V,Se=>{k(Jt=>{const ja=Jt+Se;return g(_n=>_n.map(ks=>ks.id===ct?{...ks,content:ja}:ks)),ja})}),Sn={id:ct,type:"ai",content:Ct.response,timestamp:new Date,suggestions:Ct.suggestions||Kt(),context:i,actionable:B.length>0,actions:B,confidence:Ct.confidence||85,voiceEnabled:!0,metadata:Ct.metadata};g(Se=>Se.map(Jt=>Jt.id===ct?Sn:Jt)),P(!1),k(""),B.length>0&&yn(B),T.autoSpeak&&T.enabled&&js(Ct.response)}catch(Y){console.error(" AI Assistant Error:",Y),console.error(" Error details:",Y instanceof Error?Y.message:Y);const Ns={id:(Date.now()+1).toString(),type:"ai",content:` OpenAI API Error: ${Y instanceof Error?Y.message:"Unknown error"}.

 This error means:
- The real OpenAI API is not working
- All fallback responses have been removed
- You need to fix the API connection

 Check the browser console for detailed error information.`,timestamp:new Date,suggestions:["Check API key","Test connection","View console logs","Try again"],context:i,actionable:!1,confidence:0,voiceEnabled:!1,metadata:{error:!0,errorType:"OpenAI_API_Failure",errorDetails:Y instanceof Error?Y.message:Y}};g(ct=>[...ct,Ns])}b(!1)},yn=L=>{L.forEach(B=>{switch(B.type){case"trade":r?.(B);break;case"portfolio":n?.(B);break;case"navigation":o?.(B);break;default:console.log("Unknown command type:",B.type)}})},vn=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),va())},Ke=L=>{N(L),G.current?.focus()},jn=()=>{E?xn():fn()},Nn=()=>{if(v)wn();else{const L=j.filter(B=>B.type==="ai").pop();L&&js(L.content)}};return c?e.jsx(R.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:`fixed z-50 transition-all duration-300 ${m?"inset-4":d?"bottom-6 right-6 w-80 h-16":"bottom-6 right-6 w-96 h-[600px]"}`,children:e.jsxs("div",{className:"glass-card h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"w-6 h-6 text-blue-400"}),e.jsx(R.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold",children:"AI Assistant"}),e.jsx("p",{className:"text-white/60 text-xs",children:p?"Thinking...":`${i} context`})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[T.enabled&&e.jsx("button",{onClick:Nn,className:`p-2 rounded-lg transition-colors ${v?"bg-red-500/20 text-red-400":"bg-white/10 text-white/60 hover:text-white"}`,children:v?e.jsx(kr,{className:"w-4 h-4"}):e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(!$),className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white/60 hover:text-white transition-colors",children:e.jsx(ps,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(!m),className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white/60 hover:text-white transition-colors",children:m?e.jsx(Ft,{className:"w-4 h-4"}):e.jsx(ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(!d),className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white/60 hover:text-white transition-colors",children:e.jsx(Ft,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 bg-white/10 hover:bg-red-500/20 rounded-lg text-white/60 hover:text-red-400 transition-colors",children:e.jsx(at,{className:"w-4 h-4"})})]})]}),d&&e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-white font-medium",children:"AI Assistant"}),p&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]}),e.jsx("button",{onClick:()=>u(!1),className:"p-1 bg-white/10 hover:bg-white/20 rounded text-white/60 hover:text-white transition-colors",children:e.jsx(ds,{className:"w-4 h-4"})})]}),!d&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:$&&e.jsxs(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-b border-white/10 p-4 bg-white/5",children:[e.jsx("h4",{className:"text-white font-medium mb-3",children:"AI Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/80 text-sm",children:"Voice Commands"}),e.jsx("button",{onClick:()=>M(L=>({...L,enabled:!L.enabled})),className:`w-10 h-6 rounded-full transition-colors ${T.enabled?"bg-blue-500":"bg-white/20"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full transition-transform ${T.enabled?"translate-x-5":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/80 text-sm",children:"Auto Speak"}),e.jsx("button",{onClick:()=>M(L=>({...L,autoSpeak:!L.autoSpeak})),className:`w-10 h-6 rounded-full transition-colors ${T.autoSpeak?"bg-blue-500":"bg-white/20"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full transition-transform ${T.autoSpeak?"translate-x-5":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-white/80 text-sm",children:["Speech Rate: ",T.rate]}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:T.rate,onChange:L=>M(B=>({...B,rate:parseFloat(L.target.value)})),className:"w-full mt-1"})]})]})]})}),e.jsx("div",{className:"flex border-b border-white/10",children:[{id:"chat",label:"Chat",icon:e.jsx(_r,{className:"w-4 h-4"})},{id:"insights",label:"Insights",icon:e.jsx(Rt,{className:"w-4 h-4"})},{id:"actions",label:"Actions",icon:e.jsx(De,{className:"w-4 h-4"})},{id:"history",label:"History",icon:e.jsx(nt,{className:"w-4 h-4"})}].map(L=>e.jsxs("button",{onClick:()=>D(L.id),className:`flex-1 flex items-center justify-center gap-2 py-3 px-2 text-sm font-medium transition-colors ${C===L.id?"text-blue-400 border-b-2 border-blue-400":"text-white/60 hover:text-white"}`,children:[L.icon,e.jsx("span",{className:"hidden sm:inline",children:L.label})]},L.id))}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(ee,{mode:"wait",children:e.jsxs(R.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"h-full",children:[C==="chat"&&e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[j.map(L=>e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex ${L.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] p-4 rounded-2xl ${L.type==="user"?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg":"bg-gradient-to-r from-white/10 to-white/5 text-white border border-white/10 shadow-lg"}`,children:[L.type==="ai"&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold",children:"A"})}),e.jsx("span",{className:"text-xs font-medium text-purple-300",children:"Connectouch"}),L.metadata?.streaming&&e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),e.jsx("div",{className:"prose prose-sm prose-invert max-w-none",children:e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:L.content})}),L.confidence&&L.confidence>0&&e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-white/10 rounded-full h-1",children:e.jsx("div",{className:"h-1 rounded-full bg-gradient-to-r from-green-400 to-blue-400",style:{width:`${L.confidence}%`}})}),e.jsxs("span",{className:"text-xs text-white/60",children:[L.confidence,"%"]})]}),L.suggestions&&L.suggestions.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("p",{className:"text-xs text-white/70 font-medium",children:" Try asking:"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:L.suggestions.slice(0,3).map((B,te)=>e.jsxs("button",{onClick:()=>Ke(B),className:"text-left text-xs p-2 bg-white/5 hover:bg-white/15 rounded-lg transition-all duration-200 border border-white/10 hover:border-white/20",children:[e.jsx("span",{className:"text-blue-300",children:""})," ",B]},te))})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-white/40",children:L.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),L.type==="ai"&&e.jsxs("div",{className:"flex items-center gap-2",children:[T.enabled&&e.jsx("button",{onClick:()=>js(L.content),className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(Ht,{className:"w-3 h-3 text-white/60"})}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(L.content),className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(Kn,{className:"w-3 h-3 text-white/60"})})]})]})]})},L.id)),(p||_)&&e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:e.jsx("div",{className:"bg-white/10 text-white p-3 rounded-lg",children:_?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-1 h-4 bg-green-400 rounded-full animate-pulse"}),e.jsx("div",{className:"w-1 h-3 bg-green-400 rounded-full animate-pulse",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-1 h-5 bg-green-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"w-1 h-2 bg-green-400 rounded-full animate-pulse",style:{animationDelay:"0.3s"}})]}),e.jsx("span",{className:"text-xs text-green-400 ml-2",children:"Connectouch is responding..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-xs text-blue-400 ml-2",children:"Connectouch is thinking..."})]})})}),e.jsx("div",{ref:H})]}),e.jsxs("div",{className:"p-4 border-t border-white/10 bg-gradient-to-r from-white/5 to-transparent",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-white",children:"A"})}),e.jsx("span",{className:"text-xs text-white/70",children:_?"Connectouch is responding...":p?"Connectouch is thinking...":"Chat with Connectouch, your crypto companion"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("textarea",{ref:G,value:x,onChange:L=>N(L.target.value),onKeyDown:vn,placeholder:"Hey Connectouch! Ask me anything about crypto, DeFi, trading, or just say hi! ",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 resize-none transition-all duration-200",rows:x.length>50?2:1,style:{minHeight:"48px",maxHeight:"96px"}}),T.enabled&&e.jsx("button",{onClick:jn,className:`absolute right-12 top-1/2 transform -translate-y-1/2 p-2 rounded-lg transition-all duration-200 ${E?"text-red-400 bg-red-400/20 animate-pulse":"text-white/60 hover:text-white hover:bg-white/10"}`,title:E?"Stop listening":"Start voice input",children:E?e.jsx(Jn,{className:"w-4 h-4"}):e.jsx(Yn,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:va,disabled:!x.trim()||p||_,className:`px-4 py-3 rounded-xl text-white transition-all duration-200 ${!x.trim()||p||_?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl transform hover:scale-105"}`,title:"Send message",children:p||_?e.jsx(W,{className:"w-4 h-4 animate-spin"}):e.jsx(xr,{className:"w-4 h-4"})})]}),!p&&!_&&x.length===0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Kt().slice(0,2).map((L,B)=>e.jsx("button",{onClick:()=>Ke(L),className:"text-xs px-3 py-1 bg-white/5 hover:bg-white/15 rounded-full text-white/70 hover:text-white transition-all duration-200 border border-white/10 hover:border-white/20",children:L},B))})]})]}),C==="insights"&&e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("h4",{className:"text-white font-medium",children:"Market Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-white font-medium",children:"Market Trend"})]}),e.jsx("p",{className:"text-white/70 text-sm",children:"Bitcoin is showing strong bullish momentum with increased institutional adoption."})]}),e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ut,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-white font-medium",children:"Risk Assessment"})]}),e.jsx("p",{className:"text-white/70 text-sm",children:"Your portfolio shows moderate risk with good diversification across DeFi protocols."})]}),e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-white font-medium",children:"Opportunities"})]}),e.jsx("p",{className:"text-white/70 text-sm",children:"Consider staking ETH for 4.5% APY or exploring new DeFi yield farming opportunities."})]})]})]}),C==="actions"&&e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("h4",{className:"text-white font-medium",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>Ke("Buy 0.1 BTC"),className:"p-3 bg-green-600/20 hover:bg-green-600/30 rounded-lg text-green-400 transition-colors",children:[e.jsx(Ve,{className:"w-5 h-5 mx-auto mb-1"}),e.jsx("span",{className:"text-xs",children:"Quick Buy"})]}),e.jsxs("button",{onClick:()=>Ke("Analyze my portfolio"),className:"p-3 bg-blue-600/20 hover:bg-blue-600/30 rounded-lg text-blue-400 transition-colors",children:[e.jsx(Ne,{className:"w-5 h-5 mx-auto mb-1"}),e.jsx("span",{className:"text-xs",children:"Analyze"})]}),e.jsxs("button",{onClick:()=>Ke("Find yield opportunities"),className:"p-3 bg-purple-600/20 hover:bg-purple-600/30 rounded-lg text-purple-400 transition-colors",children:[e.jsx(ge,{className:"w-5 h-5 mx-auto mb-1"}),e.jsx("span",{className:"text-xs",children:"Find Yield"})]}),e.jsxs("button",{onClick:()=>Ke("Show market trends"),className:"p-3 bg-yellow-600/20 hover:bg-yellow-600/30 rounded-lg text-yellow-400 transition-colors",children:[e.jsx(Q,{className:"w-5 h-5 mx-auto mb-1"}),e.jsx("span",{className:"text-xs",children:"Trends"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-white/80 text-sm font-medium",children:"Voice Commands"}),e.jsxs("div",{className:"text-white/60 text-xs space-y-1",children:[e.jsx("p",{children:' "Buy 1 ETH"'}),e.jsx("p",{children:' "Analyze my portfolio"'}),e.jsx("p",{children:' "Show me DeFi opportunities"'}),e.jsx("p",{children:` "What's the price of Bitcoin?"`})]})]})]}),C==="history"&&e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("h4",{className:"text-white font-medium",children:"Conversation History"}),e.jsx("div",{className:"space-y-2",children:j.filter(L=>L.type==="user").slice(-5).map(L=>e.jsxs("div",{className:"p-2 bg-white/5 rounded text-white/70 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"truncate",children:L.content}),e.jsx("button",{onClick:()=>Ke(L.content),className:"ml-2 p-1 hover:bg-white/10 rounded",children:e.jsx(W,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"text-xs opacity-50 mt-1",children:L.timestamp.toLocaleString()})]},L.id))})]})]},C)})})]})]})}):e.jsx(R.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},className:"fixed bottom-6 right-6 z-50",children:e.jsxs(R.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(!0),className:"relative bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"w-7 h-7"}),e.jsx(R.div,{animate:{scale:[1,1.3,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full"}),p&&e.jsx(R.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"absolute -bottom-1 -left-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),e.jsx("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-black/80 text-white text-sm rounded-lg opacity-0 hover:opacity-100 transition-opacity whitespace-nowrap",children:"AI Assistant - Click to chat!"})]})})},Mh=()=>{const{aiContext:i,updateContext:t,updatePortfolio:s,updatePreferences:a}=Rh();if(!i.isAIEnabled)return null;const r=c=>{if(console.log("Trade action:",c),c.type==="trade"){const h=`${c.action.toUpperCase()} ${c.amount} ${c.asset}`;console.log(`Executing trade: ${h}`),setTimeout(()=>{console.log(`Trade executed: ${h}`),s({...i.portfolioData,lastTrade:{action:c.action,amount:c.amount,asset:c.asset,timestamp:new Date,status:"completed"}})},2e3)}},n=c=>{switch(console.log("Portfolio action:",c),c.action){case"view":t("portfolio");break;case"analyze":console.log("Analyzing portfolio...");break;case"rebalance":console.log("Generating rebalancing suggestions...");break;default:console.log("Unknown portfolio action:",c.action)}},o=c=>{if(console.log("Navigation action:",c),c.type==="navigation"&&c.action==="navigate"){const d={portfolio:"/portfolio",defi:"/defi",nft:"/nft",dao:"/dao",infrastructure:"/infrastructure",multichain:"/multi-chain","multi-chain":"/multi-chain",gamefi:"/gamefi",gaming:"/gamefi",tools:"/web3-tools",web3:"/web3-tools",analysis:"/analysis",analytics:"/analysis",dashboard:"/",home:"/"}[c.page.toLowerCase()];d?window.location.href=d:console.log(`Unknown page: ${c.page}`)}},l=c=>{console.log("Settings change:",c),a(c)};return e.jsx(Lh,{currentFeature:i.currentFeature,contextData:i.contextData,portfolioData:i.portfolioData,userPreferences:i.userPreferences,onTradeAction:r,onPortfolioAction:n,onNavigationAction:o,onSettingsChange:l})},Oh=pe.lazy(()=>de(()=>import("./DeFiPage-DmLGAYOu.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Fh=pe.lazy(()=>de(()=>import("./NFTPage-BfqODH7V.js"),__vite__mapDeps([7,1,2,3,4,5,6]))),Uh=pe.lazy(()=>de(()=>import("./GameFiPage-CTjogMdm.js"),__vite__mapDeps([8,1,2,3,4,5,6]))),Bh=pe.lazy(()=>de(()=>import("./Web3ToolsPage-CheEELSA.js"),__vite__mapDeps([9,1,2,3,4,5,6]))),Hh=pe.lazy(()=>de(()=>import("./AnalysisPage-C57PLTt5.js"),__vite__mapDeps([10,1,2,3,4,6]))),zh=pe.lazy(()=>de(()=>import("./PortfolioPage-0y2gw2EG.js"),__vite__mapDeps([11,1,2,3,4,6]))),Vh=pe.lazy(()=>de(()=>import("./MultiChainPage-DUXZIMwI.js"),__vite__mapDeps([12,1,2,3,4,6]))),Gh=pe.lazy(()=>de(()=>import("./EnhancedDAOPage-BsUuYVeT.js"),__vite__mapDeps([13,1,2,3,4,6]))),Wh=pe.lazy(()=>de(()=>import("./InfrastructurePage-Cd20Y3sZ.js"),__vite__mapDeps([14,1,2,3,4,5,6]))),qh=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs(R.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex flex-col items-center space-y-4",children:[e.jsx(Cr,{className:"w-12 h-12 text-blue-500 animate-spin"}),e.jsx("p",{className:"text-white/80 text-lg font-medium",children:"Loading Connectouch Platform..."})]})}),Ce={initial:{opacity:0,y:20,scale:.98},in:{opacity:1,y:0,scale:1},out:{opacity:0,y:-20,scale:1.02}},Te={type:"tween",ease:"anticipate",duration:.4};function Kh(){const[t,s]=y.useState(null);return y.useEffect(()=>{const a=n=>{console.error("Global error:",n.error);const o=n.error?.message||"An unexpected error occurred";if(o.includes("ChunkLoadError")||o.includes("Loading chunk")){window.location.reload();return}},r=n=>{console.error("Unhandled promise rejection:",n.reason)};return window.addEventListener("error",a),window.addEventListener("unhandledrejection",r),()=>{window.removeEventListener("error",a),window.removeEventListener("unhandledrejection",r)}},[]),y.useEffect(()=>{},[!1]),e.jsx(rc,{children:e.jsx(nc,{children:e.jsxs(Dh,{children:[e.jsx(Jh,{}),e.jsx(Mh,{})]})})})}const Jh=()=>{an();const[i,t]=y.useState(!1),[s,a]=y.useState(!1),[r,n]=y.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden",children:[e.jsx(Ah,{}),e.jsx(Ch,{}),e.jsx(gr,{height:40,speed:60,updateInterval:6e4,className:"w-full"}),e.jsx("main",{className:"relative z-10",children:e.jsx(ee,{mode:"wait",children:e.jsx(y.Suspense,{fallback:e.jsx(qh,{}),children:e.jsxs(Xn,{children:[e.jsx(_e,{path:"/",element:e.jsx(R.div,{variants:Ce,initial:"initial",animate:"in",exit:"out",transition:Te,children:e.jsx(_h,{})},"home")}),e.jsx(_e,{path:"/defi",element:e.jsx(R.div,{variants:Ce,initial:"initial",animate:"in",exit:"out",transition:Te,children:e.jsx(Oh,{})},"defi")}),e.jsx(_e,{path:"/nft",element:e.jsx(R.div,{variants:Ce,initial:"initial",animate:"in",exit:"out",transition:Te,children:e.jsx(Fh,{})},"nft")}),e.jsx(_e,{path:"/gamefi",element:e.jsx(R.div,{variants:Ce,initial:"initial",animate:"in",exit:"out",transition:Te,children:e.jsx(Uh,{})},"gamefi")}),e.jsx(_e,{path:"/web3-tools",element:e.jsx(R.div,{variants:Ce,initial:"initial",animate:"in",exit:"out",transition:Te,children:e.jsx(Bh,{})},"web3-tools")}),e.jsx(_e,{path:"/analysis",element:e.jsx(R.div,{variants:Ce,initial:"initial",animate:"in",exit:"out",transition:Te,children:e.jsx(Hh,{})},"analysis")}),e.jsx(_e,{path:"/portfolio",element:e.jsx(R.div,{variants:Ce,initial:"initial",animate:"in",exit:"out",transition:Te,children:e.jsx(zh,{})},"portfolio")}),e.jsx(_e,{path:"/multi-chain",element:e.jsx(R.div,{variants:Ce,initial:"initial",animate:"in",exit:"out",transition:Te,children:e.jsx(Vh,{})},"multi-chain")}),e.jsx(_e,{path:"/dao",element:e.jsx(R.div,{variants:Ce,initial:"initial",animate:"in",exit:"out",transition:Te,children:e.jsx(Gh,{})},"dao")}),e.jsx(_e,{path:"/infrastructure",element:e.jsx(R.div,{variants:Ce,initial:"initial",animate:"in",exit:"out",transition:Te,children:e.jsx(Wh,{})},"infrastructure")})]})})})}),e.jsx(Th,{}),e.jsx(Eh,{}),e.jsx(gr,{}),e.jsx(Ph,{}),e.jsx($h,{}),e.jsx("div",{className:"fixed top-4 left-4 z-50",children:e.jsx("div",{className:"bg-green-500/20 backdrop-blur-lg rounded-lg px-4 py-2 text-sm text-green-400 border border-green-500/30",children:" Full Platform Active"})})]})};console.log(" Connectouch Platform Starting (FULL FEATURED VERSION)...");console.log(" Environment:",{mode:"production",dev:!1,prod:!0,supabaseUrl:"Set",supabaseKey:"Set"});console.log(" Performance Monitoring Active");const Yh=performance.now();console.log(" Feature Flags:",{aiAssistant:!0,voiceCommands:!0,trading:!0,notifications:!0});window.addEventListener("error",i=>{console.error(" Global Error:",i.error),console.error(" Location:",i.filename,i.lineno,i.colno),console.error(" Stack:",i.error?.stack)});window.addEventListener("unhandledrejection",i=>{console.error(" Unhandled Promise Rejection:",i.reason),console.error(" Promise:",i.promise)});const Xh=new ti({defaultOptions:{queries:{retry:(i,t)=>(console.log(` Query retry ${i}:`,t),t instanceof Error&&"status"in t&&typeof t.status=="number"&&t.status>=400&&t.status<500?!1:i<3),staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!0,refetchOnReconnect:!0,onError:i=>{console.error(" Query Error:",i)},enabled:!0},mutations:{retry:(i,t)=>(console.log(` Mutation retry ${i}:`,t),i<2),onError:i=>{console.error(" Mutation Error:",i)}}}});class Qh extends pe.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return console.error(" Error Boundary Triggered:",t),{hasError:!0,error:t}}componentDidCatch(t,s){console.error(" Application Error Details:",{error:t.message,stack:t.stack,componentStack:s.componentStack,errorBoundary:"Main Application"}),this.setState({error:t,errorInfo:s})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-2xl w-full text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Connectouch Platform Error"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"The platform encountered an unexpected error. Our enhanced error handling is working to resolve this."}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6 text-left",children:[e.jsx("h3",{className:"text-white font-semibold mb-2",children:"Error Details:"}),e.jsx("p",{className:"text-red-300 text-sm font-mono",children:this.state.error?.message||"Unknown error occurred"}),this.state.error?.stack&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-gray-400 cursor-pointer",children:"Stack Trace"}),e.jsx("pre",{className:"text-xs text-gray-500 mt-2 overflow-auto max-h-32",children:this.state.error.stack})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.reload()},className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:" Reload Platform"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"w-full bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-200",children:" Try Again"})]})]})}):this.props.children}}try{console.log(" Initializing Enhanced React Root..."),console.log(" Pre-flight System Checks..."),console.log(" User Agent:",navigator.userAgent),console.log(" Browser:",{language:navigator.language,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine});const i=document.getElementById("root");if(!i)throw new Error("Critical: Root element not found in DOM");console.log(" Root element found and validated"),console.log(" Root element details:",{id:i.id,className:i.className,children:i.children.length});const t=li.createRoot(i);console.log(" Enhanced React root created successfully"),t.render(e.jsx(pe.StrictMode,{children:e.jsx(Qh,{children:e.jsx(si,{client:Xh,children:e.jsxs(Qn,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[e.jsx(Kh,{}),e.jsx(Qi,{position:"top-right",toastOptions:{duration:4e3,style:{background:"rgba(0, 0, 0, 0.8)",color:"#fff",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},success:{iconTheme:{primary:"#10B981",secondary:"#FFFFFF"}},error:{iconTheme:{primary:"#EF4444",secondary:"#FFFFFF"}}}})]})})})})),console.log(" Enhanced React app rendered with full features"),setTimeout(()=>{const a=performance.now()-Yh;if(i.children.length>0){console.log(" Connectouch Platform Successfully Loaded!"),console.log(" Platform Statistics:",{loadTime:`${a.toFixed(2)}ms`,childElements:i.children.length,memoryUsage:performance.memory?{used:`${(performance.memory.usedJSHeapSize/1024/1024).toFixed(2)}MB`,total:`${(performance.memory.totalJSHeapSize/1024/1024).toFixed(2)}MB`,limit:`${(performance.memory.jsHeapSizeLimit/1024/1024).toFixed(2)}MB`}:"Not available"});const r=document.createElement("div");r.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, #4CAF50, #45a049);
        color: white;
        padding: 12px 24px;
        border-radius: 30px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        font-size: 14px;
        font-weight: 600;
        z-index: 10000;
        box-shadow: 0 8px 32px rgba(76, 175, 80, 0.3);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        animation: slideInBounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      `,r.innerHTML=` Full Platform Loaded (${a.toFixed(0)}ms)`;const n=document.createElement("style");n.textContent=`
        @keyframes slideInBounce {
          0% { transform: translateX(100%) scale(0.8); opacity: 0; }
          60% { transform: translateX(-10px) scale(1.05); opacity: 1; }
          100% { transform: translateX(0) scale(1); opacity: 1; }
        }
      `,document.head.appendChild(n),document.body.appendChild(r),setTimeout(()=>{r.parentNode&&(r.style.transition="all 0.5s ease-out",r.style.transform="translateX(100%) scale(0.8)",r.style.opacity="0",setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},500))},4e3),console.log(" Enhanced Features Activated:",{aiAssistant:" Ready",realTimeData:" Active",tradingCharts:" Loaded",multiChain:" Connected",notifications:" Enabled"})}else console.error(" Critical: React failed to mount - no children in root"),console.error(" Debug Info:",{rootElement:i,innerHTML:i.innerHTML,loadTime:`${a.toFixed(2)}ms`})},2e3)}catch(i){console.error(" CRITICAL ERROR in Enhanced main.tsx:",i),console.error(" Error Details:",{message:i instanceof Error?i.message:"Unknown error",stack:i instanceof Error?i.stack:"No stack trace",timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href});const t=document.getElementById("root");t?t.innerHTML=`
      <div style="
        min-height: 100vh;
        background: linear-gradient(135deg, #1e1b4b 0%, #7c2d12 50%, #1e1b4b 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        color: white;
        text-align: center;
        padding: 20px;
        animation: fadeIn 0.5s ease-in;
      ">
        <div style="
          background: rgba(0,0,0,0.4);
          padding: 50px;
          border-radius: 24px;
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255,255,255,0.1);
          max-width: 600px;
          box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        ">
          <div style="font-size: 4rem; margin-bottom: 20px;"></div>
          <h1 style="font-size: 2.5rem; margin-bottom: 20px; font-weight: 700;">
            Connectouch Platform Critical Error
          </h1>
          <p style="font-size: 1.2rem; margin-bottom: 30px; opacity: 0.9;">
            The enhanced platform failed to initialize. Our error recovery system is active.
          </p>

          <div style="
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: left;
          ">
            <div style="font-weight: 600; margin-bottom: 10px; color: #fca5a5;">Error Details:</div>
            <div style="font-family: 'SF Mono', Monaco, monospace; font-size: 0.9rem; color: #fecaca;">
              ${i instanceof Error?i.message:"Unknown initialization error"}
            </div>
            <div style="margin-top: 10px; font-size: 0.8rem; color: #fed7d7;">
              Time: ${new Date().toLocaleString()}
            </div>
          </div>

          <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
            <button onclick="window.location.reload()" style="
              background: linear-gradient(135deg, #10b981, #059669);
              color: white;
              border: none;
              padding: 15px 30px;
              border-radius: 12px;
              font-size: 1.1rem;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
              box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(16, 185, 129, 0.4)'"
               onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(16, 185, 129, 0.3)'">
               Reload Enhanced Platform
            </button>

            <button onclick="console.clear(); window.location.href = window.location.href + '?safe=true'" style="
              background: rgba(255,255,255,0.1);
              color: white;
              border: 1px solid rgba(255,255,255,0.2);
              padding: 15px 30px;
              border-radius: 12px;
              font-size: 1.1rem;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
            " onmouseover="this.style.background='rgba(255,255,255,0.2)'"
               onmouseout="this.style.background='rgba(255,255,255,0.1)'">
               Safe Mode
            </button>
          </div>

          <div style="margin-top: 30px; font-size: 0.9rem; opacity: 0.7;">
            Enhanced error recovery system active  Full feature restoration in progress
          </div>
        </div>
      </div>

      <style>
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      </style>
    `:(document.body.innerHTML='<div id="root">Connectouch Platform - Emergency Recovery Mode</div>',console.error(" EMERGENCY: Root element missing, created emergency fallback"))}export{Xe as A,Vd as B,Hd as C,mu as N,Wd as P,zd as T,Gd as a,qd as b,Qe as c,ra as d,Kd as e,Fs as f,ic as u};
