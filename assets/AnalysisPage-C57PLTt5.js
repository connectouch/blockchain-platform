import{j as e,m as h,a as A,T as V,B as S,l as _,_ as O,D as z}from"./ui-CIGGqqhk.js";import{r as s}from"./router-B3YxnSyQ.js";import{b as K}from"./web3-CeUyKLFI.js";import{C as W,T as $,B as G,a as J,P as Q,b as X,e as Y,f as Z,c as p}from"./index-CzZ89WQn.js";import"./vendor-DBnw6Ey0.js";import"./utils-C0Bg54wM.js";import"@prisma/client";import"redis";import"pg";const me=()=>{const[l,D]=s.useState("charts"),[n,b]=s.useState("BTC"),[P,ee]=s.useState(""),[x,T]=s.useState([]),[g,C]=s.useState([]),[u,M]=s.useState([]),[j,R]=s.useState([]),[i,v]=s.useState([]),[k,E]=s.useState(new Date),[ae,I]=s.useState(null),B=K({mutationFn:()=>Promise.resolve({data:null}),onSuccess:a=>{I(a?.data)},onError:a=>{console.error("Analysis failed:",a)}});s.useEffect(()=>{(async()=>{try{const t=await Z.getRealTimePrices([n]),o=t[0]?.price||5e4,q=Array.from({length:100},(d,m)=>{const r=Math.sin(m*.1)*(o*.1),c=(Math.random()-.5)*(o*.05);return o+r+c}),F=Array.from({length:100},()=>(t[0]?.volume24h||1e9)*(.5+Math.random()*.5)/100),L=Array.from({length:365},(d,m)=>{const r=o*(.8+Math.random()*.4),c=r*.05;return{timestamp:Date.now()-(365-m)*24*60*60*1e3,open:r+(Math.random()-.5)*c,high:r+Math.random()*c,low:r-Math.random()*c,close:r+(Math.random()-.5)*c,volume:(t[0]?.volume24h||1e9)*(.5+Math.random()*.5)}}),U=[{symbol:n,name:t[0]?.name||n,quantity:.5,avgPrice:o*.9,currentPrice:o,value:o*.5,change24h:t[0]?.change24h||0,allocation:60},{symbol:"ETH",name:"Ethereum",quantity:2.5,avgPrice:3200,currentPrice:3800,value:3800*2.5,change24h:2.1,allocation:40}];T(q),C(F),M(L);try{await p.initialize(),p.on("analysisUpdated",m=>{v(m),E(new Date)});const d=p.getAnalysisData();v(d)}catch(d){console.warn("Real-time analysis data initialization failed:",d)}R(U)}catch(t){console.error("Error fetching real analysis data:",t)}})()},[n]);const w=Array.from({length:100},(a,t)=>45e3+Math.sin(t*.1)*5e3+Math.random()*2e3),f=Array.from({length:100},()=>5e5+Math.random()*1e6),N=Array.from({length:365},(a,t)=>({timestamp:Date.now()-(365-t)*24*60*60*1e3,open:4e4+Math.random()*2e4,high:42e3+Math.random()*2e4,low:38e3+Math.random()*2e4,close:41e3+Math.random()*2e4,volume:5e5+Math.random()*1e6})),H=[{symbol:"BTC",name:"Bitcoin",quantity:.5,avgPrice:42e3,currentPrice:45200,value:22600,allocation:45.2,pnl:1600,pnlPercent:7.6,dayChange:800,dayChangePercent:3.7},{symbol:"ETH",name:"Ethereum",quantity:8,avgPrice:2800,currentPrice:2950,value:23600,allocation:47.2,pnl:1200,pnlPercent:5.4,dayChange:400,dayChangePercent:1.7},{symbol:"SOL",name:"Solana",quantity:40,avgPrice:95,currentPrice:105,value:4200,allocation:8.4,pnl:400,pnlPercent:10.5,dayChange:200,dayChangePercent:5}],y=["BTC","ETH","SOL","ADA","DOT","LINK","UNI","AAVE"];return e.jsx("div",{className:"min-h-screen py-20 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(h.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(A,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-5xl font-bold text-white mb-4",children:"Advanced Analysis"}),e.jsx("p",{className:"text-xl text-white/70 max-w-2xl mx-auto",children:"Professional trading tools with advanced technical analysis, backtesting, and AI-powered insights"})]}),i.length>0&&e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Real-Time Analysis Metrics"}),e.jsxs("span",{className:"text-sm text-green-400",children:["Updated: ",k.toLocaleTimeString()]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Market Sentiment"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[(i.reduce((a,t)=>a+t.sentiment,0)/i.length).toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Volatility Index"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:(i.reduce((a,t)=>a+t.volatility,0)/i.length).toFixed(1)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Risk Score"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[(i.reduce((a,t)=>a+t.riskScore,0)/i.length).toFixed(1),"/10"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-white/60 text-sm",children:"AI Confidence"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[(i.reduce((a,t)=>a+t.aiConfidence,0)/i.length).toFixed(1),"%"]})]})]})]})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-8",children:e.jsx("div",{className:"flex flex-wrap gap-2 bg-white/5 p-2 rounded-lg",children:[{id:"charts",label:"Trading Charts",icon:e.jsx(A,{className:"w-4 h-4"})},{id:"indicators",label:"Technical Indicators",icon:e.jsx(V,{className:"w-4 h-4"})},{id:"backtest",label:"Backtesting",icon:e.jsx(S,{className:"w-4 h-4"})},{id:"signals",label:"AI Signals",icon:e.jsx(_,{className:"w-4 h-4"})},{id:"patterns",label:"Pattern Recognition",icon:e.jsx(O,{className:"w-4 h-4"})},{id:"portfolio",label:"Portfolio Analytics",icon:e.jsx(z,{className:"w-4 h-4"})},{id:"alerts",label:"Alert System",icon:e.jsx(S,{className:"w-4 h-4"})}].map(a=>e.jsxs("button",{onClick:()=>D(a.id),className:`flex items-center gap-2 py-3 px-4 rounded-lg font-medium transition-colors ${l===a.id?"bg-purple-600 text-white":"text-white/60 hover:text-white hover:bg-white/10"}`,children:[a.icon,e.jsx("span",{className:"hidden sm:inline",children:a.label})]},a.id))})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-white font-medium",children:"Symbol:"}),e.jsx("select",{value:n,onChange:a=>b(a.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-400",children:y.map(a=>e.jsx("option",{value:a,className:"bg-gray-800",children:a},a))})]})}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[l==="charts"&&e.jsx(W,{symbol:n,data:u.length>0?u:N,onTimeframeChange:a=>console.log("Timeframe changed:",a),onSymbolChange:a=>b(a)}),l==="indicators"&&e.jsx($,{symbol:n,priceData:x.length>0?x:w,volumeData:g.length>0?g:f,onIndicatorChange:a=>console.log("Indicators changed:",a)}),l==="backtest"&&e.jsx(G,{symbol:n,historicalData:u.length>0?u:N,onStrategyChange:a=>console.log("Strategy changed:",a)}),l==="signals"&&e.jsx(J,{symbols:y,onSignalAction:(a,t)=>console.log("Signal action:",a,t)}),l==="patterns"&&e.jsx(Q,{symbol:n,priceData:x.length>0?x:w,volumeData:g.length>0?g:f,onPatternDetected:a=>console.log("Pattern detected:",a)}),l==="portfolio"&&e.jsx(X,{walletAddress:P,holdings:j.length>0?j:H,isLoading:B.isPending,onRebalance:()=>console.log("Rebalance requested")}),l==="alerts"&&e.jsx(Y,{symbols:y,onAlertTriggered:a=>console.log("Alert triggered:",a)})]})]})})};export{me as default};
